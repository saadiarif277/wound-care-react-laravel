import{u as R,r as d,j as e,S as Z,x as f,A as _}from"./app-CkbwHOkf.js";import{M as H}from"./MainLayout-DIjIBnGe.js";import{c as s,t as J}from"./glass-theme-CCnqi7lL.js";import{u as p,i as W,v as E,af as X,K as Y,Z as ee,al as se,am as te,ac as ae,F as O,f as $,_ as q}from"./index-R2fUhcwH.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./check-DXIgFk-v.js";function ue({products:a,categories:o,manufacturers:h,filters:n,stats:v,permissions:u,pagination:A}){const{theme:b}=R(),t=J[b],[j,B]=d.useState(n.search||""),[N,D]=d.useState(n.category||""),[y,V]=d.useState(n.manufacturer||""),[g,I]=d.useState(n.active??!0),[k,P]=d.useState("grid"),[C,K]=d.useState(!1),[r,w]=d.useState([]),[L,Q]=d.useState("name"),[S,z]=d.useState("asc"),x=a.filter(l=>{const i=l.name.toLowerCase().includes(j.toLowerCase())||l.sku.toLowerCase().includes(j.toLowerCase())||l.q_code.toLowerCase().includes(j.toLowerCase())||l.manufacturer.toLowerCase().includes(j.toLowerCase()),c=!N||l.category===N,m=!y||l.manufacturer===y,U=g===void 0||l.is_active===g;return i&&c&&m&&U}).sort((l,i)=>{let c,m;switch(L){case"price":c=l.price_per_sq_cm,m=i.price_per_sq_cm;break;case"commission":c=l.commission_rate,m=i.commission_rate;break;case"updated":c=new Date(l.updated_at).getTime(),m=new Date(i.updated_at).getTime();break;default:c=l.name.toLowerCase(),m=i.name.toLowerCase()}return S==="asc"?c>m?1:-1:c<m?1:-1}),M=()=>{_.get("/products",{search:j,category:N,manufacturer:y,active:g},{preserveState:!0})},F=l=>{if(r.length!==0){switch(l){case"activate":_.post("/products/bulk-activate",{ids:r});break;case"deactivate":_.post("/products/bulk-deactivate",{ids:r});break;case"delete":confirm(`Are you sure you want to delete ${r.length} products?`)&&_.delete("/products/bulk-delete",{data:{ids:r}});break}w([])}},T=l=>{w(i=>i.includes(l)?i.filter(c=>c!==l):[...i,l])},G=()=>{r.length===x.length?w([]):w(x.map(l=>l.id))};return e.jsxs(H,{children:[e.jsx(Z,{title:"Product Catalog"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:s("p-6 rounded-2xl",t.glass.card),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:s("text-3xl font-bold flex items-center gap-3",t.text.primary),children:[e.jsx(p,{className:"w-8 h-8 text-blue-500"}),"Product Catalog"]}),e.jsx("p",{className:s("text-sm mt-2",t.text.secondary),children:"Manage your wound care product inventory and documentation"})]}),e.jsx("div",{className:"flex items-center gap-3",children:u.can_manage_products&&e.jsxs(f,{href:"/products/create",className:s("flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all",t.button.primary.base,t.button.primary.hover),children:[e.jsx(W,{className:"w-4 h-4"}),"Add Product"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:s("p-4 rounded-xl",t.glass.frost),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s("text-xs font-medium",t.text.secondary),children:"Total Products"}),e.jsx("p",{className:s("text-2xl font-bold",t.text.primary),children:v.total_products})]}),e.jsx(p,{className:s("w-8 h-8",t.text.secondary)})]})}),u.is_provider&&e.jsx("div",{className:s("p-4 rounded-xl",t.glass.frost),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s("text-xs font-medium",t.text.secondary),children:"Onboarded Products"}),e.jsx("p",{className:s("text-2xl font-bold text-green-500"),children:v.onboarded_products})]}),e.jsx(E,{className:"w-8 h-8 text-green-500"})]})}),!u.is_provider&&e.jsx("div",{className:s("p-4 rounded-xl",t.glass.frost),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s("text-xs font-medium",t.text.secondary),children:"Active Products"}),e.jsx("p",{className:s("text-2xl font-bold text-green-500"),children:a.filter(l=>l.is_active).length})]}),e.jsx(E,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:s("p-4 rounded-xl",t.glass.frost),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s("text-xs font-medium",t.text.secondary),children:"Categories"}),e.jsx("p",{className:s("text-2xl font-bold",t.text.primary),children:o.length})]}),e.jsx(X,{className:s("w-8 h-8",t.text.secondary)})]})}),e.jsx("div",{className:s("p-4 rounded-xl",t.glass.frost),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s("text-xs font-medium",t.text.secondary),children:"Manufacturers"}),e.jsx("p",{className:s("text-2xl font-bold",t.text.primary),children:h.length})]}),e.jsx(Y,{className:s("w-8 h-8",t.text.secondary)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ee,{className:s("absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5",t.text.secondary)}),e.jsx("input",{type:"text",placeholder:"Search products, SKU, Q-code, or manufacturer...",value:j,onChange:l=>B(l.target.value),onKeyPress:l=>l.key==="Enter"&&M(),className:s("w-full pl-10 pr-4 py-3 rounded-xl",t.input.base,t.input.focus)})]}),e.jsxs("div",{className:s("flex rounded-xl p-1",t.glass.frost),children:[e.jsxs("button",{onClick:()=>P("grid"),className:s("flex items-center gap-2 px-3 py-2 rounded-lg transition-all",k==="grid"?s(t.button.primary.base,"text-white"):s(t.text.secondary,"hover:bg-white/10")),children:[e.jsx(se,{className:"w-4 h-4"}),"Grid"]}),e.jsxs("button",{onClick:()=>P("list"),className:s("flex items-center gap-2 px-3 py-2 rounded-lg transition-all",k==="list"?s(t.button.primary.base,"text-white"):s(t.text.secondary,"hover:bg-white/10")),children:[e.jsx(te,{className:"w-4 h-4"}),"List"]})]}),e.jsxs("button",{onClick:()=>K(!C),className:s("flex items-center gap-2 px-4 py-3 rounded-xl transition-all",C?s(t.button.primary.base,t.button.primary.hover):s(t.button.secondary.base,t.button.secondary.hover)),children:[e.jsx(ae,{className:"w-4 h-4"}),"Filters"]})]}),C&&e.jsxs("div",{className:s("p-4 rounded-xl",t.glass.frost),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:s("block text-sm font-medium mb-2",t.text.primary),children:"Category"}),e.jsxs("select",{value:N,onChange:l=>D(l.target.value),className:s("w-full",t.input.base,t.input.focus),children:[e.jsx("option",{value:"",children:"All Categories"}),o.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:s("block text-sm font-medium mb-2",t.text.primary),children:"Manufacturer"}),e.jsxs("select",{value:y,onChange:l=>V(l.target.value),className:s("w-full",t.input.base,t.input.focus),children:[e.jsx("option",{value:"",children:"All Manufacturers"}),h.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:s("block text-sm font-medium mb-2",t.text.primary),children:"Status"}),e.jsxs("select",{value:g===void 0?"":g.toString(),onChange:l=>I(l.target.value===""?void 0:l.target.value==="true"),className:s("w-full",t.input.base,t.input.focus),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:s("block text-sm font-medium mb-2",t.text.primary),children:"Sort By"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:L,onChange:l=>Q(l.target.value),className:s("flex-1",t.input.base,t.input.focus),children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"commission",children:"Commission"}),e.jsx("option",{value:"updated",children:"Updated"})]}),e.jsx("button",{onClick:()=>z(S==="asc"?"desc":"asc"),className:s("px-3 py-2 rounded-xl",t.button.secondary.base,t.button.secondary.hover),children:S==="asc"?"↑":"↓"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:M,className:s("px-6 py-2 rounded-xl font-medium",t.button.primary.base,t.button.primary.hover),children:"Apply Filters"})})]})]})]}),r.length>0&&e.jsxs("div",{className:s("p-4 rounded-xl flex items-center justify-between",t.status.info),children:[e.jsxs("span",{className:"font-medium",children:[r.length," product",r.length!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F("activate"),className:s("px-3 py-1 rounded-lg text-sm",t.button.approve.base,t.button.approve.hover),children:"Activate"}),e.jsx("button",{onClick:()=>F("deactivate"),className:s("px-3 py-1 rounded-lg text-sm",t.button.warning.base,t.button.warning.hover),children:"Deactivate"}),e.jsx("button",{onClick:()=>F("delete"),className:s("px-3 py-1 rounded-lg text-sm",t.button.danger.base,t.button.danger.hover),children:"Delete"})]})]}),e.jsx("div",{className:s("p-6 rounded-2xl",t.glass.card),children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:s("w-16 h-16 mx-auto mb-4",t.text.muted)}),e.jsx("h3",{className:s("text-lg font-medium mb-2",t.text.primary),children:"No products found"}),e.jsx("p",{className:s("text-sm",t.text.secondary),children:"Try adjusting your search criteria or add a new product."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:r.length===x.length,onChange:G,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("span",{className:s("text-sm",t.text.secondary),children:["Select all (",x.length," products)"]})]}),e.jsxs("span",{className:s("text-sm",t.text.secondary),children:["Showing ",x.length," of ",a.length," products"]})]}),k==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(l=>e.jsx(le,{product:l,isSelected:r.includes(l.id),onToggleSelect:()=>T(l.id),theme:t},l.id))}):e.jsx("div",{className:"space-y-3",children:x.map(l=>e.jsx(ne,{product:l,isSelected:r.includes(l.id),onToggleSelect:()=>T(l.id),theme:t},l.id))})]})})]})]})}const le=({product:a,isSelected:o,onToggleSelect:h,theme:n})=>{const[v,u]=d.useState(!1);return e.jsxs("div",{className:s("relative group rounded-xl transition-all duration-300",n.glass.card,n.glass.hover,o&&"ring-2 ring-blue-500"),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("input",{type:"checkbox",checked:o,onChange:h,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("span",{className:s("px-2 py-1 text-xs font-medium rounded-full",a.is_active?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:a.is_active?"Active":"Inactive"})}),e.jsx("div",{className:"aspect-square bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-t-xl flex items-center justify-center",children:a.image_url?e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover rounded-t-xl"}):e.jsx(p,{className:s("w-12 h-12",n.text.muted)})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:s("font-semibold text-sm line-clamp-2",n.text.primary),children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:s("text-xs px-2 py-1 rounded-full",n.glass.frost,n.text.secondary),children:["Q",a.q_code]}),e.jsx("span",{className:s("text-xs",n.text.secondary),children:a.sku})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[a.display_price!==void 0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:s("text-xs",n.text.secondary),children:[a.price_label||"Price/cm²",":"]}),e.jsxs("span",{className:s("text-sm font-medium",n.text.primary),children:["$",a.display_price.toFixed(2)]})]}),a.commission_rate!==void 0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:s("text-xs",n.text.secondary),children:"Commission:"}),e.jsxs("span",{className:"text-sm font-medium text-green-500",children:[a.commission_rate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:s("text-xs",n.text.secondary),children:"Category:"}),e.jsx("span",{className:s("text-xs",n.text.secondary),children:a.category})]}),a.is_onboarded!==void 0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:s("text-xs",n.text.secondary),children:"Status:"}),e.jsx("span",{className:s("text-xs font-medium",a.is_onboarded?"text-green-500":"text-yellow-500"),children:a.is_onboarded?"Onboarded":"Not Onboarded"})]})]}),a.document_urls&&a.document_urls.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:s("w-3 h-3",n.text.secondary)}),e.jsxs("span",{className:s("text-xs",n.text.secondary),children:[a.document_urls.length," document",a.document_urls.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.document_urls.slice(0,3).map((A,b)=>e.jsxs("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:s("text-xs px-2 py-1 rounded-lg transition-colors",n.glass.frost,"hover:bg-blue-500/20 text-blue-400"),children:["Doc ",b+1]},b)),a.document_urls.length>3&&e.jsxs("span",{className:s("text-xs px-2 py-1",n.text.muted),children:["+",a.document_urls.length-3," more"]})]})]}),e.jsxs("div",{className:s("flex gap-2 transition-all duration-300",v?"opacity-100":"opacity-0"),children:[e.jsxs(f,{href:`/products/${a.id}`,className:s("flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-xs transition-all",n.button.secondary.base,n.button.secondary.hover),children:[e.jsx($,{className:"w-3 h-3"}),"View"]}),e.jsxs(f,{href:`/products/${a.id}/edit`,className:s("flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-xs transition-all",n.button.primary.base,n.button.primary.hover),children:[e.jsx(q,{className:"w-3 h-3"}),"Edit"]})]})]})]})},ne=({product:a,isSelected:o,onToggleSelect:h,theme:n})=>e.jsxs("div",{className:s("flex items-center gap-4 p-4 rounded-xl transition-all",n.glass.frost,n.glass.hover,o&&"ring-2 ring-blue-500"),children:[e.jsx("input",{type:"checkbox",checked:o,onChange:h,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-lg flex items-center justify-center flex-shrink-0",children:a.image_url?e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover rounded-lg"}):e.jsx(p,{className:s("w-6 h-6",n.text.muted)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:s("font-medium truncate",n.text.primary),children:a.name}),e.jsx("span",{className:s("px-2 py-1 text-xs font-medium rounded-full flex-shrink-0",a.is_active?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:a.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:s("text-xs",n.text.secondary),children:["Q",a.q_code," • ",a.sku]}),e.jsx("span",{className:s("text-xs",n.text.secondary),children:a.manufacturer}),e.jsx("span",{className:s("text-xs",n.text.secondary),children:a.category})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[a.display_price!==void 0&&e.jsxs("div",{className:s("font-medium",n.text.primary),children:["$",a.display_price.toFixed(2),"/cm²"]}),a.commission_rate!==void 0&&e.jsxs("div",{className:"text-sm text-green-500",children:[a.commission_rate,"% commission"]}),a.is_onboarded!==void 0&&e.jsx("div",{className:s("text-xs mt-1",a.is_onboarded?"text-green-500":"text-yellow-500"),children:a.is_onboarded?"Onboarded":"Not Onboarded"})]}),e.jsx("div",{className:"flex-shrink-0",children:a.document_urls&&a.document_urls.length>0?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:s("w-4 h-4",n.text.secondary)}),e.jsx("span",{className:s("text-xs",n.text.secondary),children:a.document_urls.length})]}):e.jsx("span",{className:s("text-xs",n.text.muted),children:"No docs"})}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx(f,{href:`/products/${a.id}`,className:s("p-2 rounded-lg transition-all",n.button.ghost.base,n.button.ghost.hover),children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(f,{href:`/products/${a.id}/edit`,className:s("p-2 rounded-lg transition-all",n.button.primary.base,n.button.primary.hover),children:e.jsx(q,{className:"w-4 h-4"})})]})]});export{ue as default};
