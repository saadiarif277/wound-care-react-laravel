import{X as u,r as c,j as e,A as i}from"./app-taSqzBVs.js";import{M as g}from"./MainLayout-Dw1zk4VW.js";import{P as f}from"./plus-DnTY2fSz.js";import{S as j}from"./search-C3KyOaD2.js";import{M as y}from"./map-pin-DCma9yA1.js";import{S as w}from"./square-pen-Bzpm1WgH.js";import{T as N}from"./trash-2-BeOkSTDP.js";import"./x-tQL0mm7-.js";import"./createLucideIcon-CJpMkWaB.js";import"./triangle-alert-BOyfSih_.js";import"./check-B1Sfkp9P.js";import"./index-BQkVVL-M.js";const T=({facilities:o,organizations:d})=>{const{props:b}=u(),[s,m]=c.useState(""),[a,x]=c.useState(""),l=o.filter(t=>{var n;const r=t.name.toLowerCase().includes(s.toLowerCase())||((n=t.address)==null?void 0:n.toLowerCase().includes(s.toLowerCase())),h=!a||t.organization_id===a;return r&&h}),p=async t=>{window.confirm("Are you sure you want to delete this facility?")&&i.delete(`/admin/facilities/${t}`,{onSuccess:()=>{},onError(r){console.error("Error deleting facility:",r),alert("Failed to delete facility. Please try again.")}})};return e.jsx(g,{title:"Facility Management",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Facility Management"}),e.jsxs("button",{onClick:()=>i.visit("/admin/facilities/create"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(f,{className:"h-5 w-5 mr-2"}),"Add Facility"]})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search facilities...",value:s,onChange:t=>m(t.target.value)})]}),e.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:a,onChange:t=>x(t.target.value?Number(t.target.value):""),children:[e.jsx("option",{value:"",children:"All Organizations"}),d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facility Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No facilities found."})}):l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.organization_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:t.address||"No address provided"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.updated_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>i.visit(`/admin/facilities/${t.id}/edit`),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>p(t.id),className:"text-red-600 hover:text-red-900",children:e.jsx(N,{className:"h-5 w-5"})})]})]},t.id))})]})})]})})})};export{T as default};
