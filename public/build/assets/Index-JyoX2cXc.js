import{r as d,j as e,S as w,x as i,A as c}from"./app-b7vnQlZc.js";import{M as b}from"./MainLayout-CSlV7Py7.js";import{o as m,x as y,a as U,b as o,e as k,g as S,i as _,h as A,H as C,F,I as R}from"./index-DpA9ZXCS.js";import"./x-CdJq2FK8.js";import"./createLucideIcon-BGsZVnCF.js";import"./triangle-alert-CLRk3LfA.js";import"./check-KIJGV9m7.js";function T({users:t,roles:h,stats:l}){const[r,g]=d.useState(""),[n,p]=d.useState("all"),[L,u]=d.useState(null),j=t.data.filter(s=>{const a=s.name.toLowerCase().includes(r.toLowerCase())||s.email.toLowerCase().includes(r.toLowerCase()),v=n==="all"||s.roles.some(f=>f.slug===n);return a&&v}),N=s=>s?"text-green-600 bg-green-50":"text-red-600 bg-red-50",x=(s,a)=>{switch(s){case"edit":c.get(`/admin/users/${a}/edit`);break;case"deactivate":c.patch(`/admin/users/${a}/deactivate`);break;case"resend-invitation":c.post(`/admin/users/${a}/resend-invitation`);break}};return e.jsxs(b,{title:"User Management",children:[e.jsx(w,{title:"User Management"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage users, roles, and access permissions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(i,{href:"/admin/provider-invitations",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Provider Invitations"]}),e.jsxs(i,{href:"/admin/users/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-blue-700",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(U,{className:"h-6 w-6 text-gray-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Users"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:l.total_users})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(o,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Users"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:l.active_users})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(m,{className:"h-6 w-6 text-blue-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Invitations"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:l.pending_invitations})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(k,{className:"h-6 w-6 text-purple-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Recent Logins"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:l.recent_logins})]})})]})})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Users"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:r,onChange:s=>g(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{value:n,onChange:s=>p(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),h.map(s=>e.jsx("option",{value:s.slug,children:s.display_name},s.id))]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-sm",children:s.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.roles.map(a=>e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:a.display_name},a.id))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${N(s.is_active)}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.last_login?new Date(s.last_login).toLocaleDateString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>x("edit",s.id),className:"text-blue-600 hover:text-blue-900",title:"Edit User",children:e.jsx(_,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(s),className:"text-gray-600 hover:text-gray-900",title:"View Details",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x("deactivate",s.id),className:"text-red-600 hover:text-red-900",title:"Deactivate User",children:e.jsx(C,{className:"h-4 w-4"})})]})})]},s.id))})]})}),t.pagination.last_page>1&&e.jsx("div",{className:"px-6 py-3 border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",(t.pagination.current_page-1)*t.pagination.per_page+1," to"," ",Math.min(t.pagination.current_page*t.pagination.per_page,t.pagination.total)," of"," ",t.pagination.total," results"]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[e.jsxs(i,{href:"/access-requests",className:"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsx("div",{children:e.jsx("span",{className:"rounded-lg inline-flex p-3 bg-blue-50 text-blue-600 group-hover:bg-blue-100",children:e.jsx(o,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Access Requests"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Review and approve user access requests"})]})]}),e.jsxs(i,{href:"/rbac",className:"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsx("div",{children:e.jsx("span",{className:"rounded-lg inline-flex p-3 bg-purple-50 text-purple-600 group-hover:bg-purple-100",children:e.jsx(F,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Role Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Configure roles and permissions"})]})]}),e.jsxs(i,{href:"/subrep-approvals",className:"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsx("div",{children:e.jsx("span",{className:"rounded-lg inline-flex p-3 bg-green-50 text-green-600 group-hover:bg-green-100",children:e.jsx(R,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sub-Rep Approvals"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Approve pending sub-representative requests"})]})]})]})]})]})}export{T as default};
