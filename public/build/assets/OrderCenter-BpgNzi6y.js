import{r as x,j as e,S as I,A as j,R as L,x as w}from"./app-taSqzBVs.js";import{M as z,C as M}from"./MainLayout-Dw1zk4VW.js";import{E as $}from"./eye-DpkOvgCh.js";import{S as C}from"./shopping-cart-DHQkLuvm.js";import{C as k}from"./circle-check-big-DWcFwiCQ.js";import{T as V}from"./triangle-alert-BOyfSih_.js";import{C as R}from"./clock-DGAz1RbJ.js";import{S as E}from"./search-C3KyOaD2.js";import{C as H}from"./chevron-up-blr3L2zW.js";import{C as B}from"./chevron-down-Br5-Ogpl.js";import{c as U}from"./createLucideIcon-CJpMkWaB.js";import{D as N}from"./download-DKrEfAFe.js";import"./x-tQL0mm7-.js";import"./check-B1Sfkp9P.js";import"./index-BQkVVL-M.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=U("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),G=()=>{const[t,l]=x.useState("processing"),[S,v]=x.useState(!1),[d,c]=x.useState([]),[n,P]=x.useState([]),[y,T]=x.useState({totalOrders:0,pendingApproval:0,pendingDocuments:0,completedToday:0}),[m,r]=x.useState(1),[o,u]=x.useState({orderNumber:`ORD-${new Date().getTime()}`,doctorFacilityName:"",patientHash:"",dateOfService:new Date,creditTerms:"net60",sku:"",nationalAsp:0,pricePerSqCm:0,expectedReimbursement:0,graphType:"",productName:"",graphSize:"",units:1,qCode:"",paymentStatus:"pending"}),b=[{id:"processing",label:"Order Processing",icon:C,count:y.pendingApproval},{id:"documents",label:"Document Generation",icon:N,count:y.pendingDocuments},{id:"create",label:"Manual Order Creation",icon:$,count:null}],_=a=>{const p="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium";switch(a==null?void 0:a.toLowerCase()){case"approved":case"completed":case"fulfilled":return`${p} bg-green-100 text-green-800`;case"pending":case"processing":return`${p} bg-yellow-100 text-yellow-800`;case"rejected":case"cancelled":case"expired":case"overdue":return`${p} bg-red-100 text-red-800`;case"shipped":return`${p} bg-blue-100 text-blue-800`;default:return`${p} bg-gray-100 text-gray-800`}},A=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),D=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Order Processing & Approval"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Export"]})]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization / Facility"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[d.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"text-center py-8",children:[e.jsx(C,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Orders will appear here when they are submitted for processing."})]})}),d.map(a=>{var p;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{children:e.jsx(w,{href:`/admin/orders/${a.id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:a.order_number})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:((p=a.facility)==null?void 0:p.name)||""})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:_(a.status),children:a.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(a.total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap"})]},a.id)})]})]})})})]}),O=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Document Generation & Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"All Documents"}),e.jsx("option",{value:"InsuranceVerification",children:"Insurance Verification"}),e.jsx("option",{value:"OrderForm",children:"Order Form"}),e.jsx("option",{value:"OnboardingForm",children:"Onboarding Form"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Bulk Generate"]})]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order / Document"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Signer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"text-center py-8",children:[e.jsx(N,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No document submissions found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Document submissions will appear here when orders are processed."})]})})})]})})})]}),f=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Manual Order Creation"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Step ",m," of 3"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m===1&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-red-800 mb-6 flex items-center gap-2",children:[e.jsx(F,{className:"text-red-600"}),"Order Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Number"}),e.jsx("input",{type:"text",value:o.orderNumber,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor/Facility Name *"}),e.jsx("input",{type:"text",value:o.doctorFacilityName,onChange:a=>u({...o,doctorFacilityName:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Hash *"}),e.jsx("input",{type:"text",value:o.patientHash,onChange:a=>u({...o,patientHash:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Service *"}),e.jsx("input",{type:"date",value:o.dateOfService.toISOString().split("T")[0],onChange:a=>u({...o,dateOfService:new Date(a.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",required:!0})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between items-center",children:[e.jsx("button",{type:"button",onClick:()=>r(Math.max(m-1,1)),disabled:m===1,className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md ${m===1?"text-gray-400 cursor-not-allowed":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:"← Previous"}),m<3?e.jsx("button",{type:"button",onClick:()=>r(m+1),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Next →"}):e.jsx("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Create Order"})]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(C,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"ml-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),e.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:y.totalOrders})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{className:"ml-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Pending Approval"}),e.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:y.pendingApproval})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(N,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{className:"ml-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Pending Documents"}),e.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:y.pendingDocuments})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(k,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Completed Today"}),e.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:y.completedToday})]})]})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:b.map(a=>{const p=a.icon;return e.jsxs("button",{onClick:()=>l(a.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${t===a.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(p,{className:"w-4 h-4"}),a.label,a.count!==null&&a.count>0&&e.jsx("span",{className:"bg-red-100 text-red-600 py-0.5 px-2.5 rounded-full text-xs",children:a.count})]},a.id)})})}),e.jsxs("div",{className:"min-h-96",children:[t==="processing"&&D(),t==="documents"&&O(),t==="create"&&f()]})]})},W=({requests:t,filters:l,statusCounts:S,facilities:v,roleRestrictions:d})=>{const[c,n]=x.useState(new Set),[P,y]=x.useState(null),[T,m]=x.useState(!1),[r,o]=x.useState(null),[u,b]=x.useState(""),_={submitted:{color:"bg-blue-100 text-blue-800",icon:R,label:"Submitted",priority:1},processing:{color:"bg-yellow-100 text-yellow-800",icon:V,label:"Under Review",priority:2},approved:{color:"bg-green-100 text-green-800",icon:k,label:"Approved",priority:3},rejected:{color:"bg-red-100 text-red-800",icon:M,label:"Rejected",priority:4}},A=s=>s>=80?{color:"bg-red-100 text-red-800",label:"High"}:s>=60?{color:"bg-yellow-100 text-yellow-800",label:"Medium"}:{color:"bg-green-100 text-green-800",label:"Low"},D=s=>{const i=new Set(c);i.has(s)?i.delete(s):i.add(s),n(i),m(i.size>0)},O=()=>{t!=null&&t.data&&c.size===t.data.length?(n(new Set),m(!1)):t!=null&&t.data&&(n(new Set(t.data.map(s=>s.id))),m(!0))},f=s=>{c.size!==0&&j.post("/product-requests/review/bulk-action",{request_ids:Array.from(c),action:s,notes:u},{onSuccess:()=>{n(new Set),m(!1),b(""),j.reload({only:["requests","statusCounts"]})}})},a=(s,i)=>{let h="",g={};switch(i){case"approve":h=`/product-requests/review/${s}/approve`,g={comments:u,notify_provider:!0};break;case"reject":h=`/product-requests/review/${s}/reject`,g={reason:u,category:"other",notify_provider:!0};break;case"request_info":h=`/product-requests/review/${s}/request-info`,g={information_needed:u,notify_provider:!0};break}j.post(h,g,{onSuccess:()=>{o(null),b(""),j.reload({only:["requests","statusCounts"]})}})},p=s=>s==null?"$0.00":`$${(typeof s=="number"?s:parseFloat(s)||0).toFixed(2)}`;return!t||!t.data?e.jsx("div",{className:"p-4",children:"Loading request reviews or no requests found..."}):e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(S).map(([s,i])=>{const h=_[s];if(!h)return null;const g=h.icon;return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-md ${h.color}`,children:e.jsx(g,{className:"h-5 w-5"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i}),e.jsx("p",{className:"text-xs text-gray-500",children:h.label})]})]})},s)})})}),e.jsx("div",{className:"mb-6 bg-white rounded-lg border border-gray-200 p-4 shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search requests...",className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",defaultValue:l.search,onChange:s=>{j.get(window.location.pathname,{...l,search:s.target.value},{preserveState:!0,replace:!0,only:["requests"]})}})]}),e.jsxs("select",{className:"rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",defaultValue:l.status,onChange:s=>{j.get(window.location.pathname,{...l,status:s.target.value},{preserveState:!0,replace:!0,only:["requests"]})},children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"processing",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("select",{className:"rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",defaultValue:l.priority,onChange:s=>{j.get(window.location.pathname,{...l,priority:s.target.value},{preserveState:!0,replace:!0,only:["requests"]})},children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"medium",children:"Medium Priority"}),e.jsx("option",{value:"low",children:"Low Priority"})]}),e.jsxs("select",{className:"rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",defaultValue:l.facility,onChange:s=>{j.get(window.location.pathname,{...l,facility:s.target.value},{preserveState:!0,replace:!0,only:["requests"]})},children:[e.jsx("option",{value:"",children:"All Facilities"}),v.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{className:"rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",defaultValue:l.days_pending,onChange:s=>{j.get(window.location.pathname,{...l,days_pending:s.target.value},{preserveState:!0,replace:!0,only:["requests"]})},children:[e.jsx("option",{value:"",children:"All Timeframes"}),e.jsx("option",{value:"1",children:"Last 24 hours"}),e.jsx("option",{value:"3",children:"Last 3 days"}),e.jsx("option",{value:"7",children:"Last week"}),e.jsx("option",{value:"14",children:"Last 2 weeks"})]})]})}),T&&e.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[c.size," request",c.size!==1?"s":""," selected"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>f("approve"),className:"px-3 py-1.5 bg-green-600 text-white text-xs rounded-md hover:bg-green-700",children:"Approve Selected"}),e.jsx("button",{onClick:()=>f("request_info"),className:"px-3 py-1.5 bg-yellow-500 text-white text-xs rounded-md hover:bg-yellow-600",children:"Request Info"}),e.jsx("button",{onClick:()=>f("reject"),className:"px-3 py-1.5 bg-red-600 text-white text-xs rounded-md hover:bg-red-700",children:"Reject Selected"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:t.data.length>0&&c.size===t.data.length,onChange:O,className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Provider & Facility"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clinical Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority & Timeline"}),(d==null?void 0:d.can_view_financials)&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[t.data.map(s=>{const i=_[s.order_status]||{color:"bg-gray-100 text-gray-800",label:s.order_status||"Unknown"},h=A(s.priority_score),g=P===s.id;return e.jsxs(L.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-gray-50 ${c.has(s.id)?"bg-red-50":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:c.has(s.id),onChange:()=>D(s.id),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{href:`/product-requests/review/${s.id}`,className:"text-sm font-medium text-red-600 hover:text-red-700",children:s.request_number}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Patient: ",s.patient_display]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Wound: ",s.wound_type]}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${i.color}`,children:i.label})})]}),e.jsx("button",{onClick:()=>y(g?null:s.id),className:"text-gray-400 hover:text-gray-600 p-1",children:g?e.jsx(H,{className:"h-5 w-5"}):e.jsx(B,{className:"h-5 w-5"})})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Dr. ",s.provider.name]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.provider.npi_number&&`NPI: ${s.provider.npi_number}`}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.facility.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:[s.facility.city,", ",s.facility.state]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500",children:"MAC:"}),e.jsx("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full ${s.mac_validation_status==="passed"?"bg-green-100 text-green-800":s.mac_validation_status==="failed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:s.mac_validation_status||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Elig:"}),e.jsx("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full ${s.eligibility_status==="verified"||s.eligibility_status==="eligible"?"bg-green-100 text-green-800":s.eligibility_status==="not_eligible"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:s.eligibility_status||"N/A"})]}),s.pre_auth_required&&e.jsx("div",{className:"text-xs text-orange-600 font-semibold",children:"PA Required"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsxs("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${h.color}`,children:[h.label," Priority"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Submitted ",s.days_since_submission," days ago"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Service Date: ",new Date(s.expected_service_date).toLocaleDateString()]})]})}),(d==null?void 0:d.can_view_financials)&&e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p(s.total_order_value)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.products_count," product",s.products_count!==1?"s":""]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-1.5",children:[e.jsx(w,{href:`/product-requests/review/${s.id}`,className:"p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded-md",title:"View Details",children:e.jsx($,{className:"h-4 w-4"})}),s.order_status==="submitted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o({requestId:s.id,action:"approve"}),className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-100 rounded-md",title:"Approve",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o({requestId:s.id,action:"request_info"}),className:"p-1 text-yellow-500 hover:text-yellow-700 hover:bg-yellow-100 rounded-md",title:"Request Info",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o({requestId:s.id,action:"reject"}),className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-100 rounded-md",title:"Reject",children:e.jsx(M,{className:"h-4 w-4"})})]})]})})]}),g&&e.jsx("tr",{children:e.jsx("td",{colSpan:d!=null&&d.can_view_financials?7:6,className:"p-4 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-700 mb-1",children:"Clinical Summary"}),s.clinical_summary?e.jsxs("div",{className:"space-y-0.5 text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Diagnosis:"})," ",s.clinical_summary.diagnosis||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Wound Size:"})," ",s.clinical_summary.wound_dimensions||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",s.clinical_summary.wound_duration||"N/A"]})]}):e.jsx("p",{className:"text-gray-400 italic",children:"No clinical summary provided"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-700 mb-1",children:"Insurance & Dates"}),e.jsxs("div",{className:"space-y-0.5 text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Payer:"})," ",s.payer_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service Date:"})," ",new Date(s.expected_service_date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Submitted:"})," ",new Date(s.submitted_at).toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-700 mb-1",children:"Quick Actions"}),e.jsx("div",{className:"space-y-1.5 mt-2",children:e.jsx(w,{href:`/product-requests/review/${s.id}`,className:"block w-full px-3 py-1.5 text-xs bg-blue-600 text-white rounded-md hover:bg-blue-700 text-center shadow-sm",children:"View Full Details / Documents"})})]})]})})})]},s.id)}),t.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:d!=null&&d.can_view_financials?7:6,className:"px-6 py-12 text-center text-gray-500",children:"No product requests match your current filters."})})]})]})}),t.links&&t.data.length>0&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(t.current_page-1)*t.per_page+1}),"to ",e.jsx("span",{className:"font-medium",children:Math.min(t.current_page*t.per_page,t.total)}),"of ",e.jsx("span",{className:"font-medium",children:t.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:t.links.map((s,i)=>e.jsx(w,{href:s.url||"#",preserveScroll:!0,preserveState:!0,className:`relative inline-flex items-center px-3 py-1.5 border text-xs font-medium
                          ${s.active?"z-10 bg-red-50 border-red-500 text-red-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}
                          ${i===0?"rounded-l-md":""}
                          ${i===t.links.length-1?"rounded-r-md":""}
                          ${s.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:s.label}},i))})})]})})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:[r.action==="approve"&&"Approve Request",r.action==="reject"&&"Reject Request",r.action==="request_info"&&"Request Additional Information"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"reviewNotesArea",className:"block text-sm font-medium text-gray-700 mb-1.5",children:[r.action==="approve"&&"Approval Notes (Optional)",r.action==="reject"&&"Rejection Reason (Required)",r.action==="request_info"&&"Information Needed (Required)"]}),e.jsx("textarea",{id:"reviewNotesArea",value:u,onChange:s=>b(s.target.value),rows:4,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm",placeholder:r.action==="approve"?"Optional notes for approval...":r.action==="reject"?"Please specify the reason for rejection...":"Please specify what additional information is needed..."})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{o(null),b("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:()=>a(r.requestId,r.action),disabled:(r.action==="reject"||r.action==="request_info")&&!u.trim(),className:`px-4 py-2 text-sm font-medium text-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2
                    ${r.action==="approve"?"bg-green-600 hover:bg-green-700 focus:ring-green-500":r.action==="reject"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-yellow-500 hover:bg-yellow-600 focus:ring-yellow-400"}
                    disabled:opacity-60 disabled:cursor-not-allowed`,children:[r.action==="approve"&&"Confirm Approve",r.action==="reject"&&"Confirm Reject",r.action==="request_info"&&"Send Request"]})]})]})})})]})},ne=t=>{var c;const[l,S]=x.useState("requestReviews"),v=[{id:"requestReviews",name:"Request Reviews",icon:$,content:W},{id:"orderManagement",name:"Order Management",icon:C,content:G}],d=((c=v.find(n=>n.id===l))==null?void 0:c.content)||(()=>e.jsx("div",{className:"p-4",children:"Select a tab"}));return e.jsxs(z,{children:[e.jsx(I,{title:"Order Center"}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Center"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage product requests and active orders."})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:v.map(n=>e.jsxs("button",{onClick:()=>S(n.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                  ${l===n.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,"aria-current":l===n.id?"page":void 0,children:[e.jsx(n.icon,{className:`-ml-0.5 mr-1.5 h-5 w-5 ${l===n.id?"text-red-500":"text-gray-400 group-hover:text-gray-500"}`,"aria-hidden":"true"}),e.jsx("span",{children:n.name})]},n.id))})}),e.jsx("div",{children:e.jsx(d,{...t})})]})]})};export{ne as default};
