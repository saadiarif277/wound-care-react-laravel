import{u as F,r as f,j as e,S as A,A as E}from"./app-CkbwHOkf.js";import{M as C}from"./MainLayout-DIjIBnGe.js";import{g,c as O,T as P,aq as D}from"./index-R2fUhcwH.js";import{t as N,c as a}from"./glass-theme-CCnqi7lL.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./check-DXIgFk-v.js";function K({facilities:M=[],providers:R=[],products:z=[],woundTypes:L={},currentUser:x,prefillData:k}){let n="dark",l=N.dark;try{n=F().theme,l=N[n]}catch{}const[o,b]=f.useState(1),[p,h]=f.useState(!1),[y,m]=f.useState({}),[r,Q]=f.useState({...k,patient_first_name:"",patient_last_name:"",patient_dob:"",quantity:1,product_id:null,facility_id:null,payer_name:"",payer_id:"",expected_service_date:"",wound_type:"",failed_conservative_treatment:!1,information_accurate:!1,medical_necessity_established:!1,maintain_documentation:!1,authorize_prior_auth:!1,provider_npi:(x==null?void 0:x.npi)||"",is_patient_subscriber:!0}),_=[{number:1,title:"Patient Information",icon:"ðŸ“¸"},{number:2,title:"Product Selection",icon:"ðŸ“¦"},{number:3,title:"Documentation",icon:"ðŸ“„"},{number:4,title:"Confirmation",icon:"âœ…"}],v=()=>{const i=j(o);if(Object.keys(i).length>0){m(i);return}m({}),b(t=>Math.min(t+1,4))},w=()=>{b(i=>Math.max(i-1,1))},j=i=>{const t={};switch(i){case 1:r.patient_first_name||(t.patient_first_name="First name is required"),r.patient_last_name||(t.patient_last_name="Last name is required"),r.patient_dob||(t.patient_dob="Date of birth is required"),r.payer_name||(t.payer_name="Payer name is required"),r.expected_service_date||(t.expected_service_date="Expected service date is required"),r.facility_id||(t.facility_id="Facility selection is required"),r.wound_type||(t.wound_type="Wound type is required");break;case 2:r.product_id||(t.product_id="Product selection is required"),r.size||(t.size="Size is required"),r.manufacturer_fields;break;case 3:r.failed_conservative_treatment||(t.attestation="All clinical attestations must be confirmed"),r.information_accurate||(t.attestation="All clinical attestations must be confirmed"),r.medical_necessity_established||(t.attestation="All clinical attestations must be confirmed"),r.maintain_documentation||(t.attestation="All clinical attestations must be confirmed");break}return t},S=async()=>{const i=j(3);if(Object.keys(i).length>0){m(i);return}h(!0);try{const t=new FormData;Object.entries(r).forEach(([c,s])=>{s instanceof File?t.append(c,s):s!=null&&t.append(c,typeof s=="object"?JSON.stringify(s):String(s))}),E.post("/quick-requests",t,{onSuccess:()=>{},onError:c=>{console.error("Form submission errors:",c);const s={};typeof c=="object"&&c!==null&&Object.entries(c).forEach(([u,d])=>{Array.isArray(d)?s[u]=d[0]:typeof d=="string"&&(s[u]=d)}),m(s);const q=Object.entries(s).map(([u,d])=>`${u}: ${d}`).join(`
`);alert(`Form validation errors:

${q}`)}})}catch(t){console.error("Error submitting quick request:",t)}finally{h(!1)}};return e.jsxs(C,{children:[e.jsx(A,{title:"Quick Request"}),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:a("text-3xl font-bold",l.text.primary),children:"Quick Request"}),e.jsx("p",{className:a("mt-2",l.text.secondary),children:"Fast-track your product orders with our streamlined process"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:_.map((i,t)=>e.jsxs("div",{className:"flex-1 flex items-center",children:[e.jsx("div",{className:a("flex items-center justify-center w-10 h-10 rounded-full text-sm font-medium",o===i.number?"bg-gradient-to-r from-[#1925c3] to-[#c71719] text-white":o>i.number?"bg-green-500 text-white":n==="dark"?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-500"),children:o>i.number?e.jsx(g,{}):i.icon}),e.jsx("div",{className:"ml-2 flex-1",children:e.jsx("p",{className:a("text-sm font-medium",o===i.number?l.text.primary:l.text.secondary),children:i.title})}),t<_.length-1&&e.jsx("div",{className:a("flex-1 h-0.5 mx-4",o>i.number?"bg-green-500":n==="dark"?"bg-gray-700":"bg-gray-200")})]},i.number))})}),Object.keys(y).length>0&&e.jsx("div",{className:a("mb-4 p-4 rounded-lg",n==="dark"?"bg-red-900/20":"bg-red-50","border",n==="dark"?"border-red-800":"border-red-200"),children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(O,{className:a("w-5 h-5 mr-2 flex-shrink-0 mt-0.5",n==="dark"?"text-red-400":"text-red-600")}),e.jsxs("div",{children:[e.jsx("h4",{className:a("text-sm font-medium mb-1",n==="dark"?"text-red-300":"text-red-800"),children:"Please fix the following errors:"}),e.jsx("ul",{className:a("text-sm space-y-1",n==="dark"?"text-red-400":"text-red-700"),children:Object.entries(y).map(([i,t])=>e.jsxs("li",{children:["â€¢ ",t]},i))})]})]})}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsxs("button",{onClick:w,disabled:o===1,className:a("flex items-center px-6 py-3 rounded-lg font-medium transition-all",o===1?"opacity-50 cursor-not-allowed":"hover:shadow-lg",l.button.secondary.base),children:[e.jsx(P,{className:"mr-2"}),"Previous"]}),o<4?e.jsxs("button",{onClick:v,className:a("flex items-center px-6 py-3 rounded-lg font-medium transition-all hover:shadow-lg","bg-gradient-to-r from-[#1925c3] to-[#c71719] text-white"),children:["Next",e.jsx(D,{className:"ml-2"})]}):e.jsxs("button",{onClick:S,disabled:p,className:a("flex items-center px-6 py-3 rounded-lg font-medium transition-all",p?"opacity-50 cursor-not-allowed":"hover:shadow-lg","bg-gradient-to-r from-[#1925c3] to-[#c71719] text-white"),children:[p?"Submitting...":"Submit Order",e.jsx(g,{className:"ml-2"})]})]})]})})]})}export{K as default};
