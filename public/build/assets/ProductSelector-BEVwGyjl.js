import{r as i,j as e}from"./app-taSqzBVs.js";import{P as Y}from"./PricingDisplay-DjaHDh0i.js";import{F as pe}from"./filter-rlwyksCG.js";import{S as fe}from"./search-C3KyOaD2.js";import{c as T}from"./createLucideIcon-CJpMkWaB.js";import{C as ge}from"./clock-DGAz1RbJ.js";import{C as Z}from"./circle-alert-bbAHQg3k.js";import{I}from"./info-iZYwc2zJ.js";import{C as G}from"./circle-check-big-DWcFwiCQ.js";import{X as W}from"./x-tQL0mm7-.js";import{S as be}from"./shopping-cart-DHQkLuvm.js";import{P as je}from"./package-D_7tl1nz.js";import{P as ye}from"./plus-DnTY2fSz.js";import{T as Ne}from"./trending-up-D-MxD9_4.js";import{T as J}from"./tag-DLVHPd2q.js";import{B as ve}from"./building-D2y99HfC.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=T("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=T("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=T("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Ve=({selectedProducts:t,onProductsChange:f,showCart:y=!0,recommendationContext:x,productRequestId:o,userRole:N="provider",roleRestrictions:p,className:b="",title:v="Product Catalog Selection",description:j="Choose products from our comprehensive catalog"})=>{const u=(()=>{if(p)return p;switch(N){case"office-manager":return{can_view_financials:!1,can_see_discounts:!1,can_see_msc_pricing:!1,can_see_order_totals:!1,pricing_access_level:"national_asp_only"};case"msc_subrep":return{can_view_financials:!1,can_see_discounts:!1,can_see_msc_pricing:!1,can_see_order_totals:!1,pricing_access_level:"limited"};case"provider":case"msc-rep":case"msc-admin":case"superadmin":default:return{can_view_financials:!0,can_see_discounts:!0,can_see_msc_pricing:!0,can_see_order_totals:!0,pricing_access_level:"full"}}})(),[g,P]=i.useState([]),[_,w]=i.useState([]),[c,S]=i.useState(""),[z,U]=i.useState(""),[k,E]=i.useState(""),[ee,se]=i.useState(!0),[te,ae]=i.useState([]),[re,le]=i.useState([]),[Q,ne]=i.useState(!1),[q,M]=i.useState([]),[L,B]=i.useState(!1),[R,D]=i.useState(null),[ce,ze]=i.useState(!0),[n,V]=i.useState(null),[ie,$]=i.useState(!1),de=()=>{if(t.length===0)return null;const s=t[0];return s.product||g.find(a=>a.id===s.product_id)||null};i.useEffect(()=>{const s=de();V(s),$(s!==null)},[t,g]),i.useEffect(()=>{oe()},[]),i.useEffect(()=>{o&&me()},[o]),i.useEffect(()=>{let s=g;c&&(s=s.filter(a=>a.name.toLowerCase().includes(c.toLowerCase())||a.q_code.toLowerCase().includes(c.toLowerCase())||a.manufacturer.toLowerCase().includes(c.toLowerCase())||a.sku.toLowerCase().includes(c.toLowerCase()))),z&&(s=s.filter(a=>a.category===z)),k&&(s=s.filter(a=>a.manufacturer===k)),w(s)},[g,c,z,k]);const oe=async()=>{try{const r=(await(await fetch("/api/products/search")).json()).products||[];P(r),w(r);const d=[...new Set(r.map(h=>h.category))],l=[...new Set(r.map(h=>h.manufacturer))];ae(d),le(l)}catch(s){console.error("Error fetching products:",s)}finally{se(!1)}},me=async()=>{if(o){B(!0),D(null);try{const a=await(await fetch(`/api/product-requests/${o}/recommendations`)).json();a.recommendations?M(a.recommendations):M([])}catch(s){console.error("Error fetching AI recommendations:",s),D("Failed to load AI recommendations"),M([])}finally{B(!1)}}},F=(s,a=1,r)=>{if(t.length>0&&t[0].product_id!==s.id)f([{product_id:s.id,quantity:a,size:r,product:s}]);else{const d=t.findIndex(l=>l.product_id===s.id&&l.size===r);if(d>=0){const l=[...t];l[d]={...l[d],quantity:l[d].quantity+a},f(l)}else f([...t,{product_id:s.id,quantity:a,size:r,product:s}])}},xe=(s,a=1)=>{var l;const r=g.find(h=>h.id===s.product_id);if(!r)return;const d=(l=s.suggested_size)==null?void 0:l.toString();F(r,a,d)},K=(s,a,r)=>{if(r<=0){H(s,a);return}const d=t.map(l=>l.product_id===s&&l.size===a?{...l,quantity:r}:l);f(d)},H=(s,a)=>{const r=t.filter(d=>!(d.product_id===s&&d.size===a));f(r)},ue=()=>{f([]),V(null),$(!1)},he=()=>t.reduce((s,a)=>{const r=a.product||g.find(h=>h.id===a.product_id);if(!r)return s;const d=u.can_see_msc_pricing&&r.msc_price||r.price_per_sq_cm;let l=d;if(a.size){const h=parseFloat(a.size);isNaN(h)||(l=d*h)}return s+l*a.quantity},0),O=()=>{if(!x)return[];const s=["Skin Substitute","Wound Care","Dressing"];return g.filter(a=>s.includes(a.category))},C=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return ee?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading product catalog..."})]}):e.jsxs("div",{className:`space-y-6 ${b}`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j," ",x&&`(Optimized for ${x})`]}),N==="provider"&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Showing only products you are onboarded with"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[_.length," products available"]}),e.jsxs("button",{onClick:()=>ne(!Q),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Filters"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name, Q-code, manufacturer, or SKU...",value:c,onChange:s=>S(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),Q&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:z,onChange:s=>U(s.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),te.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsxs("select",{value:k,onChange:s=>E(s.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Manufacturers"}),re.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})]}),o&&ce&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Se,{className:"w-5 h-5 mr-2 text-purple-600"}),"AI-Powered Clinical Recommendations"]}),L&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ge,{className:"w-4 h-4 mr-1 animate-spin"}),"Analyzing..."]})]}),R&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md flex items-center",children:[e.jsx(Z,{className:"w-4 h-4 mr-2 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-800",children:R})]}),!L&&q.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Based on clinical analysis of wound characteristics, patient factors, and evidence-based protocols."}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:q.slice(0,4).map((s,a)=>e.jsx(Ce,{recommendation:s,onAdd:xe,rank:a+1,roleRestrictions:u,isDisabled:n!==null&&n.id!==s.product_id},`ai-rec-${s.product_id}-${a}`))})]}),!L&&q.length===0&&!R&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(I,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No AI recommendations available for this request."})]})]}),x&&!o&&O().length>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-green-900 mb-3 flex items-center",children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Recommended for ",x]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O().slice(0,6).map(s=>e.jsx(X,{product:s,onAdd:F,isRecommended:!0,roleRestrictions:u,isDisabled:n!==null&&n.id!==s.id,canAddMoreSizes:n!==null&&n.id===s.id},`rec-${s.id}`))})]}),e.jsxs("div",{className:`grid gap-6 ${y?"grid-cols-1 lg:grid-cols-3":"grid-cols-1"}`,children:[e.jsxs("div",{className:y?"lg:col-span-2":"col-span-1",children:[n?e.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-blue-900",children:["Selected: ",n.name]}),e.jsxs("p",{className:"text-xs text-blue-700",children:["Q",n.q_code," • ",n.manufacturer]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>$(!ie),className:"inline-flex items-center px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200",children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),"Manage Sizes"]}),e.jsxs("button",{onClick:ue,className:"inline-flex items-center px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Change Product"]})]})]})}):e.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-2 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-800",children:"Select one product type. You can then add multiple sizes and quantities for that product."})]}),e.jsx("div",{className:"space-y-4",children:_.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"No products found matching your criteria."}),e.jsx("button",{onClick:()=>{S(""),U(""),E("")},className:"mt-2 text-blue-600 hover:text-blue-800",children:"Clear filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map(s=>e.jsx(X,{product:s,onAdd:F,roleRestrictions:u,isDisabled:n!==null&&n.id!==s.id,canAddMoreSizes:n!==null&&n.id===s.id,isSelected:(n==null?void 0:n.id)===s.id},s.id))})})]}),y&&e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sticky top-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),n?"Product Details":"Selected Product"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," ",t.length===1?"size/qty":"sizes/qtys"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(je,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"No product selected yet"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Select one product type - you can add multiple sizes and quantities"})]}):e.jsxs("div",{className:"space-y-3",children:[n&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-md mb-4",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-900 mb-1",children:n.name}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxs("p",{children:["Q",n.q_code," • ",n.sku]}),e.jsx("p",{children:n.manufacturer}),e.jsx("p",{className:"text-blue-600",children:n.category})]})]}),t.map((s,a)=>{const r=s.product||g.find(A=>A.id===s.product_id);if(!r)return null;const d=u.can_see_msc_pricing&&r.msc_price||r.price_per_sq_cm;let l=d;if(s.size){const A=parseFloat(s.size);isNaN(A)||(l=d*A)}const h=l*s.quantity;return e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"flex-1",children:s.size?e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-900",children:["Size: ",s.size," cm²"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[C(l)," per unit"]})]}):e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900",children:"Standard Size"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[C(l)," per unit"]})]})}),e.jsx("button",{onClick:()=>H(s.product_id,s.size),className:"text-red-500 hover:text-red-700",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>K(s.product_id,s.size,s.quantity-1),className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(_e,{className:"w-3 h-3"})}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:s.quantity}),e.jsx("button",{onClick:()=>K(s.product_id,s.size,s.quantity+1),className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(ye,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C(h)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.quantity," × ",C(l)]})]})]})]},`${s.product_id}-${s.size||"no-size"}`)}),e.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base font-semibold text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:C(he())})]}),!u.can_see_msc_pricing&&e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"* Pricing shown is National ASP only"})]})]})]})})]})]})},X=({product:t,onAdd:f,isRecommended:y=!1,roleRestrictions:x,isDisabled:o=!1,canAddMoreSizes:N=!1,isSelected:p=!1})=>{var _,w;const[b,v]=i.useState(""),[j,m]=i.useState(1),u=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c),g=()=>{f(t,j,b||void 0),m(1),v("")},P=()=>{const c=x.can_see_msc_pricing&&t.msc_price||t.price_per_sq_cm;if(b){const S=parseFloat(b);return isNaN(S)?c*j:c*S*j}return c*j};return e.jsxs("div",{className:`border rounded-lg p-4 hover:shadow-md transition-shadow ${p?"border-blue-500 bg-blue-50":y?"border-green-200 bg-green-50":"border-gray-200 bg-white"} ${o?"opacity-50":""}`,children:[p&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Currently Selected"})}),y&&!p&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Recommended"})}),e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 line-clamp-2 mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 mb-1",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsxs("span",{children:["Q",t.q_code]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.sku})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:t.manufacturer})]})]})}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(Y,{roleRestrictions:x,product:{nationalAsp:t.price_per_sq_cm,mscPrice:t.msc_price},showLabel:!0,className:"text-xs"}),x.can_view_financials&&t.commission_rate&&e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Commission:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[t.commission_rate,"%"]})]})]}),((_=t.available_sizes)==null?void 0:_.length)>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Size (cm²)"}),e.jsxs("select",{value:b,onChange:c=>v(c.target.value),className:"w-full text-xs border border-gray-300 rounded-md py-1 px-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[e.jsx("option",{value:"",children:"Select size..."}),t.available_sizes.map(c=>e.jsxs("option",{value:c.toString(),children:[c," cm² - ",u((x.can_see_msc_pricing&&t.msc_price||t.price_per_sq_cm)*c)]},c))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:j,onChange:c=>m(Math.max(1,parseInt(c.target.value)||1)),className:"w-full text-xs border border-gray-300 rounded-md py-1 px-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),e.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded text-center",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["Total: ",u(P())]})}),e.jsx("button",{onClick:g,disabled:((w=t.available_sizes)==null?void 0:w.length)>0&&!b||o,className:"w-full text-sm font-medium py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed bg-blue-600 text-white hover:bg-blue-700",children:o?"Different Product Selected":p?"Add Another Size":"Select This Product"})]})},Ce=({recommendation:t,onAdd:f,rank:y,roleRestrictions:x,isDisabled:o=!1})=>{const[N,p]=i.useState(1),b=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m),v=m=>m>=.8?"text-green-600 bg-green-50":m>=.6?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",j=()=>{f(t,N),p(1)};return e.jsxs("div",{className:`border border-blue-200 rounded-lg p-4 bg-white hover:shadow-md transition-all duration-200 ${o?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-600 text-white text-xs font-bold rounded-full",children:y}),e.jsxs("div",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(t.confidence_score)}`,children:[Math.round(t.confidence_score*100),"% confidence"]})]}),e.jsx(Ne,{className:"w-4 h-4 text-blue-600"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:t.product_name}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 mb-1",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsxs("span",{children:["Q",t.q_code]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.manufacturer})]}),e.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:t.category})]}),e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-md",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-1",children:"Clinical Rationale:"}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-3",children:t.reasoning})]}),t.key_benefits&&t.key_benefits.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-1",children:"Key Benefits:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.key_benefits.slice(0,3).map((m,u)=>e.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-green-100 text-green-700 rounded",children:m},u))})]}),e.jsxs("div",{className:"mb-3 space-y-1",children:[e.jsx("div",{className:"text-xs",children:e.jsx(Y,{roleRestrictions:x,product:{nationalAsp:t.estimated_cost.national_asp,mscPrice:t.estimated_cost.msc_price},showLabel:!0,className:"text-xs"})}),x.can_see_discounts&&t.estimated_cost.savings&&t.estimated_cost.savings>0&&e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Savings vs ASP:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[b(t.estimated_cost.savings),"(",t.estimated_cost.savings_percentage,"%)"]})]}),t.suggested_size&&e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Suggested Size:"}),e.jsxs("span",{className:"font-medium text-purple-600",children:[t.suggested_size," cm²"]})]})]}),t.contraindications&&t.contraindications.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Z,{className:"w-3 h-3 mr-1 text-red-600"}),e.jsx("h4",{className:"text-xs font-medium text-red-700",children:"Contraindications:"})]}),e.jsx("ul",{className:"text-xs text-red-600 space-y-1",children:t.contraindications.slice(0,2).map((m,u)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-1",children:"•"}),e.jsx("span",{children:m})]},u))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:N,onChange:m=>p(Math.max(1,parseInt(m.target.value)||1)),className:"w-full text-xs border border-gray-300 rounded-md py-1 px-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),e.jsx("button",{onClick:j,disabled:o,className:`w-full text-sm font-medium py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 ${o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),o?"Different Product Selected":"Add Recommended Product"]})})]})};export{Ve as P};
