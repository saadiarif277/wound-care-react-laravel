import{r as n,j as t,S as te,A as se}from"./app-CkbwHOkf.js";import{M as ie}from"./MainLayout-DIjIBnGe.js";import de from"./PatientInsuranceSection-CLeU8OWm.js";import ce from"./ProductSection-Puw9Ku87.js";import{I as me,O as pe}from"./IVRDocumentSection-r0KY9anU.js";import le from"./ClinicalSection-BP4srsuD.js";import ue from"./ProviderSection-c5hESdVb.js";import _e from"./AdditionalDocumentsSection-BKwFPMC0.js";import{A as fe}from"./arrow-left-CnUTEFlg.js";import"./glass-theme-CCnqi7lL.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./check-DXIgFk-v.js";import"./index-R2fUhcwH.js";import"./SectionCard-DXpRq2Tu.js";import"./card-I35nyvuT.js";import"./utils-J8bI0sT-.js";import"./clsx-B-dksMZM.js";import"./collapsible-BfCXG3XD.js";import"./index-DdQWWdLt.js";import"./index-DW48STyt.js";import"./index-CD7V_8Mq.js";import"./index-De90F09_.js";import"./index-BsB1_LdS.js";import"./index-COQ4n3Z8.js";import"./index-BrKfa2YN.js";import"./index-CHViK9kl.js";import"./index-CHrZSOeV.js";import"./chevron-up-CAFyUi5R.js";import"./chevron-down-BQSbFUOw.js";import"./InfoRow-Cw2QKNb8.js";import"./user-CeKBNj6z.js";import"./calendar-CU3MSIjO.js";import"./phone-Cep3yv4K.js";import"./mail-BWwpRcgy.js";import"./map-pin-DGRcBcWO.js";import"./credit-card-DRvf_b2i.js";import"./package-C3D73aJ6.js";import"./truck-Bx0mry60.js";import"./Button-BFsoRR4y.js";import"./StatusUpdateModal-CDBCQPSg.js";import"./clock-BCNbb55_.js";import"./circle-alert-D5RtSiPV.js";import"./circle-check-big-BZwOB0cM.js";import"./loader-circle-CzGXBM_P.js";import"./eye-2c1yoxJs.js";import"./download-Dw1sq69C.js";import"./file-text-3MfHY30h.js";import"./Button-2TyLRw72.js";import"./index-Dp3B9jqt.js";import"./DocusealEmbed-DHc16Xlt.js";import"./index.esm-DpsOu67m.js";import"./card-mI4OQcp1.js";import"./index-DNM8Gtkt.js";import"./api-CXAezOed.js";import"./chevron-right-BB6IVksD.js";import"./upload-D34_G3qK.js";import"./trash-2-N2vmfG2C.js";import"./send-Cwgt1rCK.js";import"./heart-DxydAzba.js";import"./shield-DtxW4kzs.js";import"./file-BrP07e8W.js";const Ir=({request:r,roleRestrictions:ve={can_view_financials:!0,can_see_discounts:!0,can_see_msc_pricing:!0,can_see_order_totals:!0,can_see_commission:!1,pricing_access_level:"full",commission_access_level:"none"}})=>{var d,c,m,p,l,u,_,f,v,y,x,g,b,h,N,j,D,S,w,P,I,R,A,O,T,U,F,C,k,M,L,B,E,V,$,z,G,H,J,K,Q,W,X,Y,Z,q,ee;const[a,ae]=n.useState({patient:!0,product:!0,ivrDocument:!0,clinical:!0,provider:!0,documents:!0}),[ye,xe]=n.useState(null),[oe,s]=n.useState(!1),ne=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",o=i=>{ae(re=>({...re,[i]:!re[i]}))},e={id:r.id,order_number:r.request_number,patient_name:r.patient_display,patient_display_id:r.patient_fhir_id,provider_name:((d=r.provider)==null?void 0:d.name)||"Unknown Provider",facility_name:((c=r.facility)==null?void 0:c.name)||"Unknown Facility",manufacturer_name:((m=r.product)==null?void 0:m.manufacturer)||"Unknown Manufacturer",product_name:((p=r.product)==null?void 0:p.name)||"Unknown Product",order_status:r.order_status,ivr_status:r.ivr_status||"pending",order_form_status:r.order_form_status||"pending",total_order_value:r.total_amount||0,created_at:r.created_at,episode_id:r.episode_id,docuseal_submission_id:r.docuseal_submission_id,ivr_document_url:r.ivr_document_url,place_of_service:r.place_of_service,place_of_service_display:r.place_of_service_display,wound_type:r.wound_type,wound_type_display:r.wound_type_display,expected_service_date:r.expected_service_date,documents:r.documents||[],patient:r.patient||{name:r.patient_display,firstName:((l=r.patient_display)==null?void 0:l.split(" ")[0])||"",lastName:((u=r.patient_display)==null?void 0:u.split(" ").slice(1).join(" "))||"",dob:"",gender:"",phone:"",email:"",address:"",memberId:"",displayId:r.patient_fhir_id,isSubscriber:!0},insurance:r.insurance||{primary:{name:r.payer_name,planType:""},secondary:{name:"",planType:""}},product:r.product||{name:r.product_name||"Unknown Product",code:((f=(_=r.products)==null?void 0:_[0])==null?void 0:f.q_code)||"",quantity:((y=(v=r.products)==null?void 0:v[0])==null?void 0:y.quantity)||1,size:((g=(x=r.products)==null?void 0:x[0])==null?void 0:g.size)||"",category:"",manufacturer:r.manufacturer_name||"",manufacturerId:void 0,selectedProducts:((b=r.products)==null?void 0:b.map(i=>({product_id:i.id,quantity:i.quantity})))||[],shippingInfo:{speed:"standard",instructions:""}},clinical:r.clinical||{woundType:r.wound_type,woundLocation:"",size:"",depth:"",diagnosisCodes:[],primaryDiagnosis:"",clinicalNotes:"",failedConservativeTreatment:!1},provider:r.provider||{id:void 0,name:"Unknown Provider",npi:"",email:""},facility:r.facility||{id:void 0,name:"Unknown Facility",address:"",phone:""},clinical_summary:r.clinical_summary};return console.log("ProductRequestShow Debug:",{request:r,hasPatient:!!e.patient,patientName:(h=e.patient)==null?void 0:h.name,hasInsurance:!!e.insurance,hasClinical:!!e.clinical,hasProduct:!!e.product}),!e.patient||!e.insurance||!e.clinical||!e.product?t.jsxs(ie,{children:[t.jsx(te,{title:"Product Request Details - Error"}),t.jsx("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Error Loading Product Request Details"}),t.jsx("p",{className:"text-red-700",children:"The product request data could not be loaded. Please try refreshing the page or contact support."}),t.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Refresh Page"})]})})]}):t.jsxs(ie,{children:[t.jsx(te,{title:`Product Request Details - ${r.request_number}`}),t.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("button",{onClick:()=>se.get("/product-requests"),className:"p-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:t.jsx(fe,{className:"h-4 w-4"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Product Request Details"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ${e.ivr_status==="verified"?"text-green-600 bg-green-100":e.ivr_status==="sent"?"text-blue-600 bg-blue-100":e.ivr_status==="rejected"?"text-red-600 bg-red-100":"text-yellow-600 bg-yellow-100"}`,children:["IVR: ",e.ivr_status]}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ${e.order_form_status==="confirmed_by_manufacturer"?"text-green-600 bg-green-100":e.order_form_status==="submitted_to_manufacturer"?"text-blue-600 bg-blue-100":e.order_form_status==="rejected"?"text-red-600 bg-red-100":"text-yellow-600 bg-yellow-100"}`,children:["Order: ",e.order_form_status]})]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[t.jsxs("span",{children:["Request #",r.request_number]}),t.jsx("span",{children:"•"}),t.jsxs("span",{children:["Created ",ne(r.created_at)]}),t.jsx("span",{children:"•"}),t.jsxs("span",{children:["By ",e.provider_name]})]})]})]}),t.jsx(de,{orderData:{orderNumber:e.order_number,createdDate:e.created_at,createdBy:e.provider_name,patient:{...e.patient,dob:((N=e.patient)==null?void 0:N.dob)||"N/A",gender:((j=e.patient)==null?void 0:j.gender)||"N/A",phone:((D=e.patient)==null?void 0:D.phone)||"N/A",address:((S=e.patient)==null?void 0:S.address)||"N/A",insurance:{primary:((P=(w=e.insurance)==null?void 0:w.primary)==null?void 0:P.name)||"N/A",secondary:((R=(I=e.insurance)==null?void 0:I.secondary)==null?void 0:R.name)||"N/A"}},insurance:{primary:((O=(A=e.insurance)==null?void 0:A.primary)==null?void 0:O.name)||"N/A",secondary:((U=(T=e.insurance)==null?void 0:T.secondary)==null?void 0:U.name)||"N/A",primaryPlanType:(C=(F=e.insurance)==null?void 0:F.primary)==null?void 0:C.planType,secondaryPlanType:(M=(k=e.insurance)==null?void 0:k.secondary)==null?void 0:M.planType},product:e.product,forms:{ivrStatus:e.ivr_status,orderFormStatus:e.order_form_status},clinical:e.clinical,provider:e.provider,submission:{documents:e.documents}},isOpen:a.patient,onToggle:()=>o("patient")}),t.jsx(ce,{orderData:{orderNumber:e.order_number,createdDate:e.created_at,createdBy:e.provider_name,patient:e.patient,product:{...e.product,shippingInfo:{speed:((B=(L=e.product)==null?void 0:L.shippingInfo)==null?void 0:B.speed)||"standard",address:((E=e.facility)==null?void 0:E.address)||"N/A"}},orderPreferences:{expectedServiceDate:e.expected_service_date,shippingSpeed:($=(V=e.product)==null?void 0:V.shippingInfo)==null?void 0:$.speed,placeOfService:e.place_of_service_display,deliveryInstructions:(G=(z=e.product)==null?void 0:z.shippingInfo)==null?void 0:G.instructions},forms:{ivrStatus:e.ivr_status,orderFormStatus:e.order_form_status},clinical:e.clinical,provider:e.provider,submission:{documents:e.documents},total_amount:e.total_order_value},userRole:"Provider",isOpen:a.product,onToggle:()=>o("product")}),t.jsx(me,{ivrData:{status:e.ivr_status,sentDate:e.created_at,resultsReceivedDate:"",verifiedDate:"",notes:"",resultsFileUrl:"",files:e.documents||[],ivrDocumentUrl:e.ivr_document_url,docusealSubmissionId:e.docuseal_submission_id},orderFormData:{status:e.order_form_status,submissionDate:e.created_at,reviewDate:"",approvalDate:"",notes:"",fileUrl:"",files:e.documents||[]},orderId:e.id,onUpdateIVRStatus:async()=>{},onUploadIVRResults:()=>{},onUpdateOrderFormStatus:async()=>{},isOpen:a.ivrDocument,onToggle:()=>o("ivrDocument"),userRole:"Provider",orderData:{order_number:e.order_number,manufacturer_name:e.manufacturer_name,manufacturer_id:(H=e.product)==null?void 0:H.manufacturerId,patient_name:e.patient_name,patient_email:(J=e.patient)==null?void 0:J.email,integration_email:"integration@mscwoundcare.com",episode_id:e.episode_id?parseInt(e.episode_id):void 0,product_id:(W=(Q=(K=e.product)==null?void 0:K.selectedProducts)==null?void 0:Q[0])==null?void 0:W.product_id,clinical_summary:e.clinical_summary}}),t.jsx(le,{orderData:{orderNumber:e.order_number,createdDate:e.created_at,createdBy:e.provider_name,patient:e.patient,product:e.product,forms:{ivrStatus:e.ivr_status,orderFormStatus:e.order_form_status},clinical:{...e.clinical,location:((X=e.clinical)==null?void 0:X.woundLocation)||"N/A",cptCodes:"N/A",placeOfService:e.place_of_service_display||"N/A",serviceDate:e.expected_service_date,failedConservativeTreatment:((Y=e.clinical)==null?void 0:Y.failedConservativeTreatment)||!1},provider:e.provider,submission:{documents:e.documents}},isOpen:a.clinical,onToggle:()=>o("clinical")}),t.jsx(ue,{orderData:{orderNumber:e.order_number,createdDate:e.created_at,createdBy:e.provider_name,patient:e.patient,product:e.product,forms:{ivrStatus:e.ivr_status,orderFormStatus:e.order_form_status},clinical:e.clinical,provider:e.provider,facility:e.facility,submission:{documents:e.documents}},isOpen:a.provider,onToggle:()=>o("provider")}),t.jsx(_e,{documents:e.documents||[],isOpen:a.documents,onToggle:()=>o("documents")}),t.jsx(pe,{isOpen:oe,onClose:()=>s(!1),orderId:e.id.toString(),orderData:{id:e.id.toString(),order_number:e.order_number||`Request #${r.request_number}`,manufacturer_name:e.manufacturer_name,manufacturer_id:((Z=e.product)==null?void 0:Z.manufacturerId)||1,patient_name:e.patient_name||((q=e.patient)==null?void 0:q.name),patient_email:((ee=e.patient)==null?void 0:ee.email)||"patient@example.com",integration_email:"integration@mscwoundcare.com",episode_id:e.episode_id?parseInt(e.episode_id):void 0,ivr_status:e.ivr_status,order_form_status:e.order_form_status,docuseal_submission_id:e.docuseal_submission_id,order_form_submission_id:""},onOrderFormComplete:i=>{console.log("Order form completed:",i),s(!1)}})]})]})};export{Ir as default};
