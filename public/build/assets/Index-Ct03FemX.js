import{r as u,G as F,j as e,S as M,A as h}from"./app-CkbwHOkf.js";import{M as R}from"./MainLayout-DIjIBnGe.js";import{B as c}from"./Button-BFsoRR4y.js";import{C as p,b as A,c as _,a as g}from"./card-mI4OQcp1.js";import{B}from"./badge-ATX-lA6w.js";import{g as z,h as D,c as E,i as j,j as b,k as T,l as U,m as $,d as O,f as L,n as q}from"./index-R2fUhcwH.js";import"./glass-theme-CCnqi7lL.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./check-DXIgFk-v.js";function se({auth:G,invitations:m,flash:t}){const[f,n]=u.useState(!1),[y,a]=u.useState(!1),{data:l,setData:d,post:N,processing:o,errors:r,reset:v}=F({email:"",role:"",organization_id:"",message:""}),x=[{value:"provider",label:"Provider"},{value:"office-manager",label:"Office Manager"},{value:"msc-rep",label:"MSC Rep"},{value:"msc-subrep",label:"MSC Sub-Rep"},{value:"msc-admin",label:"MSC Admin"}],w=s=>{const i={pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",expired:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i[s]||i.pending}`},C=()=>{N("/admin/invitations",{onSuccess:()=>{v(),n(!1),a(!0),setTimeout(()=>a(!1),5e3)},onError:s=>{console.error("Invitation error:",s)}})},S=s=>{h.post(`/admin/invitations/${s}/resend`,{},{onSuccess:()=>{a(!0),setTimeout(()=>a(!1),5e3)}})},k=s=>{confirm("Are you sure you want to cancel this invitation?")&&h.delete(`/admin/invitations/${s}`,{onSuccess:()=>{a(!0),setTimeout(()=>a(!1),5e3)}})};return e.jsxs(R,{title:"User Invitations",children:[e.jsx(M,{title:"User Invitations"}),(y||(t==null?void 0:t.success))&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-5 h-5 text-green-600 mr-3"}),e.jsx("p",{className:"text-green-800 font-medium",children:(t==null?void 0:t.success)||"Operation completed successfully!"}),e.jsx("button",{onClick:()=>a(!1),title:"Close",className:"ml-auto text-green-600 hover:text-green-800",children:e.jsx(D,{className:"w-4 h-4"})})]})}),(t==null?void 0:t.error)&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"w-5 h-5 text-red-600 mr-3"}),e.jsx("p",{className:"text-red-800 font-medium",children:t.error})]})}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Invitations"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Send and manage invitations for new users across all roles"})]}),e.jsxs(c,{onClick:()=>n(!0),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})]}),f&&e.jsxs(p,{className:"mb-6",children:[e.jsx(A,{children:e.jsx(_,{children:"Send New Invitation"})}),e.jsxs(g,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:l.email,onChange:s=>d("email",s.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 transition-colors ${r.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"user@example.com",required:!0}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs("select",{id:"role",title:"Role",value:l.role,onChange:s=>d("role",s.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 transition-colors ${r.role?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select role"}),x.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),r.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.role})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Message (Optional)"}),e.jsx("textarea",{value:l.message,onChange:s=>d("message",s.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",placeholder:"Add a personal message to the invitation..."})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(c,{variant:"secondary",onClick:()=>n(!1),disabled:o,children:"Cancel"}),e.jsxs(c,{variant:"primary",onClick:C,disabled:o||!l.email||!l.role,isLoading:o,children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})]})]})]}),e.jsx(p,{children:e.jsx(g,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sent Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(b,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No invitations yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by sending your first invitation."}),e.jsxs(c,{variant:"primary",onClick:()=>n(!0),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Send First Invitation"]})]})})}):m.data.map(s=>{var i;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-5 h-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.email}),s.invited_by&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Invited by ",s.invited_by.first_name," ",s.invited_by.last_name]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(B,{variant:"outline",children:((i=x.find(I=>I.value===s.role))==null?void 0:i.label)||s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.organization?e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.organization.name})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:w(s.status),children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[(s.status==="pending"||s.status==="sent")&&e.jsx("button",{onClick:()=>S(s.id),className:"inline-flex items-center justify-center w-8 h-8 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-md transition-colors",title:"Resend Invitation",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx("button",{className:"inline-flex items-center justify-center w-8 h-8 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors",title:"View Details",onClick:()=>{alert("View details functionality coming soon!")},children:e.jsx(L,{className:"w-4 h-4"})}),s.status!=="accepted"&&e.jsx("button",{onClick:()=>k(s.id),className:"inline-flex items-center justify-center w-8 h-8 text-red-600 hover:text-red-900 hover:bg-red-50 rounded-md transition-colors",title:"Cancel Invitation",children:e.jsx(q,{className:"w-4 h-4"})})]})})]},s.id)})})]})})})})]})}export{se as default};
