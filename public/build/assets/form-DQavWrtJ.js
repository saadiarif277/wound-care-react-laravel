import{R as i,r as f,j as y}from"./app-CkbwHOkf.js";import{S as T}from"./index-COQ4n3Z8.js";import{c as _}from"./utils-J8bI0sT-.js";import{Label as H}from"./label-DW5qsXOm.js";import"./clsx-B-dksMZM.js";import"./index-BrKfa2YN.js";import"./index-Dp3B9jqt.js";var W=e=>e.type==="checkbox",G=e=>e instanceof Date,R=e=>e==null;const K=e=>typeof e=="object";var F=e=>!R(e)&&!Array.isArray(e)&&K(e)&&!G(e),q=e=>F(e)&&e.target?W(e.target)?e.target.checked:e.target.value:e,z=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,J=(e,s)=>e.has(z(s)),Q=e=>{const s=e.constructor&&e.constructor.prototype;return F(s)&&s.hasOwnProperty("isPrototypeOf")},X=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function L(e){let s;const t=Array.isArray(e),o=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(X&&(e instanceof Blob||o))&&(t||F(e)))if(s=t?[]:{},!t&&!Q(e))s=e;else for(const r in e)e.hasOwnProperty(r)&&(s[r]=L(e[r]));else return e;return s}var O=e=>/^\w*$/.test(e),V=e=>e===void 0,Y=e=>Array.isArray(e)?e.filter(Boolean):[],M=e=>Y(e.replace(/["|']|\]/g,"").split(/\.|\[/)),u=(e,s,t)=>{if(!s||!F(e))return t;const o=(O(s)?[s]:M(s)).reduce((r,n)=>R(r)?r:r[n],e);return V(o)||o===e?V(e[s])?t:e[s]:o},C=e=>typeof e=="boolean",P=(e,s,t)=>{let o=-1;const r=O(s)?[s]:M(s),n=r.length,l=n-1;for(;++o<n;){const c=r[o];let a=t;if(o!==l){const m=e[c];a=F(m)||Array.isArray(m)?m:isNaN(+r[o+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=a,e=e[c]}};const k={BLUR:"blur",CHANGE:"change"},D={all:"all"},I=i.createContext(null);I.displayName="HookFormContext";const x=()=>i.useContext(I),Z=e=>{const{children:s,...t}=e;return i.createElement(I.Provider,{value:t},s)};var ee=(e,s,t,o=!0)=>{const r={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(r,n,{get:()=>{const l=n;return s._proxyFormState[l]!==D.all&&(s._proxyFormState[l]=!o||D.all),t&&(t[l]=!0),e[l]}});return r};const j=typeof window<"u"?f.useLayoutEffect:f.useEffect;function te(e){const s=x(),{control:t=s.control,disabled:o,name:r,exact:n}=e||{},[l,c]=i.useState(t._formState),a=i.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return j(()=>t._subscribe({name:r,formState:a.current,exact:n,callback:m=>{!o&&c({...t._formState,...m})}}),[r,o,n]),i.useEffect(()=>{a.current.isValid&&t._setValid(!0)},[t]),i.useMemo(()=>ee(l,t,a.current,!1),[l,t])}var re=e=>typeof e=="string",se=(e,s,t,o,r)=>re(e)?u(t,e,r):Array.isArray(e)?e.map(n=>u(t,n)):t;function oe(e){const s=x(),{control:t=s.control,name:o,defaultValue:r,disabled:n,exact:l}=e||{},c=i.useRef(r),[a,m]=i.useState(t._getWatch(o,c.current));return j(()=>t._subscribe({name:o,formState:{values:!0},exact:l,callback:b=>!n&&m(se(o,t._names,b.values||t._formValues,!1,c.current))}),[o,t,n,l]),i.useEffect(()=>t._removeUnmounted()),a}function ne(e){const s=x(),{name:t,disabled:o,control:r=s.control,shouldUnregister:n}=e,l=J(r._names.array,t),c=oe({control:r,name:t,defaultValue:u(r._formValues,t,u(r._defaultValues,t,e.defaultValue)),exact:!0}),a=te({control:r,name:t,exact:!0}),m=i.useRef(e),b=i.useRef(r.register(t,{...e.rules,value:c,...C(e.disabled)?{disabled:e.disabled}:{}})),S=i.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!u(a.errors,t)},isDirty:{enumerable:!0,get:()=>!!u(a.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!u(a.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!u(a.validatingFields,t)},error:{enumerable:!0,get:()=>u(a.errors,t)}}),[a,t]),w=i.useCallback(d=>b.current.onChange({target:{value:q(d),name:t},type:k.CHANGE}),[t]),N=i.useCallback(()=>b.current.onBlur({target:{value:u(r._formValues,t),name:t},type:k.BLUR}),[t,r._formValues]),E=i.useCallback(d=>{const p=u(r._fields,t);p&&d&&(p._f.ref={focus:()=>d.focus&&d.focus(),select:()=>d.select&&d.select(),setCustomValidity:g=>d.setCustomValidity(g),reportValidity:()=>d.reportValidity()})},[r._fields,t]),A=i.useMemo(()=>({name:t,value:c,...C(o)||a.disabled?{disabled:a.disabled||o}:{},onChange:w,onBlur:N,ref:E}),[t,o,a.disabled,w,N,E,c]);return i.useEffect(()=>{const d=r._options.shouldUnregister||n;r.register(t,{...m.current.rules,...C(m.current.disabled)?{disabled:m.current.disabled}:{}});const p=(g,$)=>{const h=u(r._fields,g);h&&h._f&&(h._f.mount=$)};if(p(t,!0),d){const g=L(u(r._options.defaultValues,t));P(r._defaultValues,t,g),V(u(r._formValues,t))&&P(r._formValues,t,g)}return!l&&r.register(t),()=>{(l?d&&!r._state.action:d)?r.unregister(t):p(t,!1)}},[t,r,l,n]),i.useEffect(()=>{r._setDisabledField({disabled:o,name:t})},[o,t,r]),i.useMemo(()=>({field:A,formState:a,fieldState:S}),[A,a,S])}const ae=e=>e.render(ne(e)),_e=Z,B=f.createContext({}),xe=({...e})=>y.jsx(B.Provider,{value:{name:e.name},children:y.jsx(ae,{...e})}),v=()=>{const e=f.useContext(B),s=f.useContext(U),{getFieldState:t,formState:o}=x(),r=t(e.name,o);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:n}=s;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...r}},U=f.createContext({}),ie=f.forwardRef(({className:e,...s},t)=>{const o=f.useId();return y.jsx(U.Provider,{value:{id:o},children:y.jsx("div",{ref:t,className:_("space-y-2",e),...s})})});ie.displayName="FormItem";const le=f.forwardRef(({className:e,...s},t)=>{const{error:o,formItemId:r}=v();return y.jsx(H,{ref:t,className:_(o&&"text-destructive",e),htmlFor:r,...s})});le.displayName="FormLabel";const ce=f.forwardRef(({...e},s)=>{const{error:t,formItemId:o,formDescriptionId:r,formMessageId:n}=v();return y.jsx(T,{ref:s,id:o,"aria-describedby":t?`${r} ${n}`:`${r}`,"aria-invalid":!!t,...e})});ce.displayName="FormControl";const ue=f.forwardRef(({className:e,...s},t)=>{const{formDescriptionId:o}=v();return y.jsx("p",{ref:t,id:o,className:_("text-sm text-muted-foreground",e),...s})});ue.displayName="FormDescription";const de=f.forwardRef(({className:e,children:s,...t},o)=>{const{error:r,formMessageId:n}=v(),l=r?String(r==null?void 0:r.message):s;return l?y.jsx("p",{ref:o,id:n,className:_("text-sm font-medium text-destructive",e),...t,children:l}):null});de.displayName="FormMessage";export{_e as Form,ce as FormControl,ue as FormDescription,xe as FormField,ie as FormItem,le as FormLabel,de as FormMessage,v as useFormField};
