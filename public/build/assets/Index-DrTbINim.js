import{r as a,X as $,j as e,x as o,R as A,A as h}from"./app-BIIu6Vfg.js";import{M as L}from"./MainLayout-DFIOg-IX.js";import{P}from"./Pagination-BU_DGPID.js";import"./x-D5uUfODk.js";import"./createLucideIcon-BEFA6UwU.js";import"./triangle-alert-BcT2QLL-.js";import"./check-DHyijvq1.js";import"./index-CFCF1YSN.js";function D({title:s,titleId:l,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},d),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const O=a.forwardRef(D);function Z({title:s,titleId:l,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},d),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const B=a.forwardRef(Z);function V({title:s,titleId:l,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},d),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const z=a.forwardRef(V);function I({title:s,titleId:l,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},d),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const x=a.forwardRef(I);function T({title:s,titleId:l,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},d),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const p=a.forwardRef(T);function W({title:s,titleId:l,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},d),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const w=a.forwardRef(W);function X({title:s,titleId:l,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},d),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const g=a.forwardRef(X),te=({requests:s,filters:l,facilities:d,statusOptions:c})=>{const{auth:G}=$().props,[b,y]=a.useState(new Set),[i,m]=a.useState(new Set),[f,N]=a.useState(!1),u={draft:{color:"bg-gray-100 text-gray-800",icon:p,label:"Draft"},submitted:{color:"bg-blue-100 text-blue-800",icon:p,label:"Submitted"},processing:{color:"bg-yellow-100 text-yellow-800",icon:p,label:"Processing"},approved:{color:"bg-green-100 text-green-800",icon:x,label:"Approved"},rejected:{color:"bg-red-100 text-red-800",icon:g,label:"Rejected"},shipped:{color:"bg-purple-100 text-purple-800",icon:x,label:"Shipped"},delivered:{color:"bg-green-100 text-green-800",icon:x,label:"Delivered"},cancelled:{color:"bg-red-100 text-red-800",icon:g,label:"Cancelled"}},k=t=>u[t]||u.draft,R=t=>Math.round(t/6*100),S=t=>{const r=typeof t=="number"?t:parseFloat(t||"0");return isNaN(r)?"$0.00":`$${r.toFixed(2)}`},C=t=>{const r=new Set(b);r.has(t)?r.delete(t):r.add(t),y(r)},_=t=>{const r=new Set(i);r.has(t)?r.delete(t):r.add(t),m(r)},E=()=>{i.size===s.data.length?m(new Set):m(new Set(s.data.map(t=>t.id)))},n=(t,r)=>{h.get(route("product-requests.index"),{...l,[t]:r,page:1},{preserveState:!0,preserveScroll:!0})},F=()=>{h.get(route("product-requests.index"),{},{preserveState:!0,preserveScroll:!0})},j=Object.values(l).some(t=>t);return e.jsx(L,{title:"My Requests",children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Product Requests"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your wound care product requests through the MSC-MVP workflow"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[e.jsxs("button",{onClick:()=>N(!f),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Filters",j&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Object.values(l).filter(t=>t).length})]}),e.jsx(o,{href:"/product-requests/create",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"+ New Request"})]})]}),e.jsx("div",{className:"mt-6 grid grid-cols-2 gap-4 sm:grid-cols-4",children:c.map(t=>e.jsxs("button",{onClick:()=>n("status",t.value),className:`relative rounded-lg border p-4 text-left hover:shadow-md transition-shadow ${l.status===t.value?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t.label}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:t.count})]},t.value))})]})})}),f&&e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Search"}),e.jsx("input",{type:"text",value:l.search||"",onChange:t=>n("search",t.target.value),placeholder:"Request #, Patient ID...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:l.status||"",onChange:t=>n("status",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),Object.entries(u).map(([t,r])=>e.jsx("option",{value:t,children:r.label},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Facility"}),e.jsxs("select",{value:l.facility||"",onChange:t=>n("facility",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Facilities"}),d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date From"}),e.jsx("input",{type:"date",value:l.date_from||"",onChange:t=>n("date_from",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date To"}),e.jsx("input",{type:"date",value:l.date_to||"",onChange:t=>n("date_to",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]}),j&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:F,className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear all filters"})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"w-12 px-6 py-3",children:e.jsx("input",{type:"checkbox",checked:i.size===s.data.length&&s.data.length>0,onChange:E,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Details"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status & Progress"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validation"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products & Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("p",{className:"text-lg font-medium",children:"No product requests found"}),e.jsx("p",{className:"mt-1",children:"Get started by creating your first product request."}),e.jsx(o,{href:"/product-requests/create",className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700",children:"+ New Request"})]})})}):s.data.map(t=>{const r=k(t.order_status),M=r.icon,v=b.has(t.id);return e.jsxs(A.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-gray-50 ${i.has(t.id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.has(t.id),onChange:()=>_(t.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.request_number}),e.jsx("div",{className:"text-sm text-gray-500",children:t.facility_name}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Created: ",t.created_at]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.patient_display}),e.jsx("div",{className:"text-xs text-gray-500",children:"Sequential ID"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r.color}`,children:r.label})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${R(t.step)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Step ",t.step,"/6: ",t.step_description]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[t.mac_validation_status&&e.jsxs("div",{className:"flex items-center text-xs",children:[t.mac_validation_status==="passed"?e.jsx(x,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(w,{className:"h-4 w-4 text-yellow-500 mr-1"}),e.jsxs("span",{children:["MAC: ",t.mac_validation_status]})]}),t.eligibility_status&&e.jsxs("div",{className:"flex items-center text-xs",children:[t.eligibility_status==="eligible"?e.jsx(x,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(g,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{children:["Eligibility: ",t.eligibility_status]})]}),t.pre_auth_required&&e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(w,{className:"h-4 w-4 text-yellow-500 mr-1"}),e.jsx("span",{children:"PA Required"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.total_products," product",t.total_products!==1?"s":""]}),e.jsx("div",{className:"text-sm text-gray-900 font-semibold",children:S(t.total_amount)})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{href:`/product-requests/${t.id}`,className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"View"}),e.jsx("button",{onClick:()=>C(t.id),className:"text-gray-400 hover:text-gray-600",children:v?e.jsx(B,{className:"h-5 w-5"}):e.jsx(O,{className:"h-5 w-5"})})]})})]}),v&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Timeline"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsxs("div",{children:["Created: ",t.created_at]}),t.submitted_at&&e.jsxs("div",{children:["Submitted: ",t.submitted_at]}),t.approved_at&&e.jsxs("div",{children:["Approved: ",t.approved_at]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Clinical Details"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsxs("div",{children:["Wound Type: ",t.wound_type||"Not specified"]}),e.jsxs("div",{children:["Service Date: ",t.expected_service_date||"Not set"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(o,{href:`/product-requests/${t.id}/edit`,className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),e.jsx(o,{href:`/product-requests/${t.id}/duplicate`,className:"text-sm text-blue-600 hover:text-blue-800",children:"Duplicate"}),t.order_status==="draft"&&e.jsx("button",{onClick:()=>h.delete(`/product-requests/${t.id}`),className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})]})]})})})]},t.id)})})]})}),s.data.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(s.current_page-1)*s.per_page+1," to"," ",Math.min(s.current_page*s.per_page,s.total)," of"," ",s.total," results"]}),e.jsx(P,{links:s.links})]})})]}),i.size>0&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[i.size," request",i.size!==1?"s":""," selected"]}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{onClick:()=>m(new Set),className:"text-sm text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Export"}),e.jsx("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Print"})]})]})})})]})]})})};export{te as default};
