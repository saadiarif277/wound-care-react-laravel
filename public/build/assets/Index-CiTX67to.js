import{r as j,G as A,j as e,S as D,A as B}from"./app-taSqzBVs.js";import{M as _}from"./MainLayout-Dw1zk4VW.js";import{a as E,f as y,g as M,k as P,l as c,m as x,n as U,o as $,p as L,h as z}from"./index-BQkVVL-M.js";import"./x-tQL0mm7-.js";import"./createLucideIcon-CJpMkWaB.js";import"./triangle-alert-BOyfSih_.js";import"./check-B1Sfkp9P.js";function W({accessRequests:t,filters:i,roles:m}){var u,f,b;const[G,O]=j.useState(!1),[l,d]=j.useState([]),{data:n,setData:o,get:h,processing:T}=A({search:i.search||"",status:i.status||"pending",role:i.role||""}),N=s=>{s.preventDefault(),h(route("access-requests.index"),{preserveState:!0,preserveScroll:!0})},g=(s,a)=>{o(s,a),h(route("access-requests.index",{...n,[s]:a}),{preserveState:!0,preserveScroll:!0})},v=s=>{const r={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:y,label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",icon:c,label:"Approved"},denied:{bg:"bg-red-100",text:"text-red-800",icon:x,label:"Denied"}}[s],C=r.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.bg} ${r.text}`,children:[e.jsx(C,{className:"mr-1 h-3 w-3"}),r.label]})},w=s=>{const a={provider:"bg-blue-100 text-blue-800","office-manager":"bg-purple-100 text-purple-800","msc-rep":"bg-green-100 text-green-800","msc-subrep":"bg-indigo-100 text-indigo-800","msc-admin":"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${a[s]||"bg-gray-100 text-gray-800"}`,children:m[s]||s})},S=s=>{d(a=>a.includes(s)?a.filter(r=>r!==s):[...a,s])},k=()=>{l.length===t.data.length?d([]):d(t.data.map(s=>s.id))},F=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=t.data.filter(s=>s.status==="pending").length;return e.jsxs(_,{children:[e.jsx(D,{title:"Access Requests"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"md:flex md:items-center md:justify-between mb-6",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate",children:"Access Requests"}),e.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[e.jsx(E,{className:"mr-1.5 h-4 w-4"}),t.data.length," total requests"]}),p>0&&e.jsxs("div",{className:"mt-2 flex items-center text-sm text-yellow-600",children:[e.jsx(y,{className:"mr-1.5 h-4 w-4"}),p," pending review"]})]})]})}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 mb-6",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("form",{onSubmit:N,className:"flex-1 max-w-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:n.search,onChange:s=>o("search",s.target.value),placeholder:"Search by name, email, or facility...",className:"block w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:n.status,onChange:s=>g("status",s.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"denied",children:"Denied"})]}),e.jsxs("select",{value:n.role,onChange:s=>g("role",s.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),Object.entries(m).map(([s,a])=>e.jsx("option",{value:s,children:a},s))]})]})]})})}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:t.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No access requests"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No requests match the current filters."})]}):e.jsxs(e.Fragment,{children:[l.length>0&&e.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm text-blue-700",children:[l.length," selected"]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-green-700 bg-green-100 hover:bg-green-200",children:[e.jsx(c,{className:"mr-1 h-3 w-3"}),"Bulk Approve"]}),e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200",children:[e.jsx(x,{className:"mr-1 h-3 w-3"}),"Bulk Deny"]})]})]})}),e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:l.length===t.data.length,onChange:k,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requester"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:l.includes(s.id),onChange:()=>S(s.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(U,{className:"h-5 w-5 text-gray-500"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.first_name," ",s.last_name]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx($,{className:"mr-1 h-3 w-3"}),s.email]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(s.requested_role)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"mr-1 h-3 w-3"}),F(s.created_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B.get(route("access-requests.show",s.id)),className:"text-blue-600 hover:text-blue-900 flex items-center",children:e.jsx(z,{className:"h-4 w-4"})}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"text-green-600 hover:text-green-900 flex items-center",children:e.jsx(c,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 flex items-center",children:e.jsx(x,{className:"h-4 w-4"})})]})]})})]},s.id))})]})}),t.links&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.links.prev&&e.jsx("a",{href:t.links.prev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),t.links.next&&e.jsx("a",{href:t.links.next,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:((u=t.meta)==null?void 0:u.from)||1})," ","to"," ",e.jsx("span",{className:"font-medium",children:((f=t.meta)==null?void 0:f.to)||t.data.length})," ","of"," ",e.jsx("span",{className:"font-medium",children:((b=t.meta)==null?void 0:b.total)||t.data.length})," ","results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"})})]})]})})]})})]})})]})}export{W as default};
