import{r,j as e,S as cs}from"./app-taSqzBVs.js";import{M as ds}from"./MainLayout-Dw1zk4VW.js";import{l as ms,a0 as us,k as Te,x as De,n as xs,p as oe,A as Fe,W as ps,O as hs,E as bs}from"./index-BQkVVL-M.js";import{A as gs,c as js}from"./react-select-async.esm-CH9fime6.js";import{S as vs}from"./shopping-cart-DHQkLuvm.js";import{S as fs}from"./search-C3KyOaD2.js";import{T as ys}from"./tag-DLVHPd2q.js";import{B as Ss}from"./building-D2y99HfC.js";import{D as Ns}from"./dollar-sign-C3U3yL9u.js";import{C as Cs}from"./check-B1Sfkp9P.js";import"./x-tQL0mm7-.js";import"./createLucideIcon-CJpMkWaB.js";import"./triangle-alert-BOyfSih_.js";const ws=({selectedProduct:l,onProductChange:q,graphSize:x,onGraphSizeChange:ce,units:g,onUnitsChange:H,expectedReimbursement:A,onExpectedReimbursementChange:W,invoiceAmountMedicare:j,onInvoiceAmountMedicareChange:G,secondaryPayer:O,onSecondaryPayerChange:J,invoiceToDoc:Q,onInvoiceToDocChange:L})=>{const[C,K]=r.useState([]),[M,V]=r.useState([]),[h,X]=r.useState(""),[w,Y]=r.useState(""),[R,Z]=r.useState(""),[_,I]=r.useState(!0),[k,de]=r.useState([]),[ee,se]=r.useState([]),[T,E]=r.useState(!1);r.useEffect(()=>{U()},[]),r.useEffect(()=>{let t=C;h&&(t=t.filter(o=>o.name.toLowerCase().includes(h.toLowerCase())||o.q_code.toLowerCase().includes(h.toLowerCase())||o.manufacturer.toLowerCase().includes(h.toLowerCase())||o.sku.toLowerCase().includes(h.toLowerCase()))),w&&(t=t.filter(o=>o.category===w)),R&&(t=t.filter(o=>o.manufacturer===R)),V(t)},[C,h,w,R]);const U=async()=>{try{I(!0);const o=await(await fetch("/api/products/search")).json();K(o.products||[]),de(o.categories||[]),se(o.manufacturers||[])}catch(t){console.error("Failed to fetch products:",t)}finally{I(!1)}},ae=t=>{const o={value:t.id.toString(),label:t.name,sku:t.sku,nationalAsp:t.price_per_sq_cm,pricePerSqCm:t.msc_price,qCode:t.q_code,graphTypes:[t.category],graphSizes:t.available_sizes.map(me=>me.toString()),product:t};q(o),E(!1)},b=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);return r.useEffect(()=>{if(l!=null&&l.product&&x){const t=parseFloat(x);if(!isNaN(t)){const o=l.pricePerSqCm*t*g;W(o),G(o*.8),J((o*.2).toString()),L(o*.4)}}},[l,x,g]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Selection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose a product from our catalog or search for specific items"})]}),e.jsxs("button",{onClick:()=>E(!T),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),T?"Hide Catalog":"Browse Catalog"]})]}),l&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:l.label}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["SKU: ",l.sku]}),e.jsxs("span",{children:["Q-Code: ",l.qCode]}),e.jsxs("span",{children:["National ASP: ",b(l.nationalAsp),"/cm²"]}),e.jsxs("span",{children:["MSC Price: ",b(l.pricePerSqCm),"/cm²"]})]})]}),e.jsx("button",{onClick:()=>q(null),className:"text-red-600 hover:text-red-800",children:"Remove"})]})}),T&&e.jsxs("div",{className:"mt-4 bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Product Catalog"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[M.length," products available"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(fs,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name, Q-code, manufacturer, or SKU...",value:h,onChange:t=>X(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:w,onChange:t=>Y(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),k.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsxs("select",{value:R,onChange:t=>Z(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Manufacturers"}),ee.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]})]}),e.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:_?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading products..."})]}):M.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No products found matching your criteria."}):e.jsx("div",{className:"space-y-2",children:M.map(t=>e.jsx("div",{className:`border rounded-lg p-3 cursor-pointer hover:bg-gray-50 transition-colors ${(l==null?void 0:l.value)===t.id.toString()?"border-blue-500 bg-blue-50":"border-gray-200"}`,onClick:()=>ae(t),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ys,{className:"w-3 h-3 mr-1"}),"Q",t.q_code]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ss,{className:"w-3 h-3 mr-1"}),t.manufacturer]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),b(t.msc_price),"/cm²"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:t.description})]}),(l==null?void 0:l.value)===t.id.toString()&&e.jsx(Cs,{className:"w-5 h-5 text-blue-600"})]})},t.id))})})]})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Graph Size (cm²) *"}),e.jsxs("select",{value:x,onChange:t=>ce(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select size..."}),l.graphSizes.map(t=>e.jsxs("option",{value:t,children:[t," cm² - ",b(l.pricePerSqCm*parseFloat(t))]},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Units *"}),e.jsx("input",{type:"number",min:"1",value:g,onChange:t=>H(Math.max(1,parseInt(t.target.value)||1)),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Reimbursement *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:A,onChange:t=>W(parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Amount to Medicare (80%) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:j,onChange:t=>G(parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secondary Payer Amount (20%) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:parseFloat(O)||0,onChange:t=>J(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice to Doc from Manufacturer (40%) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:Q,onChange:t=>L(parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),l&&x&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Order Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsx("span",{className:"ml-2 font-medium",children:l.label})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Size:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[x," cm²"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Units:"}),e.jsx("span",{className:"ml-2 font-medium",children:g})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Area:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[parseFloat(x)*g," cm²"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Unit Price:"}),e.jsx("span",{className:"ml-2 font-medium",children:b(l.pricePerSqCm*parseFloat(x))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-600",children:b(l.pricePerSqCm*parseFloat(x)*g)})]})]})]})]})},da=()=>{const[l,q]=r.useState(1),[x,ce]=r.useState(`ORD-${new Date().getTime()}`),[g,H]=r.useState(""),[A,W]=r.useState(""),[j,G]=r.useState(new Date),[O,J]=r.useState("net60"),[Q,L]=r.useState(""),[C,K]=r.useState(0),[M,V]=r.useState(0),[h,X]=r.useState(0),[w,Y]=r.useState(""),[R,Z]=r.useState(""),[_,I]=r.useState(""),[k,de]=r.useState(1),[ee,se]=r.useState(""),[T,E]=r.useState(0),[U,ae]=r.useState("0"),[b,t]=r.useState(0),[o,me]=r.useState(new Date(Date.now()+60*24*60*60*1e3)),[B,Me]=r.useState(0),[te,Ie]=r.useState(null),[ue,ve]=r.useState(0),[re,Pe]=r.useState(""),[P,$e]=r.useState(40),[f,fe]=r.useState(0),[ie,qe]=r.useState("pending"),[le,Ae]=r.useState(null),[xe,ye]=r.useState(0),[Oe,Rs]=r.useState(!1),[Le,_s]=r.useState(""),[Ee,ks]=r.useState(""),[Ue,Ts]=r.useState(0),[Be,Ds]=r.useState(0),[pe,Fs]=r.useState(null),[ze,Ms]=r.useState(!1),[He,Is]=r.useState(""),[We,Ps]=r.useState(""),[Ge,$s]=r.useState(0),[Je,qs]=r.useState(0),[he,As]=r.useState(null),[Os,Ls]=r.useState(!1),[Es,Us]=r.useState(""),[Bs,zs]=r.useState(""),[Hs,Ws]=r.useState(0),[Gs,Js]=r.useState(0),[Qs,Ks]=r.useState(null),[Qe,Se]=r.useState(null),[Ke,Ne]=r.useState(null),[Ve,be]=r.useState(!1),[Xe,Ce]=r.useState(!1),[y,$]=r.useState({name:"",type:"doctor",address:"",phone:"",email:""}),[m,S]=r.useState({name:"",sku:"",nationalAsp:0,pricePerSqCm:0,qCode:"",graphTypes:[],graphSizes:[]}),we=[{value:"1",label:"Dr. John Smith - Main Hospital",type:"doctor"},{value:"2",label:"Downtown Medical Center",type:"facility"},{value:"3",label:"Dr. Sarah Johnson - Northside Clinic",type:"doctor"}],[z,Vs]=r.useState([{id:"R1",name:"John Smith",type:"rep",parentId:null,commissionStructure:50},{id:"R2",name:"Sarah Johnson",type:"rep",parentId:null,commissionStructure:45},{id:"R3",name:"Michael Brown",type:"rep",parentId:null,commissionStructure:48},{id:"R4",name:"Lisa Davis",type:"rep",parentId:null,commissionStructure:52},{id:"R5",name:"David Wilson",type:"rep",parentId:null,commissionStructure:47},{id:"SR1",name:"Robert Taylor",type:"sub-rep",parentId:"R1",commissionStructure:35},{id:"SR2",name:"Emily Chen",type:"sub-rep",parentId:"R1",commissionStructure:30},{id:"SR3",name:"James Anderson",type:"sub-rep",parentId:"R1",commissionStructure:32},{id:"SR4",name:"Jennifer Lee",type:"sub-rep",parentId:"R2",commissionStructure:32},{id:"SR5",name:"William Clark",type:"sub-rep",parentId:"R2",commissionStructure:28},{id:"SR6",name:"Patricia Martinez",type:"sub-rep",parentId:"R3",commissionStructure:40},{id:"SR7",name:"Thomas Moore",type:"sub-rep",parentId:"R3",commissionStructure:38},{id:"SR8",name:"Richard White",type:"sub-rep",parentId:"R4",commissionStructure:42},{id:"SR9",name:"Susan Garcia",type:"sub-rep",parentId:"R4",commissionStructure:38},{id:"SR10",name:"Elizabeth Wright",type:"sub-rep",parentId:"R5",commissionStructure:36},{id:"SR11",name:"Christopher Hall",type:"sub-rep",parentId:"R5",commissionStructure:34}]),[u,Re]=r.useState([]),[N,ge]=r.useState([]);r.useMemo(()=>z.map(s=>({value:s.id,label:`${s.name} (${s.commissionStructure}%)`,commissionStructure:s.commissionStructure,type:s.type})),[z]);const Ye=s=>new Promise(a=>{setTimeout(()=>{const n=we.filter(c=>c.label.toLowerCase().includes(s.toLowerCase()));a(n)},300)}),Ze=s=>{Se(s),H((s==null?void 0:s.label)||"")},_e=s=>{Ne(s),s?(Z(s.label),L(s.sku),K(s.nationalAsp),V(s.pricePerSqCm),se(s.qCode),s.graphTypes.length>0&&Y(s.graphTypes[0]),s.graphSizes.length>0&&I(s.graphSizes[0])):(Z(""),L(""),K(0),V(0),se(""),Y(""),I(""))},es=s=>{s.preventDefault();const a={value:Date.now().toString(),label:`${y.type==="doctor"?"Dr. ":""}${y.name}`,type:y.type};we.push(a),Se(a),H(a.label),be(!1),$({name:"",type:"doctor",address:"",phone:"",email:""})},ss=s=>{s.preventDefault();const a={value:Date.now().toString(),label:m.name,sku:m.sku,nationalAsp:m.nationalAsp,pricePerSqCm:m.pricePerSqCm,qCode:m.qCode,graphTypes:m.graphTypes,graphSizes:m.graphSizes};Ne(a),_e(a),Ce(!1),S({name:"",sku:"",nationalAsp:0,pricePerSqCm:0,qCode:"",graphTypes:[],graphSizes:[]})},as=s=>{if(!s)return 0;const[a,n]=s.split("x").map(Number);return isNaN(a)||isNaN(n)?(console.error("Invalid graph size format:",s),0):a*n};r.useEffect(()=>{const s=as(_)*(k||0),a=(C||0)*s;X(a);const n=a*.8;E(n);const c=a*.2;ae(c.toFixed(2));const d=a*.4;t(d);const p=d*((P||0)/100);fe(p);let F=0;u.length>0&&(u.forEach(ns=>{const os=p*(ns.commissionStructure/100);F+=os}),ye(F));const je=d-(B||0);ve(je)},[C,k,_,P,u,B]);const ts=s=>{s.preventDefault();const a={order_number:x,doctor_facility_name:g,patient_hash:A,date_of_service:j==null?void 0:j.toISOString().split("T")[0],credit_terms:O,sku:Q,national_asp:C,price_per_sq_cm:M,expected_reimbursement:h,graph_type:w,product_name:R,graph_size:_,units:k,q_code:ee,invoice_amount_medicare:T,secondary_payer:U,invoice_to_doc:b,expected_collection_date:o==null?void 0:o.toISOString().split("T")[0],paid_to_manufacturer:B,manufacturer_paid_date:te==null?void 0:te.toISOString().split("T")[0],balance_owed_to_manufacturer:ue,manufacturer_payment_notes:re,msc_commission_structure:P,msc_commission:f,payment_status:ie,msc_paid_date:le==null?void 0:le.toISOString().split("T")[0],reps_total_commission:xe,has_rep:Oe,rep_name:Le,rep_id:Ee,rep_commission_structure:Ue,rep_commission_total:Be,rep_paid_date:pe==null?void 0:pe.toISOString().split("T")[0],has_sub_rep:ze,sub_rep_name:He,sub_rep_id:We,sub_rep_commission_structure:Ge,sub_rep_commission_total:Je,sub_rep_paid_date:he==null?void 0:he.toISOString().split("T")[0]};console.log("Submitting order:",a)},rs=()=>q(s=>Math.min(s+1,4)),is=()=>q(s=>Math.max(s-1,1)),ls=s=>e.jsx(js.Option,{...s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:s.data.type==="doctor"?"text-blue-600":"text-green-600",children:s.data.type==="doctor"?"👨‍⚕️":"🏥"}),e.jsx("span",{children:s.data.label})]})}),v=({label:s,value:a,onChange:n,required:c=!1,icon:d=null,disabled:p=!1})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s,c&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[d&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d}),e.jsx("input",{type:"text",value:a,onChange:F=>n(F.target.value),className:`w-full py-2 ${d?"pl-10":"pl-3"} pr-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 ${p?"bg-gray-100":""}`,required:c,disabled:p})]})]}),ne=({label:s,value:a,onChange:n,icon:c=null})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsxs("div",{className:"relative",children:[c&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c}),e.jsx("input",{type:"date",value:a?a.toISOString().split("T")[0]:"",onChange:d=>n(d.target.value?new Date(d.target.value):null),className:`w-full py-2 ${c?"pl-10":"pl-3"} pr-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500`})]})]}),D=({label:s,value:a,onChange:n,min:c=0,max:d,required:p=!1,disabled:F=!1})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s,p&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:c,max:d,value:a,onChange:je=>n(parseFloat(je.target.value)||0),className:`w-full py-2 pl-3 pr-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 ${F?"bg-gray-100":""}`,disabled:F})]}),ke=({label:s,value:a,onChange:n,options:c,icon:d=null})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsxs("div",{className:"relative",children:[d&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d}),e.jsx("select",{value:a,onChange:p=>n(p.target.value),className:`w-full py-2 ${d?"pl-10":"pl-3"} pr-8 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500`,children:c.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]})]}),i=({label:s,value:a,className:n=""})=>e.jsxs("div",{className:n,children:[e.jsx("p",{className:"text-sm text-gray-500",children:s}),e.jsx("p",{className:"font-medium",children:a})]});return e.jsxs(ds,{children:[e.jsx(cs,{title:"Create Wound Care Order"}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Wound Care Order Create"}),e.jsx("p",{className:"text-gray-500",children:"Create wound care product orders with detailed reimbursement tracking"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 relative",children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-1 bg-gray-200 -z-10",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${(l-1)*33.33}%`}})}),[1,2,3,4].map(s=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l>=s?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"}`,children:l>s?e.jsx(ms,{}):s}),e.jsx("span",{className:`text-xs mt-2 ${l>=s?"text-indigo-600 font-medium":"text-gray-500"}`,children:["Order Info","Product Details","Payment & Commission","Review"][s-1]})]},s))]}),e.jsxs("form",{onSubmit:ts,className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[l===1&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:[e.jsx(us,{className:"text-indigo-600"}),"Order Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(v,{label:"Order Number",value:x,onChange:ce,required:!0,icon:e.jsx(Te,{className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor/Facility Name *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(gs,{value:Qe,onChange:Ze,loadOptions:Ye,defaultOptions:!0,components:{Option:ls},placeholder:"Search doctor or facility...",className:"react-select-container",classNamePrefix:"react-select",isClearable:!0,required:!0})}),e.jsx("button",{type:"button",onClick:()=>be(!0),className:"px-3 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200",children:e.jsx(De,{})})]})]}),e.jsx(v,{label:"Patient Hash (De-Identified)",value:A,onChange:W,required:!0,icon:e.jsx(xs,{className:"text-gray-400"})}),e.jsx(ne,{label:"Date of Service",value:j,onChange:G,required:!0,icon:e.jsx(oe,{className:"text-gray-400"})}),e.jsx(ke,{label:"Credit Terms",value:O,onChange:J,options:[{value:"net60",label:"Net-60 Terms"},{value:"net30",label:"Net-30 Terms"},{value:"net90",label:"Net-90 Terms"}],icon:e.jsx(Fe,{className:"text-gray-400"})})]})]}),"          ",l===2&&e.jsxs("div",{className:"p-6",children:["              ",e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:["                ",e.jsx(De,{className:"text-indigo-600"}),"                Product Selection & Details              "]}),"              ",e.jsx(ws,{selectedProduct:Ke,onProductChange:_e,graphSize:_,onGraphSizeChange:I,units:k,onUnitsChange:de,expectedReimbursement:h,onExpectedReimbursementChange:X,invoiceAmountMedicare:T,onInvoiceAmountMedicareChange:E,secondaryPayer:U,onSecondaryPayerChange:ae,invoiceToDoc:b,onInvoiceToDocChange:t}),"            "]}),l===3&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:[e.jsx(Fe,{className:"text-indigo-600"}),"Payment & Commission Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ne,{label:"Expected Collection Date",value:o,onChange:me,icon:e.jsx(oe,{className:"text-gray-400"})}),e.jsx(D,{label:"Paid to Manufacturer",value:B,onChange:Me,min:"0"}),e.jsx(ne,{label:"Manufacturer Paid Date",value:te,onChange:Ie,icon:e.jsx(oe,{className:"text-gray-400"})}),e.jsx(D,{label:"Balance Owed to Manufacturer",value:ue,onChange:ve,min:"0"}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes about Manufacturer Payment"}),e.jsx("textarea",{value:re,onChange:s=>Pe(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),e.jsx(D,{label:"MSC Commission Structure (%)",value:P,onChange:$e,min:"0",max:"100",required:!0}),e.jsx(D,{label:"MSC Commission",value:f,onChange:fe,min:"0"}),e.jsx(ke,{label:"Payment Status",value:ie,onChange:qe,options:[{value:"paid",label:"Paid"},{value:"pending",label:"Pending"},{value:"overdue",label:"Overdue"}]}),e.jsx(ne,{label:"MSC Paid Date",value:le,onChange:Ae,icon:e.jsx(oe,{className:"text-gray-400"})}),e.jsx(D,{label:"Reps Total Commission",value:xe,onChange:ye,min:"0"}),e.jsxs("div",{className:"md:col-span-2 border-t pt-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Rep Commission Structure"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Reps"}),e.jsx("div",{className:"border rounded-lg divide-y max-h-96 overflow-y-auto",children:z.filter(s=>s.type==="rep").map(s=>e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${u.some(a=>a.id===s.id)?"bg-indigo-50 border-l-4 border-indigo-500":""}`,onClick:()=>{u.some(n=>n.id===s.id)?(Re(u.filter(n=>n.id!==s.id)),ge(N.filter(n=>n.parentId!==s.id))):Re([...u,s])},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Commission: ",s.commissionStructure,"%"]})]}),e.jsx("div",{className:"flex items-center",children:u.some(a=>a.id===s.id)?e.jsx("span",{className:"text-indigo-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}):e.jsx("span",{className:"text-gray-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})})]})},s.id))})]}),u.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Sub-Reps"}),e.jsx("div",{className:"border rounded-lg divide-y max-h-96 overflow-y-auto",children:z.filter(s=>s.type==="sub-rep"&&u.some(a=>a.id===s.parentId)).map(s=>{var a;return e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors pl-8 ${N.some(n=>n.id===s.id)?"bg-indigo-50 border-l-4 border-indigo-500":""}`,onClick:()=>{const n=N.some(c=>c.id===s.id);ge(n?N.filter(c=>c.id!==s.id):[...N,s])},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Commission: ",s.commissionStructure,"% (Under ",(a=z.find(n=>n.id===s.parentId))==null?void 0:a.name,")"]})]}),e.jsx("div",{className:"flex items-center",children:N.some(n=>n.id===s.id)?e.jsx("span",{className:"text-indigo-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}):e.jsx("span",{className:"text-gray-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})})]})},s.id)})})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"MSC Commission Structure",value:`${P}%`}),e.jsx(i,{label:"MSC Commission",value:`$${f.toFixed(2)}`})]}),u.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Rep Commission Details"}),e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Rep Name",value:s.name}),e.jsx(i,{label:"Commission Structure",value:`${s.commissionStructure}%`}),e.jsx(i,{label:"Commission Total",value:`$${(f*(s.commissionStructure/100)).toFixed(2)}`})]}),N.filter(a=>a.parentId===s.id).map(a=>e.jsx("div",{className:"mt-4 pl-4 border-l-2 border-indigo-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Sub-Rep Name",value:a.name}),e.jsx(i,{label:"Commission Structure",value:`${a.commissionStructure}%`}),e.jsx(i,{label:"Commission Total",value:`$${(f*(s.commissionStructure/100)*(a.commissionStructure/100)).toFixed(2)}`})]})},a.id))]},s.id))})]})]})]})]})]}),l===4&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:[e.jsx(Te,{className:"text-indigo-600"}),"Review & Submit"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Order Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Order Number",value:x}),e.jsx(i,{label:"Doctor/Facility Name",value:g}),e.jsx(i,{label:"Patient Hash",value:A}),e.jsx(i,{label:"Date of Service",value:(j==null?void 0:j.toLocaleDateString())||""}),e.jsx(i,{label:"Credit Terms",value:O.toUpperCase()})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Product Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"SKU",value:Q}),e.jsx(i,{label:"National ASP",value:`$${C.toFixed(2)}`}),e.jsx(i,{label:"Price per sq cm",value:`$${M.toFixed(2)}`}),e.jsx(i,{label:"Graph Type",value:w}),e.jsx(i,{label:"Product Name",value:R}),e.jsx(i,{label:"Graph Size",value:_}),e.jsx(i,{label:"Units",value:k.toString()}),e.jsx(i,{label:"Q Code",value:ee}),e.jsx(i,{label:"Expected Reimbursement",value:`$${h.toFixed(2)}`}),e.jsx(i,{label:"Invoice Amount to Medicare (80%)",value:`$${T.toFixed(2)}`}),e.jsx(i,{label:"Secondary Payer Amount (20%)",value:`$${parseFloat(U).toFixed(2)}`}),e.jsx(i,{label:"Invoice to Doc from Manufacturer (40%)",value:`$${b.toFixed(2)}`})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Payment & Commission Summary"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Expected Collection Date",value:(o==null?void 0:o.toLocaleDateString())||""}),e.jsx(i,{label:"Payment Status",value:ie.charAt(0).toUpperCase()+ie.slice(1)}),e.jsx(i,{label:"Paid to Manufacturer",value:`$${B.toFixed(2)}`}),e.jsx(i,{label:"Balance Owed to Manufacturer",value:`$${ue.toFixed(2)}`}),e.jsx(i,{label:"MSC Commission Structure",value:`${P}%`}),e.jsx(i,{label:"MSC Commission",value:`$${f.toFixed(2)}`}),e.jsx(i,{label:"Reps Total Commission",value:`$${xe.toFixed(2)}`})]})})]}),re&&e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Manufacturer Payment Notes"}),e.jsx("p",{className:"whitespace-pre-wrap",children:re})]}),u.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Rep Commission Details"}),e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Rep Name",value:s.name}),e.jsx(i,{label:"Commission Structure",value:`${s.commissionStructure}%`}),e.jsx(i,{label:"Commission Total",value:`$${(f*(s.commissionStructure/100)).toFixed(2)}`})]}),N.filter(a=>a.parentId===s.id).map(a=>e.jsx("div",{className:"mt-4 pl-4 border-l-2 border-indigo-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Sub-Rep Name",value:a.name}),e.jsx(i,{label:"Commission Structure",value:`${a.commissionStructure}%`}),e.jsx(i,{label:"Commission Total",value:`$${(f*(s.commissionStructure/100)*(a.commissionStructure/100)).toFixed(2)}`})]})},a.id))]},s.id))})]})]})]}),Ve&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Doctor/Facility"}),e.jsxs("form",{onSubmit:es,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:y.type,onChange:s=>$(a=>({...a,type:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[e.jsx("option",{value:"doctor",children:"Doctor"}),e.jsx("option",{value:"facility",children:"Facility"})]})]}),e.jsx(v,{label:"Name",value:y.name,onChange:s=>$(a=>({...a,name:s})),required:!0}),e.jsx(v,{label:"Address",value:y.address,onChange:s=>$(a=>({...a,address:s}))}),e.jsx(v,{label:"Phone",value:y.phone,onChange:s=>$(a=>({...a,phone:s}))}),e.jsx(v,{label:"Email",value:y.email,onChange:s=>$(a=>({...a,email:s})),type:"email"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>be(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Add"})]})]})]})}),Xe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Product"}),e.jsxs("form",{onSubmit:ss,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(v,{label:"Product Name",value:m.name,onChange:s=>S(a=>({...a,name:s})),required:!0}),e.jsx(v,{label:"SKU",value:m.sku,onChange:s=>S(a=>({...a,sku:s})),required:!0}),e.jsx(D,{label:"National ASP",value:m.nationalAsp,onChange:s=>S(a=>({...a,nationalAsp:s})),min:"0",required:!0}),e.jsx(D,{label:"Price per sq cm",value:m.pricePerSqCm,onChange:s=>S(a=>({...a,pricePerSqCm:s})),min:"0",required:!0}),e.jsx(v,{label:"Q Code",value:m.qCode,onChange:s=>S(a=>({...a,qCode:s})),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Graph Types"}),e.jsx("input",{type:"text",value:m.graphTypes.join(", "),onChange:s=>S(a=>({...a,graphTypes:s.target.value.split(",").map(n=>n.trim()).filter(Boolean)})),placeholder:"Type A, Type B, Type C",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Graph Sizes"}),e.jsx("input",{type:"text",value:m.graphSizes.join(", "),onChange:s=>S(a=>({...a,graphSizes:s.target.value.split(",").map(n=>n.trim()).filter(Boolean)})),placeholder:"2x2, 4x4, 6x6",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Ce(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Add"})]})]})]})}),e.jsxs("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:[e.jsx("div",{children:l>1&&e.jsxs("button",{type:"button",onClick:is,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-indigo-700",children:[e.jsx(ps,{}),"Previous"]})}),e.jsx("div",{children:l<4?e.jsxs("button",{type:"button",onClick:rs,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:["Next",e.jsx(hs,{})]}):e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(bs,{}),"Submit Order"]})})]})]})]})]})};export{da as default};
