import{u as R,r as g,j as e,S as V,A as d}from"./app-CkbwHOkf.js";import{M as A}from"./MainLayout-DIjIBnGe.js";import{t as y}from"./glass-theme-CCnqi7lL.js";import{B as h}from"./Button-2TyLRw72.js";import{H as N}from"./heart-DxydAzba.js";import{R as D}from"./refresh-cw-gQ0DW4pt.js";import{A as L}from"./activity-Dw7iipAt.js";import{C as j}from"./clock-BCNbb55_.js";import{S as C}from"./shield-check-DbjsNTGN.js";import{T as _}from"./triangle-alert-D2zL4pqG.js";import{C as T}from"./circle-alert-D5RtSiPV.js";import{S as B}from"./search-B4qCXP-m.js";import{C as $}from"./circle-check-big-BZwOB0cM.js";import{P as f}from"./package-C3D73aJ6.js";import{B as U}from"./building-2-By7SiNBb.js";import{C as z}from"./chevron-right-BB6IVksD.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./check-DXIgFk-v.js";import"./index-R2fUhcwH.js";import"./index-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";const w={ready_for_review:{label:"Under Review",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",icon:j},ivr_verified:{label:"Insurance Verified",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",icon:$},sent_to_manufacturer:{label:"In Production",color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",icon:f},tracking_added:{label:"Shipped",color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-200",icon:f},completed:{label:"Completed",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",icon:$}},F={pending:{label:"Pending Verification",color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200",icon:j},verified:{label:"Insurance Verified",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",icon:C},expired:{label:"Verification Expired",color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",icon:_}};function xe({episodes:s}){let n="dark",t=y.dark;try{n=R().theme,t=y[n]}catch{}const[c,S]=g.useState(""),[o,k]=g.useState("all"),[u,E]=g.useState("all"),I=Array.from(new Set(s.data.map(r=>r.manufacturer.name))).sort(),b=s.data.filter(r=>{var p;const a=c===""||r.patient_display_id.toLowerCase().includes(c.toLowerCase())||((p=r.patient_name)==null?void 0:p.toLowerCase().includes(c.toLowerCase()))||r.manufacturer.name.toLowerCase().includes(c.toLowerCase())||r.orders.some(l=>l.order_number.toLowerCase().includes(c.toLowerCase())),i=o==="all"||o==="pending_ivr"&&r.ivr_status==="pending"||o==="verified"&&r.ivr_status==="verified"||o==="expired"&&r.ivr_status==="expired"||o==="completed"&&r.status==="completed",m=u==="all"||r.manufacturer.name===u;return a&&i&&m}),M=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),v=r=>{if(!r)return null;const a=new Date,m=new Date(r).getTime()-a.getTime();return Math.ceil(m/(1e3*60*60*24))},x={total:s.total,pending:s.data.filter(r=>r.ivr_status==="pending").length,verified:s.data.filter(r=>r.ivr_status==="verified").length,expired:s.data.filter(r=>r.ivr_status==="expired").length,expiringSoon:s.data.filter(r=>{const a=v(r.expiration_date);return a!==null&&a>0&&a<=30}).length};return e.jsxs(A,{children:[e.jsx(V,{title:"My Episodes | MSC Healthcare"}),e.jsxs("div",{className:`min-h-screen ${n==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("div",{className:`${t.glass.card} ${t.glass.border} p-6 mb-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t.text.primary}`,children:"Patient Episodes"}),e.jsx("p",{className:`text-sm ${t.text.secondary}`,children:"Manage patient IVR episodes and track orders"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(h,{variant:"ghost",onClick:()=>d.reload(),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsx(h,{onClick:()=>d.visit(route("product-requests.create")),children:"New Request"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:`${t.glass.card} ${t.glass.border} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(L,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:`text-2xl font-bold ${t.text.primary}`,children:x.total})]}),e.jsx("p",{className:`text-sm ${t.text.secondary}`,children:"Total Episodes"})]}),e.jsxs("div",{className:`${t.glass.card} ${t.glass.border} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(j,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:`text-2xl font-bold ${t.text.primary}`,children:x.pending})]}),e.jsx("p",{className:`text-sm ${t.text.secondary}`,children:"Pending IVR"})]}),e.jsxs("div",{className:`${t.glass.card} ${t.glass.border} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:`text-2xl font-bold ${t.text.primary}`,children:x.verified})]}),e.jsx("p",{className:`text-sm ${t.text.secondary}`,children:"Verified"})]}),e.jsxs("div",{className:`${t.glass.card} ${t.glass.border} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(_,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:`text-2xl font-bold ${t.text.primary}`,children:x.expired})]}),e.jsx("p",{className:`text-sm ${t.text.secondary}`,children:"Expired"})]}),e.jsxs("div",{className:`${t.glass.card} ${t.glass.border} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(T,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:`text-2xl font-bold ${t.text.primary}`,children:x.expiringSoon})]}),e.jsx("p",{className:`text-sm ${t.text.secondary}`,children:"Expiring Soon"})]})]}),e.jsx("div",{className:`${t.glass.card} ${t.glass.border} p-4 mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${t.text.muted}`}),e.jsx("input",{type:"text",placeholder:"Search by patient ID, name, or order number...",value:c,onChange:r=>S(r.target.value),className:`w-full pl-10 pr-4 py-2 ${t.input.base} ${t.input.focus} rounded-lg`})]}),e.jsxs("select",{value:o,onChange:r=>k(r.target.value),className:`px-4 py-2 ${t.input.select} rounded-lg`,children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending_ivr",children:"Pending IVR"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{value:u,onChange:r=>E(r.target.value),className:`px-4 py-2 ${t.input.select} rounded-lg`,children:[e.jsx("option",{value:"all",children:"All Manufacturers"}),I.map(r=>e.jsx("option",{value:r,children:r},r))]})]})}),e.jsxs("div",{className:`${t.glass.card} ${t.glass.border} overflow-hidden`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:n==="dark"?"bg-gray-800/50":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-xs font-medium ${t.text.secondary} uppercase tracking-wider`,children:"Patient"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-medium ${t.text.secondary} uppercase tracking-wider`,children:"Manufacturer"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-medium ${t.text.secondary} uppercase tracking-wider`,children:"IVR Status"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-medium ${t.text.secondary} uppercase tracking-wider`,children:"Episode Status"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-medium ${t.text.secondary} uppercase tracking-wider`,children:"Orders"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-medium ${t.text.secondary} uppercase tracking-wider`,children:"Expiration"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-medium ${t.text.secondary} uppercase tracking-wider`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${n==="dark"?"divide-gray-700":"divide-gray-200"}`,children:b.map(r=>{const a=w[r.status]||w.ready_for_review,i=F[r.ivr_status],m=i.icon,p=a.icon,l=v(r.expiration_date);return e.jsxs("tr",{className:`${n==="dark"?"hover:bg-gray-800/30":"hover:bg-gray-50"} transition-colors cursor-pointer`,onClick:()=>d.visit(route("provider.episodes.show",r.id)),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t.text.primary}`,children:r.patient_name||r.patient_display_id}),e.jsx("div",{className:`text-sm ${t.text.secondary}`,children:r.patient_display_id})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-2 text-gray-500"}),e.jsx("span",{className:`text-sm ${t.text.primary}`,children:r.manufacturer.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:`w-4 h-4 ${i.color}`}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${i.bgColor} ${i.color} ${i.borderColor} border`,children:i.label})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{className:`w-4 h-4 ${a.color}`}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${a.bgColor} ${a.color} ${a.borderColor} border`,children:a.label})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:`text-sm ${t.text.primary}`,children:[r.orders.length," order",r.orders.length!==1?"s":""]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.expiration_date?e.jsxs("div",{children:[e.jsx("div",{className:`text-sm ${l&&l<=0?"text-red-600 font-medium":l&&l<=30?"text-orange-600 font-medium":t.text.primary}`,children:M(r.expiration_date)}),l!==null&&e.jsx("div",{className:`text-xs ${l<=0?"text-red-500":l<=30?"text-orange-500":t.text.secondary}`,children:l<=0?"Expired":`${l} days`})]}):e.jsx("span",{className:`text-sm ${t.text.muted}`,children:"—"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(h,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),d.visit(route("provider.episodes.show",r.id))},children:["View",e.jsx(z,{className:"w-4 h-4 ml-1"})]})})})]},r.id)})})]})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:`w-12 h-12 ${t.text.muted} mx-auto mb-4`}),e.jsx("p",{className:`text-lg ${t.text.secondary}`,children:"No episodes found"}),e.jsx("p",{className:`text-sm ${t.text.muted} mt-2`,children:"Try adjusting your search or filters"})]}),s.last_page>1&&e.jsx("div",{className:`px-6 py-4 border-t ${n==="dark"?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:`text-sm ${t.text.secondary}`,children:["Showing ",(s.current_page-1)*s.per_page+1," to"," ",Math.min(s.current_page*s.per_page,s.total)," of"," ",s.total," episodes"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{variant:"ghost",size:"sm",disabled:s.current_page===1,onClick:()=>d.visit(`${route("provider.episodes")}?page=${s.current_page-1}`),children:"Previous"}),e.jsxs("span",{className:`text-sm ${t.text.primary}`,children:["Page ",s.current_page," of ",s.last_page]}),e.jsx(h,{variant:"ghost",size:"sm",disabled:s.current_page===s.last_page,onClick:()=>d.visit(`${route("provider.episodes")}?page=${s.current_page+1}`),children:"Next"})]})]})})]})]})]})}export{xe as default};
