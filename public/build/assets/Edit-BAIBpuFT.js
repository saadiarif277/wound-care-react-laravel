import{r as z,G as S,j as e,S as q,x as u}from"./app-BIIu6Vfg.js";import{M as D}from"./MainLayout-DFIOg-IX.js";import{q as P,z as d,T as F,x,a1 as U,d as A}from"./index-CFCF1YSN.js";import"./x-D5uUfODk.js";import"./createLucideIcon-BEFA6UwU.js";import"./triangle-alert-BcT2QLL-.js";import"./check-DHyijvq1.js";function R({product:t,categories:g,manufacturers:b}){const[p,m]=z.useState(!1),{data:a,setData:l,put:h,delete:f,processing:n,errors:r}=S({sku:t.sku||"",name:t.name||"",description:t.description||"",manufacturer:t.manufacturer||"",category:t.category||"",national_asp:t.price_per_sq_cm?t.price_per_sq_cm.toString():"",price_per_sq_cm:t.price_per_sq_cm?t.price_per_sq_cm.toString():"",q_code:t.q_code||"",available_sizes:t.available_sizes?t.available_sizes.map(s=>s.toString()):[""],graph_type:t.graph_type||"",image_url:t.image_url||"",document_urls:t.document_urls&&t.document_urls.length>0?t.document_urls:[""],commission_rate:t.commission_rate?t.commission_rate.toString():"",is_active:t.is_active}),j=s=>{s.preventDefault();const i={...a,available_sizes:a.available_sizes.filter(c=>c.trim()!=="").map(c=>parseFloat(c)),document_urls:a.document_urls.filter(c=>c.trim()!==""),national_asp:a.national_asp?parseFloat(a.national_asp):null,price_per_sq_cm:a.price_per_sq_cm?parseFloat(a.price_per_sq_cm):null,commission_rate:a.commission_rate?parseFloat(a.commission_rate):null};h(`/products/${t.id}`,i)},y=()=>{f(`/products/${t.id}`)},_=()=>{l("available_sizes",[...a.available_sizes,""])},v=s=>{const i=a.available_sizes.filter((c,o)=>o!==s);l("available_sizes",i)},N=(s,i)=>{const c=[...a.available_sizes];c[s]=i,l("available_sizes",c)},w=()=>{l("document_urls",[...a.document_urls,""])},k=s=>{const i=a.document_urls.filter((c,o)=>o!==s);l("document_urls",i)},C=(s,i)=>{const c=[...a.document_urls];c[s]=i,l("document_urls",c)};return e.jsxs(D,{title:`Edit ${t.name}`,children:[e.jsx(q,{title:`Edit ${t.name}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(u,{href:"/products",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(P,{className:"w-4 h-4"}),"Back to Products"]}),e.jsx("div",{className:"w-px h-6 bg-gray-300"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Product"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(d,{className:"w-4 h-4"}),"Delete Product"]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["SKU ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.sku,onChange:s=>l("sku",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., BIO-Q4154"}),r.sku&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Q-Code"}),e.jsx("input",{type:"text",value:a.q_code,onChange:s=>l("q_code",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 4154"}),r.q_code&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.q_code})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.name,onChange:s=>l("name",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Biovance"}),r.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:s=>l("description",s.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product description..."}),r.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manufacturer"}),e.jsxs("select",{value:a.manufacturer,onChange:s=>l("manufacturer",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Manufacturer"}),b.map(s=>e.jsx("option",{value:s,children:s},s))]}),r.manufacturer&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.manufacturer})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:a.category,onChange:s=>l("category",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Category"}),g.map(s=>e.jsx("option",{value:s,children:s},s))]}),r.category&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Graph Type"}),e.jsx("input",{type:"text",value:a.graph_type,onChange:s=>l("graph_type",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Amniotic Membrane"}),r.graph_type&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.graph_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.is_active,onChange:s=>l("is_active",s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pricing Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"National ASP ($/cm²)"}),e.jsx("input",{type:"number",step:"0.01",value:a.national_asp,onChange:s=>l("national_asp",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}),r.national_asp&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.national_asp})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per cm²"}),e.jsx("input",{type:"number",step:"0.01",value:a.price_per_sq_cm,onChange:s=>l("price_per_sq_cm",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}),r.price_per_sq_cm&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.price_per_sq_cm})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commission Rate (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.commission_rate,onChange:s=>l("commission_rate",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.0"}),r.commission_rate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.commission_rate})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Available Sizes (cm²)"}),e.jsxs("button",{type:"button",onClick:_,className:"flex items-center gap-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(x,{className:"w-4 h-4"}),"Add Size"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.available_sizes.map((s,i)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",step:"0.01",value:s,onChange:c=>N(i,c.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size in cm²"}),a.available_sizes.length>1&&e.jsx("button",{type:"button",onClick:()=>v(i),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(d,{className:"w-4 h-4"})})]},i))}),r.available_sizes&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:r.available_sizes})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Media & Documents"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Image URL"}),e.jsx("input",{type:"url",value:a.image_url,onChange:s=>l("image_url",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/image.jpg"}),r.image_url&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.image_url})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Document URLs"}),e.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(x,{className:"w-4 h-4"}),"Add Document"]})]}),e.jsx("div",{className:"space-y-3",children:a.document_urls.map((s,i)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:s,onChange:c=>C(i,c.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/document.pdf"}),a.document_urls.length>1&&e.jsx("button",{type:"button",onClick:()=>k(i),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(d,{className:"w-4 h-4"})})]},i))}),r.document_urls&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:r.document_urls})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200",children:[e.jsx(u,{href:"/products",className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(U,{className:"w-4 h-4"}),n?"Updating...":"Update Product"]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(A,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Product"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',t.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:y,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:n?"Deleting...":"Delete"})]})]})})]})]})}export{R as default};
