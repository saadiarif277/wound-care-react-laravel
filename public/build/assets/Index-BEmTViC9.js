import{r as g,j as e,S as A,x as c,A as f}from"./app-BIIu6Vfg.js";import{M as D}from"./MainLayout-DFIOg-IX.js";import{P as $}from"./PricingDisplay-BRCNy0G_.js";import{x as L,T as d,B,a3 as N,L as v,g as E,a2 as q,a4 as z,h as w,C as _}from"./index-CFCF1YSN.js";import"./x-D5uUfODk.js";import"./createLucideIcon-BEFA6UwU.js";import"./triangle-alert-BcT2QLL-.js";import"./check-DHyijvq1.js";function J({products:r,categories:h,manufacturers:u,filters:S,roleRestrictions:a}){const[x,j]=g.useState("grid"),[b,C]=g.useState(!1),[i,y]=g.useState(S),n=(s,t)=>{const l={...i,[s]:t};y(l),Object.keys(l).forEach(p=>{l[p]||delete l[p]}),f.get("/products",l,{preserveState:!0,preserveScroll:!0})},o=s=>{const t=i.sort===s&&i.direction==="asc"?"desc":"asc";n("sort",s),n("direction",t)},k=s=>{s.preventDefault();const l=new FormData(s.target).get("search");n("search",l)},F=()=>{y({}),f.get("/products")},m=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}).format(s);a.can_see_msc_pricing?a.pricing_access_level==="limited"?"msc-subrep":a.commission_access_level==="full"?"msc-admin":"provider":"office-manager";const P=({product:s})=>{var t;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-lg transition-all duration-200 overflow-hidden group",children:[e.jsxs("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100 relative",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center",children:e.jsx(d,{className:"w-12 h-12 text-gray-400"})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.category==="SkinSubstitute"?"bg-blue-100 text-blue-800":s.category==="Biologic"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.category})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1 line-clamp-2 group-hover:text-blue-600 transition-colors",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[s.manufacturer," â€¢ Q",s.q_code]})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:s.description||"No description available"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx($,{roleRestrictions:a,product:{nationalAsp:s.price_per_sq_cm,mscPrice:s.msc_price},showLabel:!0,className:"text-sm"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Sizes:"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[((t=s.available_sizes)==null?void 0:t.length)||0," available"]})]}),a.commission_access_level!=="none"&&s.commission_rate&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Commission:"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:[s.commission_rate,"%"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{href:`/products/${s.id}`,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"View Details"]}),a.can_manage_products&&e.jsx(c,{href:`/products/${s.id}/edit`,className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",title:"Edit Product",children:e.jsx(_,{className:"w-4 h-4"})})]})]})]})},M=({product:s})=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-12 h-12 object-cover rounded-lg"}):e.jsx(d,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.manufacturer})]})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:["Q",s.q_code]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.category==="SkinSubstitute"?"bg-blue-100 text-blue-800":s.category==="Biologic"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.category})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:m(s.price_per_sq_cm)}),a.can_see_msc_pricing&&e.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-blue-600",children:s.msc_price?m(s.msc_price):"N/A"}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[((t=s.available_sizes)==null?void 0:t.length)||0," sizes"]}),a.commission_access_level!=="none"&&e.jsx("td",{className:"px-6 py-4 text-sm text-green-600",children:s.commission_rate?`${s.commission_rate}%`:"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:`/products/${s.id}`,className:"text-blue-600 hover:text-blue-800 transition-colors",title:"View Product",children:e.jsx(w,{className:"w-4 h-4"})}),a.can_manage_products&&e.jsx(c,{href:`/products/${s.id}/edit`,className:"text-gray-600 hover:text-gray-800 transition-colors",title:"Edit Product",children:e.jsx(_,{className:"w-4 h-4"})})]})})]})};return e.jsxs(D,{title:"Product Catalog",children:[e.jsx(A,{title:"Product Catalog"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Catalog"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and browse MSC wound care products"})]}),a.can_manage_products&&e.jsxs(c,{href:"/products/create",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Add Product"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Available Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.total})]}),e.jsx(d,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:a.can_see_msc_pricing?"Product Categories":"Wound Types"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.length})]}),e.jsx(B,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:a.can_see_msc_pricing?"Manufacturers":"Available Brands"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length})]}),e.jsx(N,{className:"w-8 h-8 text-purple-600"})]})}),a.can_see_msc_pricing?e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg MSC Price"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m(r.data.reduce((s,t)=>s+(t.msc_price||0),0)/r.data.length||0)})]}),e.jsx(v,{className:"w-8 h-8 text-orange-600"})]})}):e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:a.can_view_financials?"Clinical Solutions":"Treatment Options"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.data.filter(s=>s.category==="Biologic"||s.category==="SkinSubstitute").length})]}),e.jsx(v,{className:"w-8 h-8 text-orange-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("form",{onSubmit:k,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",name:"search",placeholder:"Search products, Q-codes, manufacturers...",defaultValue:i.search||"",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("button",{onClick:()=>C(!b),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Filters"]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:()=>j("grid"),className:`px-3 py-2 ${x==="grid"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} transition-colors`,children:e.jsx(N,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j("list"),className:`px-3 py-2 ${x==="list"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} transition-colors`,children:e.jsx(z,{className:"w-4 h-4"})})]})]}),b&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:i.category||"",onChange:s=>n("category",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),h.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manufacturer"}),e.jsxs("select",{value:i.manufacturer||"",onChange:s=>n("manufacturer",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Manufacturers"}),u.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:F,className:"w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})})]})]})]}),x==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.data.map(s=>e.jsx(P,{product:s},s.id))}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>o("name"),children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>o("q_code"),children:"Q-Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>o("price_per_sq_cm"),children:"National ASP"}),a.can_see_msc_pricing&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MSC Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sizes"}),a.commission_access_level!=="none"&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.data.map(s=>e.jsx(M,{product:s},s.id))})]})})}),r.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]}):e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:r.links.map((s,t)=>e.jsx(c,{href:s.url||"#",className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${s.active?"bg-blue-600 text-white":s.url?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},t))})}),!a.can_see_msc_pricing&&e.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Pricing Information Restricted"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsx("p",{children:"As an Office Manager, only National ASP pricing is displayed. MSC pricing, discounts, and commission information are not available for your role."})})]})]})})]})]})}export{J as default};
