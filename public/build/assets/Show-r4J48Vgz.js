import{r as h,G as g,j as e,S as C}from"./app-taSqzBVs.js";import{M as k}from"./MainLayout-Dw1zk4VW.js";import{q as S,n as p,o as F,r as D,p as b,s as M,k as u,l as y,m as j,t as N,u as z,c as P,f as E}from"./index-BQkVVL-M.js";import"./x-tQL0mm7-.js";import"./createLucideIcon-CJpMkWaB.js";import"./triangle-alert-BOyfSih_.js";import"./check-B1Sfkp9P.js";function I({accessRequest:s,roleSpecificFields:o}){const[f,n]=h.useState(!1),[v,d]=h.useState(!1),a=g({admin_notes:""}),r=g({admin_notes:""}),w=t=>{t.preventDefault(),a.post(route("access-requests.approve",s.id),{onSuccess:()=>{n(!1)}})},_=t=>{t.preventDefault(),r.post(route("access-requests.deny",s.id),{onSuccess:()=>{d(!1)}})},c=t=>{const i={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:E,label:"Pending Review"},approved:{bg:"bg-green-100",text:"text-green-800",icon:P,label:"Approved"},denied:{bg:"bg-red-100",text:"text-red-800",icon:z,label:"Denied"}}[t],A=i.icon;return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${i.bg} ${i.text}`,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),i.label]})},x=t=>({provider:"Healthcare Provider","office-manager":"Office Manager","msc-rep":"MSC Sales Representative","msc-subrep":"MSC Sub-Representative","msc-admin":"MSC Administrator"})[t]||t,m=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(k,{children:[e.jsx(C,{title:`Access Request - ${s.first_name} ${s.last_name}`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"mr-4 p-2 text-gray-400 hover:text-gray-600",children:e.jsx(S,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Access Request Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review and manage access request"})]}),e.jsx("div",{className:"ml-4",children:c(s.status)})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(p,{className:"mr-2 h-5 w-5 text-blue-600"}),"Personal Information"]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Full Name"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[s.first_name," ",s.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Requested Role"}),e.jsx("p",{className:"text-sm text-gray-900",children:x(s.requested_role)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(F,{className:"mr-1 h-3 w-3"}),"Email Address"]}),e.jsx("p",{className:"text-sm text-gray-900",children:s.email})]}),s.phone&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(D,{className:"mr-1 h-3 w-3"}),"Phone Number"]}),e.jsx("p",{className:"text-sm text-gray-900",children:s.phone})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(b,{className:"mr-1 h-3 w-3"}),"Request Submitted"]}),e.jsx("p",{className:"text-sm text-gray-900",children:m(s.created_at)})]})]})]}),Object.keys(o).length>0&&e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(M,{className:"mr-2 h-5 w-5 text-blue-600"}),x(s.requested_role)," Details"]})}),e.jsx("div",{className:"px-6 py-4 space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(o).map(([t,l])=>l&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-900",children:l||"Not provided"})]},t))})})]}),s.request_notes&&e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(u,{className:"mr-2 h-5 w-5 text-blue-600"}),"Additional Notes"]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.request_notes})})]}),s.admin_notes&&e.jsxs("div",{className:"bg-gray-50 shadow-sm rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(u,{className:"mr-2 h-5 w-5 text-gray-600"}),"Admin Review Notes"]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.admin_notes}),s.reviewed_by&&s.reviewed_at&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Reviewed by ",s.reviewed_by.first_name," ",s.reviewed_by.last_name," on"," ",m(s.reviewed_at)]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Request Status"}),e.jsx("div",{className:"mb-4",children:c(s.status)}),s.status==="pending"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>n(!0),className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 flex items-center justify-center",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Approve Request"]}),e.jsxs("button",{onClick:()=>d(!0),className:"w-full bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 flex items-center justify-center",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Deny Request"]})]}),s.status!=="pending"&&s.reviewed_at&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{className:"flex items-center mb-1",children:[e.jsx(b,{className:"mr-1 h-3 w-3"}),"Reviewed on ",m(s.reviewed_at)]}),s.reviewed_by&&e.jsxs("p",{className:"flex items-center",children:[e.jsx(p,{className:"mr-1 h-3 w-3"}),"By ",s.reviewed_by.first_name," ",s.reviewed_by.last_name]})]})]})}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg",children:"Send Email to Applicant"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg",children:"View Similar Requests"}),s.status==="approved"&&e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg",children:"Create User Account"})]})]})})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-green-100 rounded-full mb-4",children:e.jsx(y,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-2",children:"Approve Access Request"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:"Are you sure you want to approve this access request?"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:a.data.admin_notes,onChange:t=>a.setData("admin_notes",t.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Add any notes about this approval..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a.processing,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 flex items-center justify-center",children:a.processing?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Approve"]})})]})]})]})})}),v&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx(j,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-2",children:"Deny Access Request"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:"Please provide a reason for denying this request."}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Denial *"}),e.jsx("textarea",{value:r.data.admin_notes,onChange:t=>r.setData("admin_notes",t.target.value),rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Explain why this request is being denied..."}),r.errors.admin_notes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.errors.admin_notes})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r.processing,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 disabled:opacity-50 flex items-center justify-center",children:r.processing?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Denying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Deny Request"]})})]})]})]})})})]})}export{I as default};
