import{r as t,j as d}from"./app-CkbwHOkf.js";import{c as l}from"./index-DW48STyt.js";import{c as j}from"./index-CD7V_8Mq.js";import{u as L}from"./index-De90F09_.js";import{u as k}from"./index-COQ4n3Z8.js";import{c as T,R as F,A as M,C as I,a as U}from"./index-PMIrgxBe.js";import{P as W}from"./index-CHViK9kl.js";import{P as $}from"./index-BrKfa2YN.js";import{D as z}from"./index-CJDEk-ke.js";import{c as B}from"./utils-J8bI0sT-.js";import"./index-BsB1_LdS.js";import"./floating-ui.dom-D8L_YZte.js";import"./index-B72oRj5t.js";import"./index-BDWjCInz.js";import"./clsx-B-dksMZM.js";var b,g="HoverCard",[H,Ce]=j(g,[T]),w=T(),[G,E]=H(g),O=e=>{const{__scopeHoverCard:r,children:n,open:s,defaultOpen:a,onOpenChange:c,openDelay:f=700,closeDelay:v=300}=e,i=w(r),m=t.useRef(0),u=t.useRef(0),C=t.useRef(!1),p=t.useRef(!1),[h,o]=L({prop:s,defaultProp:a??!1,onChange:c,caller:g}),x=t.useCallback(()=>{clearTimeout(u.current),m.current=window.setTimeout(()=>o(!0),f)},[f,o]),P=t.useCallback(()=>{clearTimeout(m.current),!C.current&&!p.current&&(u.current=window.setTimeout(()=>o(!1),v))},[v,o]),A=t.useCallback(()=>o(!1),[o]);return t.useEffect(()=>()=>{clearTimeout(m.current),clearTimeout(u.current)},[]),d.jsx(G,{scope:r,open:h,onOpenChange:o,onOpen:x,onClose:P,onDismiss:A,hasSelectionRef:C,isPointerDownOnContentRef:p,children:d.jsx(F,{...i,children:n})})};O.displayName=g;var y="HoverCardTrigger",N=t.forwardRef((e,r)=>{const{__scopeHoverCard:n,...s}=e,a=E(y,n),c=w(n);return d.jsx(M,{asChild:!0,...c,children:d.jsx($.a,{"data-state":a.open?"open":"closed",...s,ref:r,onPointerEnter:l(e.onPointerEnter,S(a.onOpen)),onPointerLeave:l(e.onPointerLeave,S(a.onClose)),onFocus:l(e.onFocus,a.onOpen),onBlur:l(e.onBlur,a.onClose),onTouchStart:l(e.onTouchStart,f=>f.preventDefault())})})});N.displayName=y;var K="HoverCardPortal",[he,V]=H(K,{forceMount:void 0}),R="HoverCardContent",D=t.forwardRef((e,r)=>{const n=V(R,e.__scopeHoverCard),{forceMount:s=n.forceMount,...a}=e,c=E(R,e.__scopeHoverCard);return d.jsx(W,{present:s||c.open,children:d.jsx(q,{"data-state":c.open?"open":"closed",...a,onPointerEnter:l(e.onPointerEnter,S(c.onOpen)),onPointerLeave:l(e.onPointerLeave,S(c.onClose)),ref:r})})});D.displayName=R;var q=t.forwardRef((e,r)=>{const{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:c,onInteractOutside:f,...v}=e,i=E(R,n),m=w(n),u=t.useRef(null),C=k(r,u),[p,h]=t.useState(!1);return t.useEffect(()=>{if(p){const o=document.body;return b=o.style.userSelect||o.style.webkitUserSelect,o.style.userSelect="none",o.style.webkitUserSelect="none",()=>{o.style.userSelect=b,o.style.webkitUserSelect=b}}},[p]),t.useEffect(()=>{if(u.current){const o=()=>{h(!1),i.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var P;((P=document.getSelection())==null?void 0:P.toString())!==""&&(i.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",o),()=>{document.removeEventListener("pointerup",o),i.hasSelectionRef.current=!1,i.isPointerDownOnContentRef.current=!1}}},[i.isPointerDownOnContentRef,i.hasSelectionRef]),t.useEffect(()=>{u.current&&X(u.current).forEach(x=>x.setAttribute("tabindex","-1"))}),d.jsx(z,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:l(c,o=>{o.preventDefault()}),onDismiss:i.onDismiss,children:d.jsx(I,{...m,...v,onPointerDown:l(v.onPointerDown,o=>{o.currentTarget.contains(o.target)&&h(!0),i.hasSelectionRef.current=!1,i.isPointerDownOnContentRef.current=!0}),ref:C,style:{...v.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),J="HoverCardArrow",Q=t.forwardRef((e,r)=>{const{__scopeHoverCard:n,...s}=e,a=w(n);return d.jsx(U,{...a,...s,ref:r})});Q.displayName=J;function S(e){return r=>r.pointerType==="touch"?void 0:e()}function X(e){const r=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)r.push(n.currentNode);return r}var Y=O,Z=N,_=D;const xe=Y,Pe=Z,ee=t.forwardRef(({className:e,align:r="center",sideOffset:n=4,...s},a)=>d.jsx(_,{ref:a,align:r,sideOffset:n,className:B("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));ee.displayName=_.displayName;export{xe as HoverCard,ee as HoverCardContent,Pe as HoverCardTrigger};
