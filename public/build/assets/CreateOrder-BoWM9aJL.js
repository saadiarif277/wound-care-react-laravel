import{r,j as e,S as Ze}from"./app-CkbwHOkf.js";import{M as es}from"./MainLayout-DIjIBnGe.js";import{g as ss,ab as as,F as De,i as Fe,k as ts,m as re,B as Me,P as rs,q as ls,U as is}from"./index-R2fUhcwH.js";import{A as ns,c as os}from"./react-select-async.esm-D7xsMjU4.js";import{S as cs}from"./shopping-cart-m-uzUl6t.js";import{S as ds}from"./search-B4qCXP-m.js";import{T as ms}from"./tag-CJrfyk9z.js";import{B as us}from"./building-DoOXZ5F-.js";import{D as xs}from"./dollar-sign-BlJ6QvEN.js";import{C as ps}from"./check-DXIgFk-v.js";import"./glass-theme-CCnqi7lL.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./floating-ui.dom-D8L_YZte.js";const hs=({selectedProduct:i,onProductChange:$,graphSize:p,onGraphSizeChange:le,units:v,onUnitsChange:U,expectedReimbursement:E,onExpectedReimbursementChange:B,invoiceAmountMedicare:g,onInvoiceAmountMedicareChange:H,secondaryPayer:z,onSecondaryPayerChange:W,invoiceToDoc:ie,onInvoiceToDocChange:q})=>{const[R,G]=r.useState([]),[A,J]=r.useState([]),[h,Q]=r.useState(""),[k,K]=r.useState(""),[T,V]=r.useState(""),[D,F]=r.useState(!0),[M,ne]=r.useState([]),[oe,X]=r.useState([]),[P,O]=r.useState(!1);r.useEffect(()=>{Y()},[]),r.useEffect(()=>{let t=R;h&&(t=t.filter(o=>o.name.toLowerCase().includes(h.toLowerCase())||o.q_code.toLowerCase().includes(h.toLowerCase())||o.manufacturer.toLowerCase().includes(h.toLowerCase())||o.sku.toLowerCase().includes(h.toLowerCase()))),k&&(t=t.filter(o=>o.category===k)),T&&(t=t.filter(o=>o.manufacturer===T)),J(t)},[R,h,k,T]);const Y=async()=>{try{F(!0);const o=await(await fetch("/api/products/search")).json();G(o.products||[]),ne(o.categories||[]),X(o.manufacturers||[])}catch(t){console.error("Failed to fetch products:",t)}finally{F(!1)}},Z=t=>{const o={value:t.id.toString(),label:t.name,sku:t.sku,nationalAsp:t.price_per_sq_cm,pricePerSqCm:t.msc_price,qCode:t.q_code,graphTypes:[t.category],graphSizes:t.available_sizes.map(ce=>ce.toString()),product:t};$(o),O(!1)},b=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);return r.useEffect(()=>{if(i!=null&&i.product&&p){const t=parseFloat(p);if(!isNaN(t)){const o=t*i.pricePerSqCm*v;B(o),H(o*.8),W((o*.2).toString()),q(o*.4)}}},[i,p,v]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Selection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose a product from our catalog or search for specific items"})]}),e.jsxs("button",{onClick:()=>O(!P),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(cs,{className:"w-4 h-4 mr-2"}),P?"Hide Catalog":"Browse Catalog"]})]}),i&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:i.label}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["SKU: ",i.sku]}),e.jsxs("span",{children:["Q-Code: ",i.qCode]}),e.jsxs("span",{children:["National ASP: ",b(i.nationalAsp),"/cm²"]}),e.jsxs("span",{children:["MSC Price: ",b(i.pricePerSqCm),"/cm²"]})]})]}),e.jsx("button",{onClick:()=>$(null),className:"text-red-600 hover:text-red-800",children:"Remove"})]})}),P&&e.jsxs("div",{className:"mt-4 bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Product Catalog"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[A.length," products available"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ds,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name, Q-code, manufacturer, or SKU...",value:h,onChange:t=>Q(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:k,onChange:t=>K(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),M.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsxs("select",{value:T,onChange:t=>V(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Manufacturers"}),oe.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]})]}),e.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:D?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading products..."})]}):A.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No products found matching your criteria."}):e.jsx("div",{className:"space-y-2",children:A.map(t=>e.jsx("div",{className:`border rounded-lg p-3 cursor-pointer hover:bg-gray-50 transition-colors ${(i==null?void 0:i.value)===t.id.toString()?"border-blue-500 bg-blue-50":"border-gray-200"}`,onClick:()=>Z(t),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ms,{className:"w-3 h-3 mr-1"}),"Q",t.q_code]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(us,{className:"w-3 h-3 mr-1"}),t.manufacturer]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(xs,{className:"w-3 h-3 mr-1"}),b(t.msc_price),"/cm²"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:t.description})]}),(i==null?void 0:i.value)===t.id.toString()&&e.jsx(ps,{className:"w-5 h-5 text-blue-600"})]})},t.id))})})]})]}),i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Graph Size (cm²) *"}),e.jsxs("select",{value:p,onChange:t=>le(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select size..."}),i.graphSizes.map(t=>e.jsxs("option",{value:t,children:[t," cm² - ",b(i.pricePerSqCm*parseFloat(t))]},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Units *"}),e.jsx("input",{type:"number",min:"1",value:v,onChange:t=>U(Math.max(1,parseInt(t.target.value)||1)),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Reimbursement *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:E,onChange:t=>B(parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Amount to Medicare (80%) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:g,onChange:t=>H(parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secondary Payer Amount (20%) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:parseFloat(z)||0,onChange:t=>W(t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice to Doc from Manufacturer (40%) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:ie,onChange:t=>q(parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),i&&p&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Order Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsx("span",{className:"ml-2 font-medium",children:i.label})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Size:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[p," cm²"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Units:"}),e.jsx("span",{className:"ml-2 font-medium",children:v})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Area:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[parseFloat(p)*v," cm²"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Unit Price:"}),e.jsx("span",{className:"ml-2 font-medium",children:b(i.pricePerSqCm*parseFloat(p))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-600",children:b(i.pricePerSqCm*parseFloat(p)*v)})]})]})]})]})},ua=()=>{const[i,$]=r.useState(1),[p,le]=r.useState(`ORD-${new Date().getTime()}`),[v,U]=r.useState(""),[E,B]=r.useState(""),[g,H]=r.useState(new Date),[z,W]=r.useState("net60"),[ie,q]=r.useState(""),[R,G]=r.useState(0),[A,J]=r.useState(0),[h,Q]=r.useState(0),[k,K]=r.useState(""),[T,V]=r.useState(""),[D,F]=r.useState(""),[M,ne]=r.useState(1),[oe,X]=r.useState(""),[P,O]=r.useState(0),[Y,Z]=r.useState("0"),[b,t]=r.useState(0),[o,ce]=r.useState(new Date(Date.now()+60*24*60*60*1e3)),[ee,Pe]=r.useState(0),[se,Ie]=r.useState(null),[be,je]=r.useState(0),[de,$e]=r.useState(""),[L,qe]=r.useState(40),[N,ve]=r.useState(0),[me,Ae]=r.useState("pending"),[ae,Oe]=r.useState(null),[fe,ye]=r.useState(0),[gs,bs]=r.useState(!1),[js,vs]=r.useState(""),[fs,ys]=r.useState(""),[Ss,Ns]=r.useState(0),[Cs,ws]=r.useState(0),[ue,Rs]=r.useState(null),[ks,Ts]=r.useState(!1),[Ds,Fs]=r.useState(""),[Ms,Ps]=r.useState(""),[Is,$s]=r.useState(0),[qs,As]=r.useState(0),[xe,Os]=r.useState(null),[Ls,_s]=r.useState(!1),[Us,Es]=r.useState(""),[Bs,Hs]=r.useState(""),[zs,Ws]=r.useState(0),[Gs,Js]=r.useState(0),[Qs,Ks]=r.useState(null),[Le,Se]=r.useState(null),[_e,Ne]=r.useState(null),[Ue,pe]=r.useState(!1),[Ee,Ce]=r.useState(!1),[f,I]=r.useState({name:"",type:"doctor",address:"",phone:"",email:""}),[m,y]=r.useState({name:"",sku:"",nationalAsp:0,pricePerSqCm:0,qCode:"",graphTypes:[],graphSizes:[]}),we=[{value:"1",label:"Dr. John Smith - Main Hospital",type:"doctor"},{value:"2",label:"Downtown Medical Center",type:"facility"},{value:"3",label:"Dr. Sarah Johnson - Northside Clinic",type:"doctor"}],[_,Vs]=r.useState([{id:"R1",name:"John Smith",type:"rep",parentId:null,commissionStructure:50},{id:"R2",name:"Sarah Johnson",type:"rep",parentId:null,commissionStructure:45},{id:"R3",name:"Michael Brown",type:"rep",parentId:null,commissionStructure:48},{id:"R4",name:"Lisa Davis",type:"rep",parentId:null,commissionStructure:52},{id:"R5",name:"David Wilson",type:"rep",parentId:null,commissionStructure:47},{id:"SR1",name:"Robert Taylor",type:"sub-rep",parentId:"R1",commissionStructure:35},{id:"SR2",name:"Emily Chen",type:"sub-rep",parentId:"R1",commissionStructure:30},{id:"SR3",name:"James Anderson",type:"sub-rep",parentId:"R1",commissionStructure:32},{id:"SR4",name:"Jennifer Lee",type:"sub-rep",parentId:"R2",commissionStructure:32},{id:"SR5",name:"William Clark",type:"sub-rep",parentId:"R2",commissionStructure:28},{id:"SR6",name:"Patricia Martinez",type:"sub-rep",parentId:"R3",commissionStructure:40},{id:"SR7",name:"Thomas Moore",type:"sub-rep",parentId:"R3",commissionStructure:38},{id:"SR8",name:"Richard White",type:"sub-rep",parentId:"R4",commissionStructure:42},{id:"SR9",name:"Susan Garcia",type:"sub-rep",parentId:"R4",commissionStructure:38},{id:"SR10",name:"Elizabeth Wright",type:"sub-rep",parentId:"R5",commissionStructure:36},{id:"SR11",name:"Christopher Hall",type:"sub-rep",parentId:"R5",commissionStructure:34}]),[u,Re]=r.useState([]),[S,he]=r.useState([]);r.useMemo(()=>_.map(s=>({value:s.id,label:`${s.name} (${s.commissionStructure}%)`,commissionStructure:s.commissionStructure,type:s.type})),[_]);const Be=s=>new Promise(a=>{setTimeout(()=>{const n=we.filter(c=>c.label.toLowerCase().includes(s.toLowerCase()));a(n)},300)}),He=s=>{Se(s),U((s==null?void 0:s.label)||"")},ke=s=>{Ne(s),s?(V(s.label),q(s.sku),G(s.nationalAsp),J(s.pricePerSqCm),X(s.qCode),s.graphTypes.length>0&&K(s.graphTypes[0]),s.graphSizes.length>0&&F(s.graphSizes[0])):(V(""),q(""),G(0),J(0),X(""),K(""),F(""))},ze=s=>{s.preventDefault();const a={value:Date.now().toString(),label:`${f.type==="doctor"?"Dr. ":""}${f.name}`,type:f.type};we.push(a),Se(a),U(a.label),pe(!1),I({name:"",type:"doctor",address:"",phone:"",email:""})},We=s=>{s.preventDefault();const a={value:Date.now().toString(),label:m.name,sku:m.sku,nationalAsp:m.nationalAsp,pricePerSqCm:m.pricePerSqCm,qCode:m.qCode,graphTypes:m.graphTypes,graphSizes:m.graphSizes};Ne(a),ke(a),Ce(!1),y({name:"",sku:"",nationalAsp:0,pricePerSqCm:0,qCode:"",graphTypes:[],graphSizes:[]})},Ge=s=>{if(!s)return 0;const[a,n]=s.split("x").map(Number);return isNaN(a)||isNaN(n)?(console.error("Invalid graph size format:",s),0):a*n};r.useEffect(()=>{const s=Ge(D)*(M||0),a=(R||0)*s;Q(a);const n=a*.8;O(n);const c=a*.2;Z(c.toFixed(2));const d=a*.4;t(d);const x=d*((L||0)/100);ve(x);let w=0;u.length>0&&(u.forEach(Xe=>{const Ye=x*(Xe.commissionStructure/100);w+=Ye}),ye(w));const ge=d-(ee||0);je(ge)},[R,M,D,L,u,ee]);const Je=s=>{s.preventDefault(),g==null||g.toISOString().split("T")[0],o==null||o.toISOString().split("T")[0],se==null||se.toISOString().split("T")[0],ae==null||ae.toISOString().split("T")[0],ue==null||ue.toISOString().split("T")[0],xe==null||xe.toISOString().split("T")[0]},Qe=()=>$(s=>Math.min(s+1,4)),Ke=()=>$(s=>Math.max(s-1,1)),Ve=s=>e.jsx(os.Option,{...s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:s.data.type==="doctor"?"text-blue-600":"text-green-600",children:s.data.type==="doctor"?"👨‍⚕️":"🏥"}),e.jsx("span",{children:s.data.label})]})}),j=({label:s,value:a,onChange:n,required:c=!1,icon:d=null,disabled:x=!1})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s,c&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[d&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d}),e.jsx("input",{type:"text",value:a,onChange:w=>n(w.target.value),className:`w-full py-2 ${d?"pl-10":"pl-3"} pr-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 ${x?"bg-gray-100":""}`,required:c,disabled:x})]})]}),te=({label:s,value:a,onChange:n,icon:c=null})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsxs("div",{className:"relative",children:[c&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c}),e.jsx("input",{type:"date",value:a?a.toISOString().split("T")[0]:"",onChange:d=>n(d.target.value?new Date(d.target.value):null),className:`w-full py-2 ${c?"pl-10":"pl-3"} pr-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500`})]})]}),C=({label:s,value:a,onChange:n,min:c=0,max:d,required:x=!1,disabled:w=!1})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s,x&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:c,max:d,value:a,onChange:ge=>n(parseFloat(ge.target.value)||0),className:`w-full py-2 pl-3 pr-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 ${w?"bg-gray-100":""}`,disabled:w})]}),Te=({label:s,value:a,onChange:n,options:c,icon:d=null})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsxs("div",{className:"relative",children:[d&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d}),e.jsx("select",{value:a,onChange:x=>n(x.target.value),className:`w-full py-2 ${d?"pl-10":"pl-3"} pr-8 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500`,children:c.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))})]})]}),l=({label:s,value:a,className:n=""})=>e.jsxs("div",{className:n,children:[e.jsx("p",{className:"text-sm text-gray-500",children:s}),e.jsx("p",{className:"font-medium",children:a})]});return e.jsxs(es,{children:[e.jsx(Ze,{title:"Create Wound Care Order"}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Wound Care Order Create"}),e.jsx("p",{className:"text-gray-500",children:"Create wound care product orders with detailed reimbursement tracking"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 relative",children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-1 bg-gray-200 -z-10",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${(i-1)*33.33}%`}})}),[1,2,3,4].map(s=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${i>=s?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"}`,children:i>s?e.jsx(ss,{}):s}),e.jsx("span",{className:`text-xs mt-2 ${i>=s?"text-indigo-600 font-medium":"text-gray-500"}`,children:["Order Info","Product Details","Payment & Commission","Review"][s-1]})]},s))]}),e.jsxs("form",{onSubmit:Je,className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[i===1&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:[e.jsx(as,{className:"text-indigo-600"}),"Order Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(j,{label:"Order Number",value:p,onChange:le,required:!0,icon:e.jsx(De,{className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor/Facility Name *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(ns,{value:Le,onChange:He,loadOptions:Be,defaultOptions:!0,components:{Option:Ve},placeholder:"Search doctor or facility...",className:"react-select-container",classNamePrefix:"react-select",isClearable:!0,required:!0})}),e.jsx("button",{type:"button",onClick:()=>pe(!0),className:"px-3 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200",children:e.jsx(Fe,{})})]})]}),e.jsx(j,{label:"Patient Hash (De-Identified)",value:E,onChange:B,required:!0,icon:e.jsx(ts,{className:"text-gray-400"})}),e.jsx(te,{label:"Date of Service",value:g,onChange:H,required:!0,icon:e.jsx(re,{className:"text-gray-400"})}),e.jsx(Te,{label:"Credit Terms",value:z,onChange:W,options:[{value:"net60",label:"Net-60 Terms"},{value:"net30",label:"Net-30 Terms"},{value:"net90",label:"Net-90 Terms"}],icon:e.jsx(Me,{className:"text-gray-400"})})]})]}),"          ",i===2&&e.jsxs("div",{className:"p-6",children:["              ",e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:["                ",e.jsx(Fe,{className:"text-indigo-600"}),"                Product Selection & Details              "]}),"              ",e.jsx(hs,{selectedProduct:_e,onProductChange:ke,graphSize:D,onGraphSizeChange:F,units:M,onUnitsChange:ne,expectedReimbursement:h,onExpectedReimbursementChange:Q,invoiceAmountMedicare:P,onInvoiceAmountMedicareChange:O,secondaryPayer:Y,onSecondaryPayerChange:Z,invoiceToDoc:b,onInvoiceToDocChange:t}),"            "]}),i===3&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:[e.jsx(Me,{className:"text-indigo-600"}),"Payment & Commission Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(te,{label:"Expected Collection Date",value:o,onChange:ce,icon:e.jsx(re,{className:"text-gray-400"})}),e.jsx(C,{label:"Paid to Manufacturer",value:ee,onChange:Pe,min:"0"}),e.jsx(te,{label:"Manufacturer Paid Date",value:se,onChange:Ie,icon:e.jsx(re,{className:"text-gray-400"})}),e.jsx(C,{label:"Balance Owed to Manufacturer",value:be,onChange:je,min:"0"}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes about Manufacturer Payment"}),e.jsx("textarea",{value:de,onChange:s=>$e(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),e.jsx(C,{label:"MSC Commission Structure (%)",value:L,onChange:qe,min:"0",max:"100",required:!0}),e.jsx(C,{label:"MSC Commission",value:N,onChange:ve,min:"0"}),e.jsx(Te,{label:"Payment Status",value:me,onChange:Ae,options:[{value:"paid",label:"Paid"},{value:"pending",label:"Pending"},{value:"overdue",label:"Overdue"}]}),e.jsx(te,{label:"MSC Paid Date",value:ae,onChange:Oe,icon:e.jsx(re,{className:"text-gray-400"})}),e.jsx(C,{label:"Reps Total Commission",value:fe,onChange:ye,min:"0"}),e.jsxs("div",{className:"md:col-span-2 border-t pt-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Rep Commission Structure"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Reps"}),e.jsx("div",{className:"border rounded-lg divide-y max-h-96 overflow-y-auto",children:_.filter(s=>s.type==="rep").map(s=>e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${u.some(a=>a.id===s.id)?"bg-indigo-50 border-l-4 border-indigo-500":""}`,onClick:()=>{u.some(n=>n.id===s.id)?(Re(u.filter(n=>n.id!==s.id)),he(S.filter(n=>n.parentId!==s.id))):Re([...u,s])},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Commission: ",s.commissionStructure,"%"]})]}),e.jsx("div",{className:"flex items-center",children:u.some(a=>a.id===s.id)?e.jsx("span",{className:"text-indigo-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}):e.jsx("span",{className:"text-gray-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})})]})},s.id))})]}),u.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Sub-Reps"}),e.jsx("div",{className:"border rounded-lg divide-y max-h-96 overflow-y-auto",children:_.filter(s=>s.type==="sub-rep"&&u.some(a=>a.id===s.parentId)).map(s=>{var a;return e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors pl-8 ${S.some(n=>n.id===s.id)?"bg-indigo-50 border-l-4 border-indigo-500":""}`,onClick:()=>{const n=S.some(c=>c.id===s.id);he(n?S.filter(c=>c.id!==s.id):[...S,s])},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Commission: ",s.commissionStructure,"% (Under ",(a=_.find(n=>n.id===s.parentId))==null?void 0:a.name,")"]})]}),e.jsx("div",{className:"flex items-center",children:S.some(n=>n.id===s.id)?e.jsx("span",{className:"text-indigo-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}):e.jsx("span",{className:"text-gray-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})})]})},s.id)})})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"MSC Commission Structure",value:`${L}%`}),e.jsx(l,{label:"MSC Commission",value:`$${N.toFixed(2)}`})]}),u.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Rep Commission Details"}),e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Rep Name",value:s.name}),e.jsx(l,{label:"Commission Structure",value:`${s.commissionStructure}%`}),e.jsx(l,{label:"Commission Total",value:`$${(N*(s.commissionStructure/100)).toFixed(2)}`})]}),S.filter(a=>a.parentId===s.id).map(a=>e.jsx("div",{className:"mt-4 pl-4 border-l-2 border-indigo-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Sub-Rep Name",value:a.name}),e.jsx(l,{label:"Commission Structure",value:`${a.commissionStructure}%`}),e.jsx(l,{label:"Commission Total",value:`$${(N*(s.commissionStructure/100)*(a.commissionStructure/100)).toFixed(2)}`})]})},a.id))]},s.id))})]})]})]})]})]}),i===4&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-indigo-800 mb-6 flex items-center gap-2",children:[e.jsx(De,{className:"text-indigo-600"}),"Review & Submit"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Order Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Order Number",value:p}),e.jsx(l,{label:"Doctor/Facility Name",value:v}),e.jsx(l,{label:"Patient Hash",value:E}),e.jsx(l,{label:"Date of Service",value:(g==null?void 0:g.toLocaleDateString())||""}),e.jsx(l,{label:"Credit Terms",value:z.toUpperCase()})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Product Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"SKU",value:ie}),e.jsx(l,{label:"National ASP",value:`$${R.toFixed(2)}`}),e.jsx(l,{label:"Price per sq cm",value:`$${A.toFixed(2)}`}),e.jsx(l,{label:"Graph Type",value:k}),e.jsx(l,{label:"Product Name",value:T}),e.jsx(l,{label:"Graph Size",value:D}),e.jsx(l,{label:"Units",value:M.toString()}),e.jsx(l,{label:"Q Code",value:oe}),e.jsx(l,{label:"Expected Reimbursement",value:`$${h.toFixed(2)}`}),e.jsx(l,{label:"Invoice Amount to Medicare (80%)",value:`$${P.toFixed(2)}`}),e.jsx(l,{label:"Secondary Payer Amount (20%)",value:`$${parseFloat(Y).toFixed(2)}`}),e.jsx(l,{label:"Invoice to Doc from Manufacturer (40%)",value:`$${b.toFixed(2)}`})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Payment & Commission Summary"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Expected Collection Date",value:(o==null?void 0:o.toLocaleDateString())||""}),e.jsx(l,{label:"Payment Status",value:me.charAt(0).toUpperCase()+me.slice(1)}),e.jsx(l,{label:"Paid to Manufacturer",value:`$${ee.toFixed(2)}`}),e.jsx(l,{label:"Balance Owed to Manufacturer",value:`$${be.toFixed(2)}`}),e.jsx(l,{label:"MSC Commission Structure",value:`${L}%`}),e.jsx(l,{label:"MSC Commission",value:`$${N.toFixed(2)}`}),e.jsx(l,{label:"Reps Total Commission",value:`$${fe.toFixed(2)}`})]})})]}),de&&e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-3 text-indigo-700",children:"Manufacturer Payment Notes"}),e.jsx("p",{className:"whitespace-pre-wrap",children:de})]}),u.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Rep Commission Details"}),e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Rep Name",value:s.name}),e.jsx(l,{label:"Commission Structure",value:`${s.commissionStructure}%`}),e.jsx(l,{label:"Commission Total",value:`$${(N*(s.commissionStructure/100)).toFixed(2)}`})]}),S.filter(a=>a.parentId===s.id).map(a=>e.jsx("div",{className:"mt-4 pl-4 border-l-2 border-indigo-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Sub-Rep Name",value:a.name}),e.jsx(l,{label:"Commission Structure",value:`${a.commissionStructure}%`}),e.jsx(l,{label:"Commission Total",value:`$${(N*(s.commissionStructure/100)*(a.commissionStructure/100)).toFixed(2)}`})]})},a.id))]},s.id))})]})]})]}),Ue&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Doctor/Facility"}),e.jsxs("form",{onSubmit:ze,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:f.type,onChange:s=>I(a=>({...a,type:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[e.jsx("option",{value:"doctor",children:"Doctor"}),e.jsx("option",{value:"facility",children:"Facility"})]})]}),e.jsx(j,{label:"Name",value:f.name,onChange:s=>I(a=>({...a,name:s})),required:!0}),e.jsx(j,{label:"Address",value:f.address,onChange:s=>I(a=>({...a,address:s}))}),e.jsx(j,{label:"Phone",value:f.phone,onChange:s=>I(a=>({...a,phone:s}))}),e.jsx(j,{label:"Email",value:f.email,onChange:s=>I(a=>({...a,email:s})),type:"email"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>pe(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Add"})]})]})]})}),Ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Product"}),e.jsxs("form",{onSubmit:We,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{label:"Product Name",value:m.name,onChange:s=>y(a=>({...a,name:s})),required:!0}),e.jsx(j,{label:"SKU",value:m.sku,onChange:s=>y(a=>({...a,sku:s})),required:!0}),e.jsx(C,{label:"National ASP",value:m.nationalAsp,onChange:s=>y(a=>({...a,nationalAsp:s})),min:"0",required:!0}),e.jsx(C,{label:"Price per sq cm",value:m.pricePerSqCm,onChange:s=>y(a=>({...a,pricePerSqCm:s})),min:"0",required:!0}),e.jsx(j,{label:"Q Code",value:m.qCode,onChange:s=>y(a=>({...a,qCode:s})),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Graph Types"}),e.jsx("input",{type:"text",value:m.graphTypes.join(", "),onChange:s=>y(a=>({...a,graphTypes:s.target.value.split(",").map(n=>n.trim()).filter(Boolean)})),placeholder:"Type A, Type B, Type C",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Graph Sizes"}),e.jsx("input",{type:"text",value:m.graphSizes.join(", "),onChange:s=>y(a=>({...a,graphSizes:s.target.value.split(",").map(n=>n.trim()).filter(Boolean)})),placeholder:"2x2, 4x4, 6x6",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Ce(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Add"})]})]})]})}),e.jsxs("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:[e.jsx("div",{children:i>1&&e.jsxs("button",{type:"button",onClick:Ke,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-indigo-700",children:[e.jsx(rs,{}),"Previous"]})}),e.jsx("div",{children:i<4?e.jsxs("button",{type:"button",onClick:Qe,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:["Next",e.jsx(ls,{})]}):e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(is,{}),"Submit Order"]})})]})]})]})]})};export{ua as default};
