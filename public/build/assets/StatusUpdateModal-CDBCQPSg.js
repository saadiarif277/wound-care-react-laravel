import{r as a,j as e}from"./app-CkbwHOkf.js";import{B as O}from"./Button-BFsoRR4y.js";import{X as T}from"./x-CCCTsVjU.js";import{C as n}from"./clock-BCNbb55_.js";import{C as B}from"./circle-alert-D5RtSiPV.js";import{C as $}from"./circle-check-big-BZwOB0cM.js";import"./glass-theme-CCnqi7lL.js";import"./createLucideIcon-HYdXrwBu.js";const J=({isOpen:A,onClose:L,onConfirm:P,type:i,currentStatus:g,newStatus:s,orderId:E})=>{const[p,h]=a.useState(""),[o,b]=a.useState(""),[d,j]=a.useState(""),[r,y]=a.useState(!0),[m,N]=a.useState([]),[l,v]=a.useState([]),[C,k]=a.useState(""),[w,R]=a.useState(""),[u,D]=a.useState(!1),[_,c]=a.useState(""),F=t=>{if(!t||typeof t!="string")return e.jsx(n,{className:"h-5 w-5 text-gray-500"});switch(t.toLowerCase()){case"completed":case"approved":case"verified":case"confirmed by manufacturer":return e.jsx($,{className:"h-5 w-5 text-green-500"});case"pending":case"draft":case"n/a":return e.jsx(n,{className:"h-5 w-5 text-yellow-500"});case"sent":case"submitted to manufacturer":return e.jsx(n,{className:"h-5 w-5 text-blue-500"});case"rejected":case"canceled":return e.jsx(B,{className:"h-5 w-5 text-red-500"});default:return e.jsx(n,{className:"h-5 w-5 text-gray-500"})}},U=t=>{if(!t||typeof t!="string")return"text-gray-600 bg-gray-100";switch(t.toLowerCase()){case"completed":case"approved":case"verified":case"confirmed by manufacturer":return"text-green-600 bg-green-100";case"pending":case"draft":case"n/a":return"text-yellow-600 bg-yellow-100";case"sent":case"submitted to manufacturer":return"text-blue-600 bg-blue-100";case"rejected":case"canceled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},I=async()=>{if(s==="Rejected"&&!o||s==="Canceled"&&!d){c("Please provide a reason for this status change.");return}D(!0),c("");try{const t={status:s,comments:p,rejectionReason:s==="Rejected"?o:void 0,cancellationReason:s==="Canceled"?d:void 0,sendNotification:r,notificationDocuments:r?m:void 0,statusDocuments:l.length>0?l:void 0,carrier:s==="submitted_to_manufacturer"||s==="confirmed_by_manufacturer"?C:void 0,trackingNumber:s==="submitted_to_manufacturer"||s==="confirmed_by_manufacturer"?w:void 0};await P(t),x()}catch{c("Failed to update status. Please try again.")}finally{D(!1)}},x=()=>{h(""),b(""),j(""),y(!0),N([]),v([]),k(""),R(""),c(""),L()};return A?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[F(s),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Update ",i.toUpperCase()," Status"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order #",E," - ",i.toUpperCase()]})]})]}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Status Change"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"From:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U(g)}`,children:g}),e.jsx("span",{className:"text-sm text-gray-600",children:"â†’"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U(s)}`,children:s})]})]}),(s==="Rejected"||s==="Canceled")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s==="Rejected"?"Rejection":"Cancellation"," Reason *"]}),e.jsx("textarea",{value:s==="Rejected"?o:d,onChange:t=>s==="Rejected"?b(t.target.value):j(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:`Please provide ${s.toLowerCase()} reason...`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"sendNotification",checked:r,onChange:t=>y(t.target.checked),className:"rounded"}),e.jsx("label",{htmlFor:"sendNotification",className:"text-sm font-medium text-gray-700",children:"Send notification to Provider/OM"})]}),r&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Documents (Optional)"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:t=>{const f=Array.from(t.target.files||[]);N(f)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),m.length>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:[m.length," file(s) selected"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Documents for Status Update (Optional)"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:t=>{const f=Array.from(t.target.files||[]);v(f)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-600 file:text-white hover:file:bg-green-700"}),l.length>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:[l.length," file(s) selected for status update"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["These documents will be stored with the status update and shown in the Additional Documents section.",i==="ivr"?' Documents will be marked as "IVR Document".':' Documents will be marked as "Order Related Document".']})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (Optional)"}),e.jsx("textarea",{value:p,onChange:t=>h(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Add comments for the requestor..."})]}),(s==="submitted_to_manufacturer"||s==="confirmed_by_manufacturer")&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Shipping Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carrier"}),e.jsx("input",{type:"text",value:C,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., FedEx, UPS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tracking Number"}),e.jsx("input",{type:"text",value:w,onChange:t=>R(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tracking number"})]})]})]}),_&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("p",{className:"text-sm text-red-600",children:_})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t",children:[e.jsx(O,{onClick:x,variant:"ghost",disabled:u,children:"Cancel"}),e.jsx(O,{onClick:I,disabled:u,className:"min-w-[100px]",children:u?"Updating...":"Update Status"})]})]})}):null};export{J as default};
