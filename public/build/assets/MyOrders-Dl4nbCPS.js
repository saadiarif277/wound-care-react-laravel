import{X as k,u as _,r as y,j as e,S as F,x as C}from"./app-CkbwHOkf.js";import{Z as S,ac as V,e as A,u as f,m as P,f as O,c as D,b as x,a as m}from"./index-R2fUhcwH.js";import{c as s,t as L}from"./glass-theme-CCnqi7lL.js";import{M}from"./MainLayout-DIjIBnGe.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./check-DXIgFk-v.js";function T(){const{props:l}=k(),r=l.permissions||[];return{can:n=>r.includes(n),canAny:n=>n.some(c=>r.includes(c)),canAll:n=>n.every(c=>r.includes(c)),getPermissions:()=>r,getFinancialAccess:()=>{const n=r.includes("view-financials"),c=r.includes("view-discounts"),i=r.includes("view-msc-pricing"),t=r.includes("view-order-totals"),o=r.includes("view-national-asp");return{canViewFinancials:n,canSeeDiscounts:c,canSeeMscPricing:i,canSeeOrderTotals:t,pricingAccessLevel:i&&c?"full":o?"asp":"none"}},getCommissionAccess:()=>{const n=r.includes("view-commission"),c=r.includes("view-commission-limited");return r.includes("view-commission-full")?"full":c?"limited":n?"basic":"none"}}}const E=()=>{const{can:l,getFinancialAccess:r}=T(),n=r();return{canViewPricing:l("view-national-asp")||l("view-msc-pricing"),canViewCommissions:l("view-commission"),canViewAllFinancials:l("view-financials")||l("manage-financials"),canViewMscPricing:l("view-msc-pricing"),canViewNationalAsp:l("view-national-asp"),canViewDiscounts:l("view-discounts"),financialAccess:n}};function G({auth:l,orders:r,filter:n,search:c}){const{theme:i}=_(),t=L[i],o=E(l.user.role),[p,v]=y.useState(c||""),[u,b]=y.useState(n||"all"),j=a=>{const d={draft:{color:i==="dark"?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700",icon:m,label:"Draft"},submitted:{color:i==="dark"?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800",icon:m,label:"Submitted"},ivr_pending:{color:i==="dark"?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-800",icon:m,label:"IVR Pending"},ivr_approved:{color:i==="dark"?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800",icon:x,label:"IVR Approved"},order_form_pending:{color:i==="dark"?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-800",icon:m,label:"Order Form Pending"},order_form_signed:{color:i==="dark"?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800",icon:x,label:"Order Form Signed"},approved:{color:i==="dark"?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800",icon:x,label:"Approved"},shipped:{color:i==="dark"?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-800",icon:f,label:"Shipped"},delivered:{color:i==="dark"?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800",icon:x,label:"Delivered"},cancelled:{color:i==="dark"?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800",icon:D,label:"Cancelled"}},g=d[a]||d.draft,N=g.icon;return e.jsxs("span",{className:s("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",g.color),children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),g.label]})},h=r.filter(a=>{if(u!=="all"&&a.status!==u)return!1;if(p){const d=p.toLowerCase();return a.order_number.toLowerCase().includes(d)||a.patient_name.toLowerCase().includes(d)||a.product_name.toLowerCase().includes(d)||a.product_code.toLowerCase().includes(d)}return!0}),w=()=>{console.log("Exporting orders...")};return e.jsxs(M,{title:"My Orders",children:[e.jsx(F,{title:"My Orders"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:s("text-2xl font-bold",t.text.primary),children:"My Orders"}),e.jsx("p",{className:s("mt-1",t.text.secondary),children:"Track and manage your submitted orders"})]}),e.jsx("div",{className:s("mb-6 p-4 rounded-lg",t.glass.card),children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:s("absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5",t.text.tertiary)}),e.jsx("input",{type:"text",placeholder:"Search by order #, patient, or product...",value:p,onChange:a=>v(a.target.value),className:s("w-full pl-10 pr-4 py-2 rounded-lg border",t.input.base,t.input.focus)})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(V,{className:s("h-5 w-5",t.text.secondary)}),e.jsxs("select",{value:u,onChange:a=>b(a.target.value),className:s("px-4 py-2 rounded-lg border",t.input.base,t.input.focus),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"ivr_pending",children:"IVR Pending"}),e.jsx("option",{value:"ivr_approved",children:"IVR Approved"}),e.jsx("option",{value:"order_form_pending",children:"Order Form Pending"}),e.jsx("option",{value:"order_form_signed",children:"Order Form Signed"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("button",{onClick:w,className:s("inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors",i==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),e.jsx("div",{className:s("overflow-hidden rounded-lg",t.glass.card),children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:s(i==="dark"?"bg-gray-800/50":"bg-gray-50"),children:e.jsxs("tr",{children:[e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Order #"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Date"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Patient"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Product"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Facility"}),o.canViewPricing&&e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Price"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Status"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",t.text.secondary),children:"Actions"})]})}),e.jsx("tbody",{className:s("divide-y",i==="dark"?"divide-gray-700":"divide-gray-200"),children:h.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:o.canViewPricing?8:7,className:"px-6 py-8 text-center",children:[e.jsx(f,{className:s("h-12 w-12 mx-auto mb-3",t.text.tertiary)}),e.jsx("p",{className:s("text-sm",t.text.secondary),children:"No orders found matching your criteria"})]})}):h.map(a=>e.jsxs("tr",{className:s("hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"),children:[e.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm font-medium",t.text.primary),children:a.order_number}),e.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",t.text.secondary),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),new Date(a.created_at).toLocaleDateString()]})}),e.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",t.text.primary),children:a.patient_name}),e.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",t.text.primary),children:e.jsxs("div",{children:[e.jsx("div",{children:a.product_name}),e.jsx("div",{className:s("text-xs",t.text.secondary),children:a.product_code})]})}),e.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",t.text.secondary),children:a.facility_name||"N/A"}),o.canViewPricing&&e.jsxs("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",t.text.primary),children:["$",(Number(a.asp_price)||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[j(a.status),a.tracking_number&&e.jsxs("div",{className:s("text-xs mt-1",t.text.secondary),children:["Track: ",a.tracking_number]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs(C,{href:`/quick-requests/order-summary/${a.id}`,className:s("inline-flex items-center text-sm font-medium transition-colors",i==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"),children:[e.jsx(O,{className:"mr-1 h-4 w-4"}),"View"]})})]},a.id))})]})})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:s("p-4 rounded-lg",t.glass.card),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.secondary),children:"Total Orders"}),e.jsx("p",{className:s("text-2xl font-bold mt-1",t.text.primary),children:r.length})]}),e.jsxs("div",{className:s("p-4 rounded-lg",t.glass.card),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.secondary),children:"Pending"}),e.jsx("p",{className:s("text-2xl font-bold mt-1",t.text.primary),children:r.filter(a=>["submitted","ivr_pending","order_form_pending"].includes(a.status)).length})]}),e.jsxs("div",{className:s("p-4 rounded-lg",t.glass.card),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.secondary),children:"Approved"}),e.jsx("p",{className:s("text-2xl font-bold mt-1",t.text.primary),children:r.filter(a=>a.status==="approved").length})]}),e.jsxs("div",{className:s("p-4 rounded-lg",t.glass.card),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.secondary),children:"Delivered"}),e.jsx("p",{className:s("text-2xl font-bold mt-1",t.text.primary),children:r.filter(a=>a.status==="delivered").length})]})]})]})})]})}export{G as default};
