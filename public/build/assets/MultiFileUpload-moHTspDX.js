import{u as K,r as c,j as t}from"./app-CkbwHOkf.js";import{B as C}from"./Button-BFsoRR4y.js";import{t as A,c as n}from"./glass-theme-CCnqi7lL.js";import{U as H}from"./upload-D34_G3qK.js";import{C as J}from"./circle-alert-D5RtSiPV.js";import{T as Q}from"./trash-2-N2vmfG2C.js";import{F as E}from"./file-text-3MfHY30h.js";import{E as R}from"./eye-2c1yoxJs.js";import{I as V}from"./image-CwggCtEq.js";import{F as X}from"./file-BrP07e8W.js";function le({title:M,description:Y="Drag and drop files here or click to browse",accept:p=".pdf,.doc,.docx,.jpg,.jpeg,.png",maxFiles:u=10,maxFileSize:y=10*1024*1024,onFilesChange:h,onFileRemove:x,className:$,disabled:g=!1,showPreview:z=!0}){let j="dark",o=A.dark;try{j=K().theme,o=A[j]}catch{}const[a,w]=c.useState([]),[b,v]=c.useState(!1),[N,k]=c.useState(null),d=c.useRef(null),D=e=>{if(e===0)return"0 Bytes";const r=1024,s=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,i)).toFixed(2))+" "+s[i]},B=e=>e.startsWith("image/")?V:e==="application/pdf"?E:X,P=e=>{var f;if(e.size>y)return`File size exceeds ${D(y)} limit`;if(a.length>=u)return`Maximum ${u} files allowed`;const r=p.split(",").map(l=>l.trim()),s="."+((f=e.name.split(".").pop())==null?void 0:f.toLowerCase()),i=e.type;return r.some(l=>{if(l.startsWith("."))return s===l.toLowerCase();if(l.includes("/*")){const G=l.split("/")[0];return i.startsWith(G+"/")}return i===l})?null:`File type not supported. Accepted types: ${p}`},T=async e=>{if(e.type.startsWith("image/"))return new Promise(r=>{const s=new FileReader;s.onload=i=>{var m;return r((m=i.target)==null?void 0:m.result)},s.readAsDataURL(e)})},F=c.useCallback(async e=>{k(null);const r=[];for(const s of Array.from(e)){const i=P(s);if(i){k(i);continue}const m=await T(s),f={id:`${Date.now()}-${Math.random()}`,file:s,name:s.name,size:s.size,type:s.type,preview:m,uploadedAt:new Date};r.push(f)}if(r.length>0){const s=[...a,...r];w(s),h(s)}},[a,u,y,p,h]),I=c.useCallback(e=>{const r=a.filter(s=>s.id!==e);w(r),h(r),x==null||x(e)},[a,h,x]),L=e=>{const r=e.target.files;r&&F(r),d.current&&(d.current.value="")},U=e=>{e.preventDefault(),e.stopPropagation(),v(!0)},W=e=>{e.preventDefault(),e.stopPropagation(),v(!1)},O=e=>{e.preventDefault(),e.stopPropagation()},S=e=>{e.preventDefault(),e.stopPropagation(),v(!1);const r=e.dataTransfer.files;r.length>0&&F(r)},q=()=>{!g&&d.current&&d.current.click()};return t.jsxs("div",{className:n("space-y-3",$),children:[t.jsx("div",{className:n("border border-dashed rounded-md p-2 transition-all duration-200 w-fit",b?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500",g&&"opacity-50 cursor-not-allowed",!g&&"cursor-pointer"),onDragEnter:U,onDragLeave:W,onDragOver:O,onDrop:S,onClick:q,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(H,{className:n("w-4 h-4",b?"text-blue-500":"text-gray-400")}),t.jsx("span",{className:n("text-sm font-medium",o.text.primary),children:M})]})}),N&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[t.jsx(J,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:n("text-sm",o.status.error),children:N})]}),a.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:n("text-sm font-medium",o.text.primary),children:["Uploaded Files (",a.length,"/",u,")"]}),t.jsx("div",{className:"space-y-2",children:a.map(e=>{const r=B(e.type);return t.jsxs("div",{className:n("flex items-center justify-between p-2 rounded-md border","bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"),children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t.jsx(r,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:n("text-sm font-medium truncate",o.text.primary),children:e.name}),t.jsx("p",{className:n("text-xs",o.text.secondary),children:D(e.size)})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx(C,{variant:"ghost",size:"sm",onClick:()=>I(e.id),className:"text-red-500 hover:text-red-700 p-1",children:t.jsx(Q,{className:"w-3 h-3"})})})]},e.id)})}),z&&a.some(e=>e.preview)&&t.jsxs("div",{className:"border-t pt-3",children:[t.jsx("h5",{className:n("text-sm font-medium mb-2",o.text.primary),children:"Previews"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:a.map(e=>e.preview?t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"aspect-square rounded-md border border-gray-200 dark:border-gray-700 overflow-hidden bg-gray-50 dark:bg-gray-800",children:e.type.startsWith("image/")?t.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(E,{className:"w-5 h-5 text-gray-400"})})}),t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center",children:t.jsx(C,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 text-white hover:text-white p-1",onClick:()=>{const r=window.open();r&&r.document.write(`
                                <html>
                                  <head><title>${e.name}</title></head>
                                  <body style="margin:0;padding:20px;text-align:center;">
                                    <img src="${e.preview}" style="max-width:100%;max-height:80vh;" />
                                  </body>
                                </html>
                              `)},children:t.jsx(R,{className:"w-3 h-3"})})}),t.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:e.name})]},`preview-${e.id}`):null)})]})]}),t.jsx("input",{ref:d,type:"file",multiple:!0,accept:p,onChange:L,className:"hidden",disabled:g})]})}export{le as M};
