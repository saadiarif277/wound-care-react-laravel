import{u as L,r as g,G as T,j as e,S as G,A as u}from"./app-CkbwHOkf.js";import{M as I}from"./MainLayout-DIjIBnGe.js";import{c as t,t as $}from"./glass-theme-CCnqi7lL.js";import{T as R,i as N,h as B,u as X,B as J,af as v,F as y,ag as K,n as _,ah as Q,ai as V,ab as W,U as H}from"./index-R2fUhcwH.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./check-DXIgFk-v.js";function ce({categories:w,manufacturers:z}){const{theme:C}=L(),s=$[C],[m,k]=g.useState("basic"),[Y,Z]=g.useState(!1),[h,f]=g.useState([]),p=a=>{const l=typeof a=="string"?parseFloat(a):a;return l&&!isNaN(l)?l.toFixed(2):"0.00"},d=a=>{const l=typeof a=="string"?parseFloat(a):a;return l&&!isNaN(l)?l:0},{data:i,setData:c,processing:b,errors:r}=T({sku:"",q_code:"",name:"",description:"",manufacturer:"",category:"",price_per_sq_cm:0,national_asp:0,commission_rate:0,available_sizes:[],size_options:[],size_unit:"cm",mue:0,graph_type:"",is_active:!0,image_url:"",documents:[]}),S=a=>{a.preventDefault();const l=new FormData;Object.entries(i).forEach(([n,o])=>{n==="documents"?o.forEach((x,j)=>{l.append(`documents[${j}]`,x)}):Array.isArray(o)?o.forEach((x,j)=>{l.append(`${n}[${j}]`,String(x))}):l.append(n,String(o))}),u.post("/products",l,{forceFormData:!0,onSuccess:()=>{},onError:n=>{console.error("Form submission errors:",n)}})},F=a=>{if(!a)return;const l=Array.from(a);c("documents",[...i.documents,...l]);const n=l.map(o=>URL.createObjectURL(o));f(o=>[...o,...n])},P=a=>{const l=i.documents.filter((n,o)=>o!==a);c("documents",l),URL.revokeObjectURL(h[a]),f(n=>n.filter((o,x)=>x!==a))},D=()=>{c("available_sizes",[...i.available_sizes,0])},U=(a,l)=>{const n=[...i.available_sizes];n[a]=l,c("available_sizes",n)},q=a=>{c("available_sizes",i.available_sizes.filter((l,n)=>n!==a))},A=()=>{c("size_options",[...i.size_options,""])},E=(a,l)=>{const n=[...i.size_options];n[a]=l,c("size_options",n)},O=a=>{c("size_options",i.size_options.filter((l,n)=>n!==a))},M=[{id:"basic",label:"Basic Info",icon:X},{id:"pricing",label:"Pricing",icon:J},{id:"sizes",label:"Sizes",icon:v},{id:"documents",label:"Documents",icon:y}];return e.jsxs(I,{children:[e.jsx(G,{title:"Create New Product"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:t("p-6 rounded-2xl",s.glass.card),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("button",{onClick:()=>u.get("/products"),className:t("p-2 rounded-xl transition-all",s.button.ghost.base,s.button.ghost.hover),children:e.jsx(R,{className:"w-5 h-5"})}),e.jsxs("h1",{className:t("text-3xl font-bold flex items-center gap-3",s.text.primary),children:[e.jsx(N,{className:"w-8 h-8 text-blue-500"}),"Create New Product"]})]}),e.jsx("p",{className:t("text-sm",s.text.secondary),children:"Add a new wound care product to your catalog with pricing and documentation"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>u.get("/products"),className:t("flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all",s.button.ghost.base,s.button.ghost.hover),children:[e.jsx(B,{className:"w-4 h-4"}),"Cancel"]})})]}),e.jsx("div",{className:t("mt-6 p-4 rounded-xl",s.glass.frost),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:t("text-lg font-bold",s.text.primary),children:p(i.price_per_sq_cm)}),e.jsx("div",{className:t("text-xs",s.text.secondary),children:"Price per cm²"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:t("text-lg font-bold text-green-500"),children:[d(i.commission_rate),"%"]}),e.jsx("div",{className:t("text-xs",s.text.secondary),children:"Commission"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:t("text-lg font-bold",s.text.primary),children:i.available_sizes.length+i.size_options.length}),e.jsx("div",{className:t("text-xs",s.text.secondary),children:"Size Options"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:t("text-lg font-bold",s.text.primary),children:i.documents.length}),e.jsx("div",{className:t("text-xs",s.text.secondary),children:"Documents"})]})]})})]}),e.jsxs("div",{className:t("rounded-2xl",s.glass.card),children:[e.jsx("div",{className:"border-b border-white/10",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:M.map(a=>{const l=a.icon;return e.jsxs("button",{onClick:()=>k(a.id),className:t("flex items-center gap-2 py-4 px-2 border-b-2 font-medium text-sm transition-all",m===a.id?"border-blue-500 text-blue-400":t("border-transparent",s.text.secondary,"hover:text-blue-400")),children:[e.jsx(l,{className:"w-4 h-4"}),a.label]},a.id)})})}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[m==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Product Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:a=>c("name",a.target.value),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,r.name&&"border-red-500"),placeholder:"Enter product name..."}),r.name&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"SKU *"}),e.jsx("input",{type:"text",value:i.sku,onChange:a=>c("sku",a.target.value),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,r.sku&&"border-red-500"),placeholder:"Enter SKU..."}),r.sku&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Q-Code *"}),e.jsx("input",{type:"text",value:i.q_code,onChange:a=>c("q_code",a.target.value),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,r.q_code&&"border-red-500"),placeholder:"Enter Q-code..."}),r.q_code&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.q_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Manufacturer *"}),e.jsxs("select",{value:i.manufacturer,onChange:a=>c("manufacturer",a.target.value),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,r.manufacturer&&"border-red-500"),children:[e.jsx("option",{value:"",children:"Select manufacturer..."}),z.map(a=>e.jsx("option",{value:a,children:a},a))]}),r.manufacturer&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.manufacturer})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Category *"}),e.jsxs("select",{value:i.category,onChange:a=>c("category",a.target.value),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,r.category&&"border-red-500"),children:[e.jsx("option",{value:"",children:"Select category..."}),w.map(a=>e.jsx("option",{value:a,children:a},a))]}),r.category&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:i.is_active,onChange:()=>c("is_active",!0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:t("text-sm",s.text.primary),children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:!i.is_active,onChange:()=>c("is_active",!1),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:t("text-sm",s.text.primary),children:"Inactive"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Description"}),e.jsx("textarea",{value:i.description,onChange:a=>c("description",a.target.value),rows:4,className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,r.description&&"border-red-500"),placeholder:"Enter product description..."}),r.description&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Product Image URL"}),e.jsx("input",{type:"url",value:i.image_url,onChange:a=>c("image_url",a.target.value),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"https://example.com/image.jpg"}),i.image_url&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:i.image_url,alt:"Product preview",className:"w-32 h-32 object-cover rounded-xl",onError:a=>{a.currentTarget.style.display="none"}})})]})]}),m==="pricing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Price per cm² *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:t("absolute left-3 top-1/2 transform -translate-y-1/2",s.text.secondary),children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.price_per_sq_cm,onChange:a=>c("price_per_sq_cm",d(a.target.value)),className:t("w-full pl-8 pr-4 py-3 rounded-xl",s.input.base,s.input.focus,r.price_per_sq_cm&&"border-red-500"),placeholder:"0.00"})]}),r.price_per_sq_cm&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.price_per_sq_cm})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"National ASP"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:t("absolute left-3 top-1/2 transform -translate-y-1/2",s.text.secondary),children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.national_asp,onChange:a=>c("national_asp",d(a.target.value)),className:t("w-full pl-8 pr-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Commission Rate *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:i.commission_rate,onChange:a=>c("commission_rate",d(a.target.value)),className:t("w-full pr-8 pl-4 py-3 rounded-xl",s.input.base,s.input.focus,r.commission_rate&&"border-red-500"),placeholder:"0.0"}),e.jsx("span",{className:t("absolute right-3 top-1/2 transform -translate-y-1/2",s.text.secondary),children:"%"})]}),r.commission_rate&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:r.commission_rate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"MUE Limit"}),e.jsx("input",{type:"number",min:"0",value:i.mue,onChange:a=>c("mue",d(a.target.value)),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"Maximum Units of Eligibility"}),e.jsx("p",{className:t("text-xs mt-1",s.text.secondary),children:"Maximum units that can be billed per patient"})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Graph Type"}),e.jsxs("select",{value:i.graph_type,onChange:a=>c("graph_type",a.target.value),className:t("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus),children:[e.jsx("option",{value:"",children:"Select graph type..."}),e.jsx("option",{value:"linear",children:"Linear"}),e.jsx("option",{value:"exponential",children:"Exponential"}),e.jsx("option",{value:"logarithmic",children:"Logarithmic"})]})]})]}),e.jsxs("div",{className:t("p-4 rounded-xl",s.glass.frost),children:[e.jsx("h3",{className:t("text-sm font-medium mb-3",s.text.primary),children:"Pricing Preview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:t("block",s.text.secondary),children:"1 cm²"}),e.jsxs("span",{className:t("font-medium",s.text.primary),children:["$",p(i.price_per_sq_cm)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:t("block",s.text.secondary),children:"10 cm²"}),e.jsxs("span",{className:t("font-medium",s.text.primary),children:["$",p(i.price_per_sq_cm*10)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:t("block",s.text.secondary),children:"25 cm²"}),e.jsxs("span",{className:t("font-medium",s.text.primary),children:["$",p(i.price_per_sq_cm*25)]})]})]})]})]}),m==="sizes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Size Unit"}),e.jsxs("select",{value:i.size_unit,onChange:a=>c("size_unit",a.target.value),className:t("w-full px-4 py-3 rounded-xl max-w-xs",s.input.base,s.input.focus),children:[e.jsx("option",{value:"cm",children:"Centimeters (cm²)"}),e.jsx("option",{value:"inches",children:"Inches"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:t("text-lg font-medium",s.text.primary),children:["Available Sizes (",i.size_unit==="cm"?"cm²":"inches",")"]}),e.jsxs("button",{type:"button",onClick:D,className:t("flex items-center gap-2 px-3 py-2 rounded-lg text-sm",s.button.primary.base,s.button.primary.hover),children:[e.jsx(N,{className:"w-4 h-4"}),"Add Size"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:i.available_sizes.map((a,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",step:"0.1",value:a,onChange:n=>U(l,d(n.target.value)),className:t("flex-1 px-3 py-2 rounded-lg text-sm",s.input.base,s.input.focus),placeholder:"0"}),e.jsx("button",{type:"button",onClick:()=>q(l),className:t("p-2 rounded-lg text-red-500 hover:bg-red-500/10"),children:e.jsx(K,{className:"w-3 h-3"})})]},l))}),i.available_sizes.length===0&&e.jsxs("div",{className:t("text-center py-8",s.glass.frost,"rounded-xl"),children:[e.jsx(v,{className:t("w-12 h-12 mx-auto mb-3",s.text.muted)}),e.jsx("p",{className:t("text-sm",s.text.secondary),children:'No sizes configured. Click "Add Size" to get started.'})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:t("text-lg font-medium",s.text.primary),children:"Size Options (Text Format)"}),e.jsx("p",{className:t("text-sm",s.text.secondary),children:'Alternative text-based size options (e.g., "Small", "Medium", "Large")'})]}),e.jsxs("button",{type:"button",onClick:A,className:t("flex items-center gap-2 px-3 py-2 rounded-lg text-sm",s.button.secondary.base,s.button.secondary.hover),children:[e.jsx(N,{className:"w-4 h-4"}),"Add Option"]})]}),e.jsx("div",{className:"space-y-3",children:i.size_options.map((a,l)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:a,onChange:n=>E(l,n.target.value),className:t("flex-1 px-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"Enter size option..."}),e.jsx("button",{type:"button",onClick:()=>O(l),className:t("p-3 rounded-xl text-red-500 hover:bg-red-500/10"),children:e.jsx(_,{className:"w-4 h-4"})})]},l))}),i.size_options.length===0&&e.jsxs("div",{className:t("text-center py-8",s.glass.frost,"rounded-xl"),children:[e.jsx(v,{className:t("w-12 h-12 mx-auto mb-3",s.text.muted)}),e.jsx("p",{className:t("text-sm",s.text.secondary),children:"No size options configured. This is optional."})]})]})]}),m==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-4",s.text.primary),children:"Upload Documents"}),e.jsxs("div",{className:t("border-2 border-dashed rounded-xl p-8 text-center transition-colors","border-blue-500/30 hover:border-blue-500/50",s.glass.frost),children:[e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif",onChange:a=>F(a.target.files),className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(Q,{className:t("w-12 h-12 mx-auto mb-4",s.text.secondary)}),e.jsx("p",{className:t("text-lg font-medium mb-2",s.text.primary),children:"Drop files here or click to upload"}),e.jsx("p",{className:t("text-sm",s.text.secondary),children:"Supports PDF, DOC, DOCX, JPG, PNG, GIF (max 10MB each)"})]})]})]}),i.documents.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:t("text-lg font-medium mb-4",s.text.primary),children:["Documents to Upload (",i.documents.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.documents.map((a,l)=>e.jsxs("div",{className:t("p-4 rounded-xl border transition-all","border-blue-500/30 bg-blue-500/5"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.type.startsWith("image/")?e.jsx(V,{className:"w-6 h-6 flex-shrink-0 text-blue-500"}):e.jsx(y,{className:"w-6 h-6 flex-shrink-0 text-blue-500"}),e.jsx("button",{type:"button",onClick:()=>P(l),className:"text-red-500 hover:text-red-700",children:e.jsx(_,{className:"w-4 h-4"})})]}),e.jsx("p",{className:t("text-sm font-medium mb-1 truncate",s.text.primary),children:a.name}),e.jsxs("p",{className:t("text-xs",s.text.secondary),children:[(a.size/1024/1024).toFixed(2)," MB"]}),a.type.startsWith("image/")&&h[l]&&e.jsx("img",{src:h[l],alt:"Preview",className:"w-full h-20 object-cover rounded-lg mt-3"})]},l))})]}),e.jsx("div",{className:t("p-4 rounded-xl",s.status.info),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(W,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Document Guidelines"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"• Upload product specifications, clinical studies, or marketing materials"}),e.jsx("li",{children:"• Supported formats: PDF, DOC, DOCX, JPG, PNG, GIF"}),e.jsx("li",{children:"• Maximum file size: 10MB per file"}),e.jsx("li",{children:"• Documents will be available to authorized users"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-white/10",children:[e.jsx("button",{type:"button",onClick:()=>u.get("/products"),className:t("px-6 py-3 rounded-xl font-medium",s.button.ghost.base,s.button.ghost.hover),children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:t("flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all",b?"bg-gray-400 cursor-not-allowed":t(s.button.primary.base,s.button.primary.hover)),children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4"}),"Create Product"]})})]})]})]})]})]})}export{ce as default};
