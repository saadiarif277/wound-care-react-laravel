import{u as J,r as j,G as K,c as W,j as e,S as Y,A as b,R as Z}from"./app-CkbwHOkf.js";import{M as ee}from"./MainLayout-DIjIBnGe.js";import{c as a,t as se}from"./glass-theme-CCnqi7lL.js";import{_ as te,f as ae,h as ie,u as C,B as le,af as f,F as v,aj as F,i as P,ag as re,n as _,ah as ne,ak as ce,e as me,ai as de,ab as D,U as oe}from"./index-R2fUhcwH.js";import"./x-CCCTsVjU.js";import"./createLucideIcon-HYdXrwBu.js";import"./triangle-alert-D2zL4pqG.js";import"./check-DXIgFk-v.js";function ve({product:n,categories:E,manufacturers:U}){const{theme:q}=J(),s=se[q],[x,A]=j.useState("basic"),[xe,pe]=j.useState(!1),[N,w]=j.useState([]),[g,$]=j.useState([]),[T,k]=j.useState(!1),u=t=>{const i=typeof t=="string"?parseFloat(t):t;return i&&!isNaN(i)?i.toFixed(2):"0.00"},o=t=>{const i=typeof t=="string"?parseFloat(t):t;return i&&!isNaN(i)?i:0},{data:l,setData:m,processing:y,errors:d}=K({sku:n.sku||"",q_code:n.q_code||"",name:n.name||"",description:n.description||"",manufacturer:n.manufacturer||"",category:n.category||"",price_per_sq_cm:o(n.price_per_sq_cm),national_asp:o(n.national_asp),commission_rate:o(n.commission_rate),available_sizes:n.available_sizes||[],size_options:n.size_options||[],size_unit:n.size_unit||"cm",mue:o(n.mue),graph_type:n.graph_type||"",is_active:n.is_active??!0,image_url:n.image_url||"",document_urls:n.document_urls||[],new_documents:[],remove_documents:[]}),M=t=>{t.preventDefault();const i=new FormData;Object.entries(l).forEach(([c,r])=>{c==="new_documents"?r.forEach((p,h)=>{i.append(`new_documents[${h}]`,p)}):Array.isArray(r)?r.forEach((p,h)=>{i.append(`${c}[${h}]`,String(p))}):i.append(c,String(r))}),b.post(`/products/${n.id}`,i,{forceFormData:!0,onSuccess:()=>{},onError:c=>{console.error("Form submission errors:",c)}})},O=t=>{if(!t)return;const i=Array.from(t);m("new_documents",[...l.new_documents,...i]);const c=i.map(r=>URL.createObjectURL(r));w(r=>[...r,...c])},L=t=>{const i=l.new_documents.filter((c,r)=>r!==t);m("new_documents",i),URL.revokeObjectURL(N[t]),w(c=>c.filter((r,p)=>p!==t))},R=t=>{m("remove_documents",[...l.remove_documents,t]),m("document_urls",l.document_urls.filter(i=>i!==t))},G=()=>{m("available_sizes",[...l.available_sizes,0])},H=(t,i)=>{const c=[...l.available_sizes];c[t]=i,m("available_sizes",c)},I=t=>{m("available_sizes",l.available_sizes.filter((i,c)=>c!==t))},B=()=>{m("size_options",[...l.size_options,""])},V=(t,i)=>{const c=[...l.size_options];c[t]=i,m("size_options",c)},Q=t=>{m("size_options",l.size_options.filter((i,c)=>c!==t))};j.useEffect(()=>{x==="history"&&g.length===0&&(k(!0),W.get(`/products/${n.id}/pricing-history`).then(t=>{$(t.data.history||[])}).catch(t=>{console.error("Failed to fetch pricing history:",t)}).finally(()=>{k(!1)}))},[x,n.id,g.length]);const X=[{id:"basic",label:"Basic Info",icon:C},{id:"pricing",label:"Pricing",icon:le},{id:"sizes",label:"Sizes",icon:f},{id:"documents",label:"Documents",icon:v},{id:"history",label:"Pricing History",icon:F}];return e.jsxs(ee,{children:[e.jsx(Y,{title:`Edit Product - ${n.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:a("p-6 rounded-2xl",s.glass.card),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:a("text-3xl font-bold flex items-center gap-3",s.text.primary),children:[e.jsx(te,{className:"w-8 h-8 text-blue-500"}),"Edit Product"]}),e.jsx("p",{className:a("text-sm mt-2",s.text.secondary),children:"Update product information, pricing, and documentation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>b.get(`/products/${n.id}`),className:a("flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all",s.button.secondary.base,s.button.secondary.hover),children:[e.jsx(ae,{className:"w-4 h-4"}),"View Product"]}),e.jsxs("button",{onClick:()=>b.get("/products"),className:a("flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all",s.button.ghost.base,s.button.ghost.hover),children:[e.jsx(ie,{className:"w-4 h-4"}),"Cancel"]})]})]}),e.jsx("div",{className:a("mt-6 p-4 rounded-xl",s.glass.frost),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-xl flex items-center justify-center",children:n.image_url?e.jsx("img",{src:n.image_url,alt:n.name,className:"w-full h-full object-cover rounded-xl"}):e.jsx(C,{className:a("w-8 h-8",s.text.muted)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:a("text-lg font-semibold",s.text.primary),children:n.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("span",{className:a("text-sm",s.text.secondary),children:["Q",n.q_code," â€¢ ",n.sku]}),e.jsx("span",{className:a("text-sm",s.text.secondary),children:n.manufacturer}),e.jsx("span",{className:a("px-2 py-1 text-xs font-medium rounded-full",n.is_active?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:n.is_active?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:a("text-lg font-bold",s.text.primary),children:["$",u(n.price_per_sq_cm),"/cmÂ²"]}),e.jsxs("div",{className:"text-sm text-green-500",children:[n.commission_rate,"% commission"]})]})]})})]}),e.jsxs("div",{className:a("rounded-2xl",s.glass.card),children:[e.jsx("div",{className:"border-b border-white/10",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:X.map(t=>{const i=t.icon;return e.jsxs("button",{onClick:()=>A(t.id),className:a("flex items-center gap-2 py-4 px-2 border-b-2 font-medium text-sm transition-all",x===t.id?"border-blue-500 text-blue-400":a("border-transparent",s.text.secondary,"hover:text-blue-400")),children:[e.jsx(i,{className:"w-4 h-4"}),t.label]},t.id)})})}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[x==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Product Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:t=>m("name",t.target.value),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,d.name&&"border-red-500"),placeholder:"Enter product name..."}),d.name&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"SKU *"}),e.jsx("input",{type:"text",value:l.sku,onChange:t=>m("sku",t.target.value),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,d.sku&&"border-red-500"),placeholder:"Enter SKU..."}),d.sku&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Q-Code *"}),e.jsx("input",{type:"text",value:l.q_code,onChange:t=>m("q_code",t.target.value),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,d.q_code&&"border-red-500"),placeholder:"Enter Q-code..."}),d.q_code&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.q_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Manufacturer *"}),e.jsxs("select",{value:l.manufacturer,onChange:t=>m("manufacturer",t.target.value),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,d.manufacturer&&"border-red-500"),children:[e.jsx("option",{value:"",children:"Select manufacturer..."}),U.map(t=>e.jsx("option",{value:t,children:t},t))]}),d.manufacturer&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.manufacturer})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Category *"}),e.jsxs("select",{value:l.category,onChange:t=>m("category",t.target.value),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,d.category&&"border-red-500"),children:[e.jsx("option",{value:"",children:"Select category..."}),E.map(t=>e.jsx("option",{value:t,children:t},t))]}),d.category&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:l.is_active,onChange:()=>m("is_active",!0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:a("text-sm",s.text.primary),children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:!l.is_active,onChange:()=>m("is_active",!1),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:a("text-sm",s.text.primary),children:"Inactive"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Description"}),e.jsx("textarea",{value:l.description,onChange:t=>m("description",t.target.value),rows:4,className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus,d.description&&"border-red-500"),placeholder:"Enter product description..."}),d.description&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Product Image URL"}),e.jsx("input",{type:"url",value:l.image_url,onChange:t=>m("image_url",t.target.value),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"https://example.com/image.jpg"}),l.image_url&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:l.image_url,alt:"Product preview",className:"w-32 h-32 object-cover rounded-xl",onError:t=>{t.currentTarget.style.display="none"}})})]})]}),x==="pricing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Price per cmÂ² *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:a("absolute left-3 top-1/2 transform -translate-y-1/2",s.text.secondary),children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:l.price_per_sq_cm,onChange:t=>m("price_per_sq_cm",o(t.target.value)),className:a("w-full pl-8 pr-4 py-3 rounded-xl",s.input.base,s.input.focus,d.price_per_sq_cm&&"border-red-500"),placeholder:"0.00"})]}),d.price_per_sq_cm&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.price_per_sq_cm})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"National ASP"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:a("absolute left-3 top-1/2 transform -translate-y-1/2",s.text.secondary),children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:l.national_asp,onChange:t=>m("national_asp",o(t.target.value)),className:a("w-full pl-8 pr-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Commission Rate *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:l.commission_rate,onChange:t=>m("commission_rate",o(t.target.value)),className:a("w-full pr-8 pl-4 py-3 rounded-xl",s.input.base,s.input.focus,d.commission_rate&&"border-red-500"),placeholder:"0.0"}),e.jsx("span",{className:a("absolute right-3 top-1/2 transform -translate-y-1/2",s.text.secondary),children:"%"})]}),d.commission_rate&&e.jsx("p",{className:"text-sm mt-1 text-red-500",children:d.commission_rate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"MUE Limit"}),e.jsx("input",{type:"number",min:"0",value:l.mue,onChange:t=>m("mue",o(t.target.value)),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"Maximum Units of Eligibility"}),e.jsx("p",{className:a("text-xs mt-1",s.text.secondary),children:"Maximum units that can be billed per patient"})]}),e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Graph Type"}),e.jsxs("select",{value:l.graph_type,onChange:t=>m("graph_type",t.target.value),className:a("w-full px-4 py-3 rounded-xl",s.input.base,s.input.focus),children:[e.jsx("option",{value:"",children:"Select graph type..."}),e.jsx("option",{value:"linear",children:"Linear"}),e.jsx("option",{value:"exponential",children:"Exponential"}),e.jsx("option",{value:"logarithmic",children:"Logarithmic"})]})]})]}),e.jsxs("div",{className:a("p-4 rounded-xl",s.glass.frost),children:[e.jsx("h3",{className:a("text-sm font-medium mb-3",s.text.primary),children:"Pricing Preview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:a("block",s.text.secondary),children:"1 cmÂ²"}),e.jsxs("span",{className:a("font-medium",s.text.primary),children:["$",u(l.price_per_sq_cm)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:a("block",s.text.secondary),children:"10 cmÂ²"}),e.jsxs("span",{className:a("font-medium",s.text.primary),children:["$",u(l.price_per_sq_cm*10)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:a("block",s.text.secondary),children:"25 cmÂ²"}),e.jsxs("span",{className:a("font-medium",s.text.primary),children:["$",u(l.price_per_sq_cm*25)]})]})]})]})]}),x==="sizes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-2",s.text.primary),children:"Size Unit"}),e.jsxs("select",{value:l.size_unit,onChange:t=>m("size_unit",t.target.value),className:a("w-full px-4 py-3 rounded-xl max-w-xs",s.input.base,s.input.focus),children:[e.jsx("option",{value:"cm",children:"Centimeters (cmÂ²)"}),e.jsx("option",{value:"inches",children:"Inches"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:a("text-lg font-medium",s.text.primary),children:["Available Sizes (",l.size_unit==="cm"?"cmÂ²":"inches",")"]}),e.jsxs("button",{type:"button",onClick:G,className:a("flex items-center gap-2 px-3 py-2 rounded-lg text-sm",s.button.primary.base,s.button.primary.hover),children:[e.jsx(P,{className:"w-4 h-4"}),"Add Size"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:l.available_sizes.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",step:"0.1",value:t,onChange:c=>H(i,o(c.target.value)),className:a("flex-1 px-3 py-2 rounded-lg text-sm",s.input.base,s.input.focus),placeholder:"0"}),e.jsx("button",{type:"button",onClick:()=>I(i),className:a("p-2 rounded-lg text-red-500 hover:bg-red-500/10"),children:e.jsx(re,{className:"w-3 h-3"})})]},i))}),l.available_sizes.length===0&&e.jsxs("div",{className:a("text-center py-8",s.glass.frost,"rounded-xl"),children:[e.jsx(f,{className:a("w-12 h-12 mx-auto mb-3",s.text.muted)}),e.jsx("p",{className:a("text-sm",s.text.secondary),children:'No sizes configured. Click "Add Size" to get started.'})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:a("text-lg font-medium",s.text.primary),children:"Size Options (Text Format)"}),e.jsx("p",{className:a("text-sm",s.text.secondary),children:'Alternative text-based size options (e.g., "Small", "Medium", "Large")'})]}),e.jsxs("button",{type:"button",onClick:B,className:a("flex items-center gap-2 px-3 py-2 rounded-lg text-sm",s.button.secondary.base,s.button.secondary.hover),children:[e.jsx(P,{className:"w-4 h-4"}),"Add Option"]})]}),e.jsx("div",{className:"space-y-3",children:l.size_options.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:t,onChange:c=>V(i,c.target.value),className:a("flex-1 px-4 py-3 rounded-xl",s.input.base,s.input.focus),placeholder:"Enter size option..."}),e.jsx("button",{type:"button",onClick:()=>Q(i),className:a("p-3 rounded-xl text-red-500 hover:bg-red-500/10"),children:e.jsx(_,{className:"w-4 h-4"})})]},i))}),l.size_options.length===0&&e.jsxs("div",{className:a("text-center py-8",s.glass.frost,"rounded-xl"),children:[e.jsx(f,{className:a("w-12 h-12 mx-auto mb-3",s.text.muted)}),e.jsx("p",{className:a("text-sm",s.text.secondary),children:"No size options configured. This is optional."})]})]})]}),x==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:a("block text-sm font-medium mb-4",s.text.primary),children:"Upload Documents"}),e.jsxs("div",{className:a("border-2 border-dashed rounded-xl p-8 text-center transition-colors","border-blue-500/30 hover:border-blue-500/50",s.glass.frost),children:[e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif",onChange:t=>O(t.target.files),className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(ne,{className:a("w-12 h-12 mx-auto mb-4",s.text.secondary)}),e.jsx("p",{className:a("text-lg font-medium mb-2",s.text.primary),children:"Drop files here or click to upload"}),e.jsx("p",{className:a("text-sm",s.text.secondary),children:"Supports PDF, DOC, DOCX, JPG, PNG, GIF (max 10MB each)"})]})]})]}),l.document_urls.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:a("text-lg font-medium mb-4",s.text.primary),children:"Existing Documents"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.document_urls.map((t,i)=>e.jsxs("div",{className:a("p-4 rounded-xl border transition-all",s.glass.frost,"hover:shadow-lg"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx(v,{className:a("w-6 h-6 flex-shrink-0",s.text.secondary)}),e.jsx("button",{type:"button",onClick:()=>R(t),className:"text-red-500 hover:text-red-700",children:e.jsx(_,{className:"w-4 h-4"})})]}),e.jsx("p",{className:a("text-sm font-medium mb-2 truncate",s.text.primary),children:t.split("/").pop()||"Document"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:a("flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-xs",s.button.secondary.base,s.button.secondary.hover),children:[e.jsx(ce,{className:"w-3 h-3"}),"View"]}),e.jsxs("a",{href:t,download:!0,className:a("flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-xs",s.button.primary.base,s.button.primary.hover),children:[e.jsx(me,{className:"w-3 h-3"}),"Download"]})]})]},i))})]}),l.new_documents.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:a("text-lg font-medium mb-4",s.text.primary),children:"New Documents (Pending Upload)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.new_documents.map((t,i)=>e.jsxs("div",{className:a("p-4 rounded-xl border transition-all","border-blue-500/30 bg-blue-500/5"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.type.startsWith("image/")?e.jsx(de,{className:"w-6 h-6 flex-shrink-0 text-blue-500"}):e.jsx(v,{className:"w-6 h-6 flex-shrink-0 text-blue-500"}),e.jsx("button",{type:"button",onClick:()=>L(i),className:"text-red-500 hover:text-red-700",children:e.jsx(_,{className:"w-4 h-4"})})]}),e.jsx("p",{className:a("text-sm font-medium mb-1 truncate",s.text.primary),children:t.name}),e.jsxs("p",{className:a("text-xs",s.text.secondary),children:[(t.size/1024/1024).toFixed(2)," MB"]}),t.type.startsWith("image/")&&N[i]&&e.jsx("img",{src:N[i],alt:"Preview",className:"w-full h-20 object-cover rounded-lg mt-3"})]},i))})]}),e.jsx("div",{className:a("p-4 rounded-xl",s.status.info),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Document Guidelines"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Upload product specifications, clinical studies, or marketing materials"}),e.jsx("li",{children:"â€¢ Supported formats: PDF, DOC, DOCX, JPG, PNG, GIF"}),e.jsx("li",{children:"â€¢ Maximum file size: 10MB per file"}),e.jsx("li",{children:"â€¢ Documents will be available to authorized users"})]})]})]})})]}),x==="history"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:a("text-lg font-medium mb-4",s.text.primary),children:"Pricing History"}),e.jsx("p",{className:a("text-sm mb-6",s.text.secondary),children:"Track changes to National ASP, MUE, and other pricing fields over time."}),T?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:a(s.table.header),children:e.jsxs("tr",{children:[e.jsx("th",{className:a("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",s.table.headerText),children:"Date"}),e.jsx("th",{className:a("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",s.table.headerText),children:"Changed By"}),e.jsx("th",{className:a("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",s.table.headerText),children:"Field"}),e.jsx("th",{className:a("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",s.table.headerText),children:"Old Value"}),e.jsx("th",{className:a("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",s.table.headerText),children:"New Value"}),e.jsx("th",{className:a("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",s.table.headerText),children:"Change"}),e.jsx("th",{className:a("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",s.table.headerText),children:"Reason"})]})}),e.jsx("tbody",{className:"divide-y divide-white/10",children:g.map((t,i)=>{var c;return e.jsx(Z.Fragment,{children:(c=t.changed_fields)==null?void 0:c.map((r,p)=>{var h,S,z;return e.jsxs("tr",{className:a(s.table.rowHover,i%2===0?s.table.evenRow:""),children:[p===0&&e.jsxs(e.Fragment,{children:[e.jsx("td",{rowSpan:t.changed_fields.length,className:"px-4 py-3 text-sm",children:new Date(t.effective_date).toLocaleDateString()}),e.jsx("td",{rowSpan:t.changed_fields.length,className:"px-4 py-3 text-sm",children:t.changed_by?e.jsxs("div",{children:[e.jsx("div",{className:s.text.primary,children:t.changed_by.name}),e.jsx("div",{className:a("text-xs",s.text.secondary),children:t.changed_by.email})]}):e.jsx("span",{className:s.text.secondary,children:"System"})})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:a("font-medium",s.text.primary),children:r==="national_asp"?"National ASP":r==="mue"?"MUE":r==="price_per_sq_cm"?"Price/cmÂ²":r==="msc_price"?"MSC Price":r==="commission_rate"?"Commission Rate":r})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:r==="national_asp"||r==="price_per_sq_cm"||r==="msc_price"?`$${u((h=t.previous_values)==null?void 0:h[r])}`:r==="commission_rate"?`${o((S=t.previous_values)==null?void 0:S[r])}%`:((z=t.previous_values)==null?void 0:z[r])||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:r==="national_asp"||r==="price_per_sq_cm"||r==="msc_price"?`$${u(t[r])}`:r==="commission_rate"?`${o(t[r])}%`:t[r]||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:r==="national_asp"&&t.price_change_percentage?e.jsxs("span",{className:a("px-2 py-1 rounded-full text-xs font-medium",t.is_price_increase?"bg-red-500/20 text-red-400":t.is_price_decrease?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:[t.is_price_increase?"â†‘":"â†“"," ",u(Math.abs(o(t.price_change_percentage))),"%"]}):null}),p===0&&e.jsx("td",{rowSpan:t.changed_fields.length,className:"px-4 py-3 text-sm",children:t.change_reason||"-"})]},`${t.id}-${r}`)})},t.id)})})]})}):e.jsxs("div",{className:a("text-center py-12",s.text.secondary),children:[e.jsx(F,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No pricing history available for this product."})]})]}),e.jsx("div",{className:a("p-4 rounded-xl",s.status.info),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"About Pricing History"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ All changes to pricing fields are automatically tracked"}),e.jsx("li",{children:"â€¢ National ASP changes show percentage increase/decrease"}),e.jsx("li",{children:"â€¢ System changes include migrations and automated updates"}),e.jsx("li",{children:"â€¢ History is maintained for audit and compliance purposes"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-white/10",children:[e.jsx("button",{type:"button",onClick:()=>b.get("/products"),className:a("px-6 py-3 rounded-xl font-medium",s.button.ghost.base,s.button.ghost.hover),children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:a("flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all",y?"bg-gray-400 cursor-not-allowed":a(s.button.primary.base,s.button.primary.hover)),children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4"}),"Save Product"]})})]})]})]})]})]})}export{ve as default};
