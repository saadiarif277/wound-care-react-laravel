import{r as i,j as e,S as L}from"./app-b7vnQlZc.js";import{M as U}from"./MainLayout-CSlV7Py7.js";import{a as E}from"./api-Ct1kbUGY.js";import{B as te}from"./building-2-CkpB8wcQ.js";import{X as ae}from"./x-CdJq2FK8.js";import{M as re}from"./mail-sgOdItNJ.js";import{c as B}from"./createLucideIcon-BGsZVnCF.js";import{M as ie}from"./map-pin-8ezgSHa1.js";import{L as le}from"./loader-circle-DgTAaFtW.js";import{y as $,A as M,n as k,e as ne,B as ce,g as de,x as O,C as R,h as I,D as oe,E as me,a as xe}from"./index-DpA9ZXCS.js";import"./triangle-alert-CLRk3LfA.js";import"./check-KIJGV9m7.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=B("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=B("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ge=({isOpen:c,onClose:j,onSave:F,organization:r,mode:m="create"})=>{const[a,h]=i.useState({name:"",tax_id:"",type:"",status:"active",sales_rep_id:"",email:"",phone:"",address:"",city:"",region:"",country:"US",postal_code:"",fhir_id:""}),[d,u]=i.useState({}),[x,N]=i.useState(!1),[f,w]=i.useState([]),_=[{value:"",label:"Select Type"},{value:"Hospital",label:"Hospital"},{value:"Clinic Group",label:"Clinic Group"},{value:"Private Practice",label:"Private Practice"},{value:"Surgery Center",label:"Surgery Center"},{value:"Wound Care Center",label:"Wound Care Center"},{value:"Other",label:"Other"}];i.useEffect(()=>{h(m==="edit"&&r?{name:r.name||"",tax_id:r.tax_id||"",type:r.type||"",status:r.status||"active",sales_rep_id:r.sales_rep_id||"",email:r.email||"",phone:r.phone||"",address:r.address||"",city:r.city||"",region:r.region||"",country:r.country||"US",postal_code:r.postal_code||"",fhir_id:r.fhir_id||""}:{name:"",tax_id:"",type:"",status:"active",sales_rep_id:"",email:"",phone:"",address:"",city:"",region:"",country:"US",postal_code:"",fhir_id:""}),u({})},[m,r,c]),i.useEffect(()=>{c&&y()},[c]);const y=async()=>{try{w([])}catch(t){console.error("Error loading sales reps:",t)}},l=(t,o)=>{h(v=>({...v,[t]:o})),d[t]&&u(v=>({...v,[t]:""}))},S=()=>{const t={};return a.name.trim()||(t.name="Organization name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(t.email="Please enter a valid email address"):t.email="Email is required",a.phone&&!/^[\d\s\-\+\(\)\.]+$/.test(a.phone)&&(t.phone="Please enter a valid phone number"),u(t),Object.keys(t).length===0},z=async t=>{if(t.preventDefault(),!!S()){N(!0);try{let o;m==="edit"&&r?o=await E.organizations.update(r.id,a):o=await E.organizations.create(a),F(o.data),j()}catch(o){o.message&&o.message.includes("validation")?u({name:"Server validation error occurred"}):u({name:o.message||"An error occurred while saving"})}finally{N(!1)}}};return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:m==="edit"?"Edit Organization":"Add New Organization"})]}),e.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ae,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:z,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>l("name",t.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter organization name"}),d.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("select",{value:a.type,onChange:t=>l("type",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:_.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>l("status",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",value:a.tax_id,onChange:t=>l("tax_id",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tax ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FHIR ID"}),e.jsx("input",{type:"text",value:a.fhir_id,onChange:t=>l("fhir_id",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter FHIR ID (optional)"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",value:a.email,onChange:t=>l("email",t.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"})]}),d.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",value:a.phone,onChange:t=>l("phone",t.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"})]}),d.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.phone})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Address Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("textarea",{value:a.address,onChange:t=>l("address",t.target.value),rows:2,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter street address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",value:a.city,onChange:t=>l("city",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Region"}),e.jsx("input",{type:"text",value:a.region,onChange:t=>l("region",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter state/region"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),e.jsx("input",{type:"text",value:a.postal_code,onChange:t=>l("postal_code",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter postal code"})]})]}),e.jsxs("div",{className:"md:w-1/3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsxs("select",{value:a.country,onChange:t=>l("country",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"CA",children:"Canada"}),e.jsx("option",{value:"MX",children:"Mexico"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:x,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[x?e.jsx(le,{className:"h-4 w-4 animate-spin"}):e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:x?"Saving...":m==="edit"?"Update":"Create"})]})]})]})]})}):null};function Oe(){const[c,j]=i.useState("organizations"),[F,r]=i.useState(!0),[m,a]=i.useState(null),[h,d]=i.useState(""),[u,x]=i.useState(!1),[N,f]=i.useState(null),[w,_]=i.useState("create"),[y,l]=i.useState([]),[S,z]=i.useState([]),[t,o]=i.useState([]),[v,H]=i.useState([]),[D,V]=i.useState([]),[p,A]=i.useState({totalOrganizations:0,activeFacilities:0,activeProviders:0,pendingOnboarding:0,avgSatisfactionScore:0,totalRevenue:0}),T=()=>{f(null),_("create"),x(!0)},G=s=>{f(s),_("edit"),x(!0)},q=s=>{w==="create"?(l(n=>[s,...n]),A(n=>({...n,totalOrganizations:n.totalOrganizations+1}))):l(n=>n.map(g=>g.id===s.id?s:g)),x(!1),f(null)},W=()=>{x(!1),f(null)},X=async()=>{r(!0),a(null);try{switch(c){case"organizations":const s=await E.organizations.getAll({search:h});l(s.data||[]);break;case"facilities":z([]);break;case"providers":o([]);break;case"onboarding":H([]);break;case"analytics":V([]);break}await J()}catch(s){a(s instanceof Error?s.message:"Failed to fetch data"),console.error("Error fetching data:",s)}finally{r(!1)}},J=async()=>{var s,n;try{const g=await E.organizations.getStats();A({totalOrganizations:((s=g.data)==null?void 0:s.total)||0,activeFacilities:((n=g.data)==null?void 0:n.active)||0,activeProviders:0,pendingOnboarding:0,avgSatisfactionScore:0,totalRevenue:0})}catch(g){console.error("Error fetching stats:",g),A({totalOrganizations:y.length,activeFacilities:0,activeProviders:0,pendingOnboarding:0,avgSatisfactionScore:0,totalRevenue:0})}};i.useEffect(()=>{X()},[c,h]);const K=[{id:"organizations",label:"Organizations",icon:$,count:p.totalOrganizations},{id:"facilities",label:"Facilities",icon:M,count:p.activeFacilities},{id:"providers",label:"Providers",icon:k,count:p.activeProviders},{id:"onboarding",label:"Onboarding Pipeline",icon:ne,count:p.pendingOnboarding},{id:"analytics",label:"Customer Analytics",icon:ce,count:null}],b=s=>{const n="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium";switch(s.toLowerCase()){case"active":case"completed":return`${n} bg-green-100 text-green-800`;case"pending":case"in_progress":return`${n} bg-yellow-100 text-yellow-800`;case"inactive":case"rejected":return`${n} bg-red-100 text-red-800`;default:return`${n} bg-gray-100 text-gray-800`}},P=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),C=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Q=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Organizations"}),e.jsxs("button",{onClick:T,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),"Add Organization"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No organizations"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding a new organization."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:T,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Add Organization"]})})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:y.map(s=>e.jsx("li",{className:"px-6 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("span",{className:b(s.status),children:s.status})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.type}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),s.facilities_count||0," facilities"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),s.providers_count||0," providers"]}),e.jsxs("span",{children:["Created: ",C(s.created_at)]})]}),s.contact_email&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.contact_email})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>G(s),className:"text-blue-600 hover:text-blue-900 p-1 rounded transition-colors",title:"Edit organization",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-1 rounded transition-colors",title:"View details",children:e.jsx(I,{className:"w-4 h-4"})})]})]})},s.id))})})]}),Y=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Facilities"}),e.jsxs("button",{onClick:()=>{},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),"Add Facility"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No facilities"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Facilities management coming soon."})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:S.map(s=>e.jsx("li",{className:"px-6 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("span",{className:b(s.status),children:s.status})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.organization_name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),s.providers_count," providers"]}),e.jsxs("span",{children:[s.orders_count," orders"]}),e.jsxs("span",{children:["Type: ",s.type]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{},className:"text-blue-600 hover:text-blue-900 p-1 rounded transition-colors",title:"Edit facility",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-1 rounded transition-colors",title:"View details",children:e.jsx(I,{className:"w-4 h-4"})})]})]})},s.id))})})]}),Z=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Providers"}),e.jsxs("button",{onClick:()=>{},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),"Add Provider"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No providers"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Provider management coming soon."})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(s=>e.jsx("li",{className:"px-6 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("span",{className:b(s.status),children:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.specialty," • NPI: ",s.npi]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.facility_name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:[s.orders_count," orders"]}),s.last_order_date&&e.jsxs("span",{children:["Last order: ",C(s.last_order_date)]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{},className:"text-blue-600 hover:text-blue-900 p-1 rounded transition-colors",title:"Edit provider",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-1 rounded transition-colors",title:"View details",children:e.jsx(I,{className:"w-4 h-4"})})]})]})},s.id))})})]}),ee=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Onboarding Pipeline"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"All Stages"}),e.jsx("option",{value:"documentation",children:"Documentation"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"verification",children:"Verification"}),e.jsx("option",{value:"approval",children:"Approval"})]})})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(s=>e.jsx("li",{className:"px-6 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.provider_name}),e.jsx("span",{className:b(s.status),children:s.status.replace("_"," ")})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.facility_name," • ",s.organization_name]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Stage: ",s.stage]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.completion_percentage}%`}})}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:[s.completion_percentage,"%"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Assigned to: ",s.assigned_to]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Due: ",C(s.target_completion_date)]})]})]})},s.id))})})]}),se=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Customer Analytics"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(oe,{className:"h-8 w-8 text-green-600"})}),e.jsx("div",{className:"ml-5",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),e.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:P(p.totalRevenue)})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(me,{className:"h-8 w-8 text-blue-600"})}),e.jsx("div",{className:"ml-5",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Avg Satisfaction"}),e.jsxs("dd",{className:"text-2xl font-semibold text-gray-900",children:[p.avgSatisfactionScore,"/10"]})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(xe,{className:"h-8 w-8 text-purple-600"})}),e.jsx("div",{className:"ml-5",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Active Customers"}),e.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:D.length})]})})]})})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Order Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Churn Risk"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Satisfaction"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.organization_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last order: ",C(s.last_order_date)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.total_orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(s.total_revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(s.avg_order_value)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.growth_rate>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[s.growth_rate>=0?"+":"",s.growth_rate.toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:b(s.churn_risk),children:s.churn_risk})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.satisfaction_score,"/10"]})]},s.organization_id))})]})})})]});return F?e.jsxs(U,{children:[e.jsx(L,{title:"Customer Management"}),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})})]}):e.jsxs(U,{children:[e.jsx(L,{title:"Customer Management"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Customer Management"}),e.jsx("p",{className:"text-gray-500",children:"Manage organizations, facilities, providers, onboarding, and customer analytics"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h,onChange:s=>d(s.target.value),placeholder:"Search...",className:"w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:K.map(s=>{const n=s.icon;return e.jsxs("button",{onClick:()=>j(s.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${c===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(n,{className:"w-4 h-4"}),s.label,s.count!==null&&e.jsx("span",{className:"bg-gray-100 text-gray-600 py-0.5 px-2.5 rounded-full text-xs",children:s.count})]},s.id)})})}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"text-red-700",children:[e.jsx("p",{className:"font-medium",children:"Error loading data"}),e.jsx("p",{className:"text-sm",children:m})]})}),e.jsxs("div",{className:"min-h-96",children:[c==="organizations"&&Q(),c==="facilities"&&Y(),c==="providers"&&Z(),c==="onboarding"&&ee(),c==="analytics"&&se()]})]}),e.jsx(ge,{isOpen:u,onClose:W,onSave:q,organization:N,mode:w})]})}export{Oe as default};
