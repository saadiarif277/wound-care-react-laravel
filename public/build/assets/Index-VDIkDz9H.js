import{r as N,G as w,j as e,S as C,A as x}from"./app-BIIu6Vfg.js";import{M as S}from"./MainLayout-DFIOg-IX.js";import{B as i,C as m,b as I,c as k,a as o}from"./card-DyDep7jM.js";import{B as F}from"./badge-BwUm_ZXQ.js";import{x as R,n as A,y as M,p as _,v as B,h as z,z as D}from"./index-CFCF1YSN.js";import"./x-D5uUfODk.js";import"./createLucideIcon-BEFA6UwU.js";import"./triangle-alert-BcT2QLL-.js";import"./check-DHyijvq1.js";function q({auth:U,invitations:p}){const[h,l]=N.useState(!1),{data:r,setData:n,post:u,processing:c,errors:t,reset:g}=w({email:"",role:"",organization_id:"",message:""}),d=[{value:"provider",label:"Provider"},{value:"office-manager",label:"Office Manager"},{value:"msc-rep",label:"MSC Rep"},{value:"msc-subrep",label:"MSC Sub-Rep"},{value:"msc-admin",label:"MSC Admin"}],j=s=>{const a={pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",expired:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a[s]||a.pending}`},f=()=>{u("/admin/invitations",{onSuccess:()=>{g(),l(!1)}})},y=s=>{x.post(`/admin/invitations/${s}/resend`)},b=s=>{confirm("Are you sure you want to cancel this invitation?")&&x.delete(`/admin/invitations/${s}`)};return e.jsxs(S,{title:"User Invitations",children:[e.jsx(C,{title:"User Invitations"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Invitations"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Send and manage invitations for new users across all roles"})]}),e.jsxs(i,{onClick:()=>l(!0),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})]}),h&&e.jsxs(m,{className:"mb-6",children:[e.jsx(I,{children:e.jsx(k,{children:"Send New Invitation"})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:r.email,onChange:s=>n("email",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com"}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs("select",{value:r.role,onChange:s=>n("role",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select role"}),d.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),t.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.role})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Message (Optional)"}),e.jsx("textarea",{value:r.message,onChange:s=>n("message",s.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a personal message to the invitation..."})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(i,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(i,{onClick:f,disabled:c,children:c?"Sending...":"Send Invitation"})]})]})]}),e.jsx(m,{children:e.jsx(o,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sent Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.data.map(s=>{var a;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.email}),s.invited_by&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Invited by ",s.invited_by.first_name," ",s.invited_by.last_name]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(F,{variant:"outline",children:((a=d.find(v=>v.value===s.role))==null?void 0:a.label)||s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.organization?e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.organization.name})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:j(s.status),children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[(s.status==="pending"||s.status==="sent")&&e.jsx("button",{onClick:()=>y(s.id),className:"text-blue-600 hover:text-blue-900 p-1",title:"Resend Invitation",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900 p-1",title:"View Details",children:e.jsx(z,{className:"w-4 h-4"})}),s.status!=="accepted"&&e.jsx("button",{onClick:()=>b(s.id),className:"text-red-600 hover:text-red-900 p-1",title:"Cancel Invitation",children:e.jsx(D,{className:"w-4 h-4"})})]})})]},s.id)})})]})})})})]})}export{q as default};
